"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[29875],{29875:(Q,m,a)=>{a.r(m),a.d(m,{LoginModule:()=>N});var f=a(92337),p=a(70916),h=a(47530),v=a(41840),g=a(78770),e=a(99468),_=a(13368),C=a(50387),M=a(44328),A=a(20005),u=a(96814),l=a(56223),b=a(32925),T=a(42152),Z=a(3291);function L(n,c){if(1&n&&e._UZ(0,"validation-messages",23),2&n){e.oxw();const t=e.MAs(9);e.Q6J("formCtrl",t)}}function S(n,c){if(1&n&&e._UZ(0,"validation-messages",23),2&n){e.oxw();const t=e.MAs(14);e.Q6J("formCtrl",t)}}function x(n,c){1&n&&(e.TgZ(0,"div",24)(1,"div",25)(2,"span"),e._uU(3),e.ALo(4,"localize"),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"LoginWith")))}function O(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.externalLogin(s))}),e._UZ(1,"i"),e._uU(2),e.qZA()}if(2&n){const t=c.$implicit;e.s9C("title",t.name),e.xp6(1),e.Gre("fab fa-",t.icon,""),e.xp6(1),e.hij(" ",t.name," ")}}function y(n,c){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,O,3,5,"a",27),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.loginService.externalLoginProviders)}}function I(n,c){1&n&&(e.TgZ(0,"span")(1,"a",29),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"span",30),e._uU(5," | "),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CreateAnAccount")))}function w(n,c){1&n&&(e.TgZ(0,"span")(1,"a",31),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"span",30),e._uU(5," | "),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"NewTenant")))}const U=[{path:"",component:(()=>{class n extends v.c{constructor(t,i,o,s,r,d){super(t),this.loginService=i,this._router=o,this._sessionService=s,this._sessionAppService=r,this._recaptchaWrapperService=d,this.submitting=!1,this.isMultiTenancyEnabled=this.multiTenancy.isEnabled}get multiTenancySideIsTeanant(){return this._sessionService.tenantId>0}get isTenantSelfRegistrationAllowed(){return this.setting.getBoolean("App.TenantManagement.AllowSelfRegistration")}get isSelfRegistrationAllowed(){return!!this._sessionService.tenantId&&this.setting.getBoolean("App.UserManagement.AllowSelfRegistration")}ngOnInit(){this._sessionService.userId>0&&g._.getReturnUrl()&&g._.getSingleSignIn()&&this._sessionAppService.updateUserSignInToken().subscribe(t=>{const i=g._.getReturnUrl(),o=i+(i.indexOf("?")>=0?"&":"?")+"accessToken="+t.signInToken+"&userId="+t.encodedUserId+"&tenantId="+t.encodedTenantId;location.href=o}),this.handleExternalLoginCallbacks()}ngAfterViewInit(){this._recaptchaWrapperService.setCaptchaVisibilityOnLogin()}handleExternalLoginCallbacks(){let t=g._.getQueryParametersUsingHash().state,i=g._.getQueryParameters();if(t&&t.indexOf("openIdConnect")>=0&&this.loginService.openIdConnectLoginCallback({}),i.state&&i.state.indexOf("openIdConnect")>=0&&this.loginService.openIdConnectLoginCallback({}),i.twitter&&"1"===i.twitter){let o=g._.getQueryParameters();this.loginService.twitterLoginCallback(o.oauth_token,o.oauth_verifier)}}login(){let t=i=>{this.showMainSpinner(),this.submitting=!0,this.loginService.authenticate(()=>{this.submitting=!1,this.hideMainSpinner()},null,i)};this._recaptchaWrapperService.useCaptchaOnLogin()?this._recaptchaWrapperService.getService().execute("login").subscribe(i=>t(i)):t(null)}externalLogin(t){this.loginService.externalAuthenticate(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(e.zs3),e.Y36(_.r),e.Y36(p.F0),e.Y36(C.Cr),e.Y36(M.HQk),e.Y36(A.o))};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:42,vars:35,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"fw-bolder","text-dark","fs-h4","fs-h1-lg"],["method","post",1,"login-form","form",3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-5"],["autoFocus","","type","text","autocomplete","new-password","name","userNameOrEmailAddress","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","ngModelChange"],["userNameOrEmailAddressInput","ngModel"],[3,"formCtrl",4,"ngIf"],["type","password","autocomplete","new-password","name","password","required","","maxlength","32",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[1,"mb-5","d-flex","justify-content-between","mt-4"],[1,"form-check","form-check-custom","form-check-solid"],["type","checkbox","name","rememberMe","value","true",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["routerLink","/account/forgot-password","id","forget-password",1,"text-primary","fs-h6","fw-bolder","text-hover-primary"],[1,"pb-lg-0","pb-5"],["type","submit",1,"btn","w-100","btn-primary","fw-bolder","fs-h6","px-8","py-4","my-3","me-3",3,"disabled"],["class","mt-10 mb-2",4,"ngIf"],["class","pb-lg-0 pb-5 login__options",4,"ngIf"],[1,"mt-5"],[4,"ngIf"],["routerLink","/account/email-activation","id","email-activation-btn"],[3,"formCtrl"],[1,"mt-10","mb-2"],[1,"divider"],[1,"pb-lg-0","pb-5","login__options"],["class","btn btn-sm btn-light-primary fw-bolder py-2 mb-2 ml-0 me-2",3,"title","click",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-light-primary","fw-bolder","py-2","mb-2","ml-0","me-2",3,"title","click"],["routerLink","/account/register"],[1,"pipe-divider"],["routerLink","/account/select-edition"]],template:function(i,o){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"localize"),e.qZA()(),e.TgZ(5,"form",3,4),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(7,"div",5)(8,"input",6,7),e.NdJ("ngModelChange",function(r){return o.loginService.authenticateModel.userNameOrEmailAddress=r}),e.ALo(10,"localize"),e.qZA(),e.YNc(11,L,1,1,"validation-messages",8),e.qZA(),e.TgZ(12,"div",5)(13,"input",9,10),e.NdJ("ngModelChange",function(r){return o.loginService.authenticateModel.password=r}),e.ALo(15,"localize"),e.qZA(),e.YNc(16,S,1,1,"validation-messages",8),e.qZA(),e.TgZ(17,"div",11)(18,"label",12)(19,"input",13),e.NdJ("ngModelChange",function(r){return o.loginService.rememberMe=r}),e.qZA(),e.TgZ(20,"span",14),e._uU(21),e.ALo(22,"localize"),e.qZA()(),e.TgZ(23,"a",15),e._uU(24),e.ALo(25,"localize"),e.qZA()(),e.TgZ(26,"div",16)(27,"button",17),e._uU(28),e.ALo(29,"localize"),e.qZA()()(),e.YNc(30,x,5,3,"div",18),e.YNc(31,y,2,1,"div",19),e.qZA(),e.TgZ(32,"div",20)(33,"div")(34,"span"),e._uU(35),e.ALo(36,"localize"),e.qZA()(),e.YNc(37,I,6,3,"span",21),e.YNc(38,w,6,3,"span",21),e.TgZ(39,"a",22),e._uU(40),e.ALo(41,"localize"),e.qZA()()),2&i){const s=e.MAs(6),r=e.MAs(9),d=e.MAs(14);e.Q6J("@routerTransition",void 0),e.xp6(3),e.Oqu(e.lcZ(4,19,"LogIn")),e.xp6(5),e.MGl("placeholder","",e.lcZ(10,21,"UserNameOrEmail")," *"),e.Q6J("ngModel",o.loginService.authenticateModel.userNameOrEmailAddress),e.xp6(3),e.Q6J("ngIf",!r.touched),e.xp6(2),e.MGl("placeholder","",e.lcZ(15,23,"Password")," *"),e.Q6J("ngModel",o.loginService.authenticateModel.password),e.xp6(3),e.Q6J("ngIf",!d.touched),e.xp6(3),e.Q6J("ngModel",o.loginService.rememberMe),e.xp6(2),e.hij(" ",e.lcZ(22,25,"RememberMe")," "),e.xp6(3),e.Oqu(e.lcZ(25,27,"ForgotPassword")),e.xp6(3),e.Q6J("disabled",!s.form.valid),e.xp6(1),e.Oqu(e.lcZ(29,29,"LogIn")),e.xp6(2),e.Q6J("ngIf",(o.multiTenancySideIsTeanant||!o.isMultiTenancyEnabled)&&o.loginService.externalLoginProviders.length>0),e.xp6(1),e.Q6J("ngIf",(o.multiTenancySideIsTeanant||!o.isMultiTenancyEnabled)&&o.loginService.externalLoginProviders.length>0),e.xp6(4),e.Oqu(e.lcZ(36,31,"NotAMemberYet")),e.xp6(2),e.Q6J("ngIf",o.isSelfRegistrationAllowed),e.xp6(1),e.Q6J("ngIf",!o.multiTenancySideIsTeanant&&o.isTenantSelfRegistrationAllowed),e.xp6(2),e.Oqu(e.lcZ(41,33,"EmailActivation"))}},dependencies:[u.sg,u.O5,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.Q7,l.nD,l.On,l.F,p.rH,b.h,T.s,Z.F],styles:['.login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.login__options[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:0!important}.login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-openidconnect[_ngcontent-%COMP%]:before{content:"\\f19b"}.login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-wsfederation[_ngcontent-%COMP%]{margin-right:2px}.login__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.fa-wsfederation[_ngcontent-%COMP%]:before{content:"\\f20e"}'],data:{animation:[(0,h.RP)()]}})}return n})(),pathMatch:"full"}];let J=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=e.oAB({type:n});static#t=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(U),p.Bz]})}return n})();var P=a(91860);let N=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=e.oAB({type:n});static#t=this.\u0275inj=e.cJS({imports:[f.o,P.y,J]})}return n})()}}]);