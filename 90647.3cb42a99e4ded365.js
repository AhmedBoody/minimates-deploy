"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[90647],{90647:(S,l,i)=>{i.r(l),i.d(l,{PaypalPurchaseModule:()=>Z});var d=i(92337),r=i(70916),u=i(41840),m=i(49291),h=i(47530),y=i(62660),o=i(44328),t=i(99468),g=i(97708),p=i(96814),f=i(94901),v=i(3291);function P(a,T){if(1&a&&(t.TgZ(0,"div",13)(1,"span",14),t._UZ(2,"i",15),t.qZA(),t.TgZ(3,"div",16)(4,"h4",17),t._uU(5),t.qZA(),t.TgZ(6,"span")(7,"p")(8,"span"),t._uU(9),t.TgZ(10,"strong"),t._uU(11),t.qZA()(),t._UZ(12,"br"),t.TgZ(13,"span"),t._uU(14),t.TgZ(15,"strong"),t._uU(16),t.qZA()()()()()()),2&a){const e=t.oxw();t.xp6(5),t.hij(" ",e.l("DemoPayPalAccount"),""),t.xp6(4),t.hij("",e.l("UserName"),": "),t.xp6(2),t.Oqu(e.config.demoUsername),t.xp6(3),t.hij("",e.l("Password"),": "),t.xp6(2),t.Oqu(e.config.demoPassword)}}function b(a,T){if(1&a&&t._UZ(0,"div",18),2&a){const e=t.oxw();t.Q6J("busyIf",e.paypalIsLoading)}}const I=[{path:"",component:(()=>{class a extends u.c{constructor(e,s,n,c,x,C){super(e),this._activatedRoute=s,this._payPalPaymentAppService=n,this._paymentAppService=c,this._router=x,this._tenantRegistrationHelper=C,this.paypalIsLoading=!0,this.subscriptionPaymentGateway=o.UWJ,this.totalAmount=0,this.description=""}ngOnInit(){this.setTenantIdCookieIfNeeded(),this.paymentId=this._activatedRoute.snapshot.queryParams.paymentId,this.redirectUrl=this._activatedRoute.snapshot.queryParams.redirectUrl,this._payPalPaymentAppService.getConfiguration().subscribe(e=>{this.config=e;let s=this.GetDisabledFundingsQueryString(e);(new m.$).load("https://www.paypal.com/sdk/js?client-id="+e.clientId+"&currency="+this.appSession.application.currency+s).then(()=>{this._paymentAppService.getPayment(this.paymentId).subscribe(n=>{this.description=n.description,this.totalAmount=n.amount,this.successCallbackUrl=n.successUrl,this.errorCallbackUrl=n.errorUrl,this.subscriptionPaymentGateway=n.gateway,this.paypalIsLoading=!1,this.preparePaypalButton()})})})}preparePaypalButton(){const e=this;window.paypal.Buttons({createOrder:function(s,n){return n.order.create({purchase_units:[{amount:{value:e.totalAmount,currency_code:e.appSession.application.currency}}]})},onApprove:function(s,n){e._payPalPaymentAppService.confirmPayment(e.paymentId,s.orderID).subscribe(()=>{y.I.ajax("post",e.successCallbackUrl+(e.successCallbackUrl.includes("?")?"&":"?")+"paymentId="+e.paymentId,null,null,c=>{e._tenantRegistrationHelper.registrationResult&&(e._tenantRegistrationHelper.registrationResult.isActive=!0),e._router.navigate([e.redirectUrl])})})}}).render("#paypal-button")}GetDisabledFundingsQueryString(e){return!e.disabledFundings||e.disabledFundings.length<=0?"":"&disable-funding="+e.disabledFundings.join()}setTenantIdCookieIfNeeded(){if(!this._activatedRoute.snapshot.queryParams.tenantId)return;let e=parseInt(this._activatedRoute.snapshot.queryParams.tenantId);abp.multiTenancy.setTenantIdCookie(e)}static#t=this.\u0275fac=function(s){return new(s||a)(t.Y36(t.zs3),t.Y36(r.gz),t.Y36(o.ou5),t.Y36(o.KC),t.Y36(r.F0),t.Y36(g.K))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["paypal-purchase-component"]],inputs:{editionPaymentType:"editionPaymentType"},features:[t.qOj],decls:23,vars:14,consts:[[1,"login-form"],[1,"card","card-bordered"],[1,"card-header","align-items-center"],[1,"fw-bolder","text-dark","fs-h4","fs-h1-lg"],[1,"card-body"],[1,"mb-5","row"],[1,"form-label","col-sm-4"],[1,"col-sm-8","text-end"],[1,"fw-bold"],["id","totalPrice",1,"fw-bold"],["class","alert bg-light-primary d-flex align-items-center p-5 mb-10",4,"ngIf"],["id","paypal-button"],[3,"busyIf",4,"ngIf"],[1,"alert","bg-light-primary","d-flex","align-items-center","p-5","mb-10"],[1,"svg-icon","svg-icon-2hx","svg-icon-primary","me-4"],[1,"fas","fa-info-circle","fs-1"],[1,"d-flex","flex-column"],[1,"mb-1","text-primary"],[3,"busyIf"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"localize"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"label",6),t._uU(9),t.qZA(),t.TgZ(10,"div",7)(11,"p",8),t._uU(12),t.qZA()()(),t.TgZ(13,"div",5)(14,"label",6),t._uU(15),t.qZA(),t.TgZ(16,"div",7)(17,"p",9),t._uU(18),t.ALo(19,"number"),t.qZA()()(),t.YNc(20,P,17,5,"div",10),t._UZ(21,"div",11),t.YNc(22,b,1,1,"div",12),t.qZA()()()),2&s&&(t.Q6J("@routerTransition",void 0),t.xp6(4),t.hij(" ",t.lcZ(5,9,"TenantSignUp")," "),t.xp6(5),t.Oqu(n.l("Item")),t.xp6(3),t.hij(" ",n.description," "),t.xp6(3),t.Oqu(n.l("Price")),t.xp6(3),t.AsE(" ",n.appSession.application.currencySign,"",t.xi3(19,11,n.totalAmount,"1.2-2")," "),t.xp6(2),t.Q6J("ngIf",n.config&&n.config.demoUsername&&n.config.demoPassword),t.xp6(2),t.Q6J("ngIf",n.paypalIsLoading))},dependencies:[p.O5,f.U,p.JJ,v.F],encapsulation:2,data:{animation:[(0,h.RP)()]}})}return a})(),pathMatch:"full"}];let U=(()=>{class a{static#t=this.\u0275fac=function(s){return new(s||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(I),r.Bz]})}return a})();var A=i(91860);let Z=(()=>{class a{static#t=this.\u0275fac=function(s){return new(s||a)};static#e=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[d.o,A.y,U]})}return a})()}}]);