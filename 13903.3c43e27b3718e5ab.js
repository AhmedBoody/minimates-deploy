"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[13903],{13903:(w,m,o)=>{o.r(m),o.d(m,{ValidateTwoFactorCodeModule:()=>x});var d=o(92337),s=o(70916),p=o(47530),u=o(41840),h=o(99080),e=o(99468),g=o(13368),f=o(20005),v=o(96814),a=o(56223),C=o(32925),S=o(42152),b=o(3291);function T(t,y){if(1&t){const n=e.EpF();e.TgZ(0,"div",12)(1,"label",13)(2,"input",14),e.NdJ("ngModelChange",function(r){e.CHM(n);const c=e.oxw();return e.KtG(c.loginService.authenticateModel.rememberClient=r)}),e.qZA(),e.TgZ(3,"span",15),e._uU(4),e.ALo(5,"localize"),e.qZA()()()}if(2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.loginService.authenticateModel.rememberClient),e.xp6(2),e.hij(" ",e.lcZ(5,2,"RememberThisBrowser")," ")}}function F(t,y){if(1&t&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"localize"),e.ALo(3,"localize"),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"RemainingTime"),": ",e.xi3(3,4,"SecondShort{0}",n.remainingSeconds),". ")}}const M=[{path:"",component:(()=>{class t extends u.c{constructor(n,i,r,c){super(n),this.loginService=i,this._router=r,this._recaptchaWrapperService=c,this.submitting=!1,this.remainingSeconds=90}canActivate(){return!(!this.loginService.authenticateModel||!this.loginService.authenticateResult)}ngOnInit(){if(!this.canActivate())return void this._router.navigate(["account/login"]);this.remainingSeconds=this.appSession.application.twoFactorCodeExpireSeconds;const n=(0,h.H)(1e3,1e3);this.timerSubscription=n.subscribe(()=>{this.remainingSeconds=this.remainingSeconds-1,0===this.remainingSeconds&&this.message.warn(this.l("TimeoutPleaseTryAgain")).then(()=>{this.loginService.authenticateModel.twoFactorVerificationCode=null,this._router.navigate(["account/login"])})})}ngAfterViewInit(){this._recaptchaWrapperService.setCaptchaVisibilityOnLogin()}ngOnDestroy(){this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null)}submit(){let n=i=>{this.loginService.authenticateModel.twoFactorVerificationCode=this.code,this.loginService.authenticate(()=>{},null,i)};this._recaptchaWrapperService.useCaptchaOnLogin()?this._recaptchaWrapperService.getService().execute("login").subscribe(i=>n(i)):n(null)}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(e.zs3),e.Y36(g.r),e.Y36(s.F0),e.Y36(f.o))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e.qOj],decls:18,vars:15,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],["method","post",1,"login-form","form",3,"ngSubmit"],["twoFactorForm","ngForm"],[1,"mb-5"],["autoFocus","","type","password","autocomplete","new-password","name","code","required","","maxlength","16",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[3,"formCtrl"],["class","mb-5 mt-4",4,"ngIf"],[1,"pb-lg-0","pb-5"],["type","submit",1,"btn","btn-primary","fw-bolder","fs-h6","px-8","py-4","my-3","me-3",3,"disabled"],["class","remaining-time-counter ml-5",4,"ngIf"],[1,"mb-5","mt-4"],[1,"form-check","form-check-custom","form-check-solid","py-1"],["type","checkbox","name","rememberClient","value","true",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"remaining-time-counter","ml-5"]],template:function(i,r){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.ALo(4,"localize"),e.qZA()(),e.TgZ(5,"form",2,3),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(7,"div",4)(8,"input",5,6),e.NdJ("ngModelChange",function(l){return r.code=l}),e.ALo(10,"localize"),e.qZA(),e._UZ(11,"validation-messages",7),e.qZA(),e.YNc(12,T,6,4,"div",8),e.TgZ(13,"div",9)(14,"button",10),e._uU(15),e.ALo(16,"localize"),e.qZA(),e.YNc(17,F,4,7,"span",11),e.qZA()()()),2&i){const c=e.MAs(6),l=e.MAs(9);e.Q6J("@routerTransition",void 0),e.xp6(3),e.hij(" ",e.lcZ(4,9,"VerifySecurityCode")," "),e.xp6(5),e.MGl("placeholder","",e.lcZ(10,11,"Code")," *"),e.Q6J("ngModel",r.code),e.xp6(3),e.Q6J("formCtrl",l),e.xp6(1),e.Q6J("ngIf","true"===r.s("Abp.Zero.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled")),e.xp6(2),e.Q6J("disabled",!c.form.valid),e.xp6(1),e.hij(" ",e.lcZ(16,13,"Submit")," "),e.xp6(2),e.Q6J("ngIf",r.remainingSeconds>=0)}},dependencies:[v.O5,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.Q7,a.nD,a.On,a.F,C.h,S.s,b.F],styles:[".remaining-time-counter[_ngcontent-%COMP%]{color:red}"],data:{animation:[(0,p.RP)()]}})}return t})(),pathMatch:"full"}];let A=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[s.Bz.forChild(M),s.Bz]})}return t})();var Z=o(91860);let x=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[d.o,Z.y,A]})}return t})()}}]);