"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[32629],{32629:(U,_,l)=>{l.r(_),l.d(_,{PostsModule:()=>ye});var u=l(96814),d=l(70916),m=l(41840),p=l(44328),Z=l(64716),e=l(99468),r=l(56223),g=l(72500),T=l(94901),C=l(68027),A=l(85219),x=l(51712),w=l(2268),b=l(68989),M=l(45513),y=l(24142),h=l(3291);const I=["rejectionPostModal"],J=function(i){return{backdrop:"static",keyboard:i}};let j=(()=>{class i extends m.c{constructor(t,n,o){super(t),this.fb=n,this._postsServiceProxy=o,this.saving=!1,this.modalSave=new e.vpe}ngOnInit(){this.rejectionPostForm=this.fb.group({id:new r.NI("",r.kI.required),reason:new r.NI("",r.kI.required)})}close(){this.modal.hide()}show(t){this.rejectionPostForm.get("id").setValue(t),this.modal.show()}save(){let t=new p.ig2;t.id=this.rejectionPostForm.get("id").value,t.rejectionReason=this.rejectionPostForm.get("reason").value,this.spinnerService.show(),this._postsServiceProxy.reject(t).subscribe(n=>{this.modal.hide(),this.spinnerService.hide(),this.notify.success(this.l("SuccessfullyRejected")),this.modalSave.emit(!0)},()=>this.spinnerService.hide())}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(e.zs3),e.Y36(r.qu),e.Y36(p.KM$))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["rejectionPostModal"]],viewQuery:function(n,o){if(1&n&&e.Gf(I,7),2&n){let s;e.iGM(s=e.CRH())&&(o.modal=s.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:26,vars:19,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","rejectionPostModal","aria-hidden","true",1,"modal","fade","create-or-edit-user-modal",3,"config"],["rejectionPostModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"card-body"],[1,"row","mb-5"],["for","Reason",1,"form-label"],["formControlName","reason","placeholder","Rejection Reason","rows","3",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","button",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"h4",6)(7,"span"),e._uU(8),e.ALo(9,"localize"),e.qZA()(),e.TgZ(10,"button",7),e.NdJ("click",function(){return o.close()}),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),e._uU(15,"Reason"),e.qZA(),e._UZ(16,"textarea",12),e.qZA()()(),e.TgZ(17,"div",13)(18,"button",14),e.NdJ("click",function(){return o.close()}),e._uU(19),e.ALo(20,"localize"),e.qZA(),e.TgZ(21,"button",15),e.NdJ("click",function(){return o.save()}),e._UZ(22,"i",16),e.TgZ(23,"span"),e._uU(24),e.ALo(25,"localize"),e.qZA()()()()()()()),2&n&&(e.Q6J("config",e.VKq(17,J,!o.saving)),e.xp6(4),e.Q6J("formGroup",o.rejectionPostForm),e.xp6(4),e.Oqu(e.lcZ(9,11,"RejectionPost")),e.xp6(2),e.Q6J("disabled",o.saving),e.uIk("aria-label",o.l("Close")),e.xp6(8),e.Q6J("disabled",o.saving),e.xp6(1),e.hij(" ",e.lcZ(20,13,"Cancel")," "),e.xp6(2),e.Q6J("disabled",!o.rejectionPostForm.valid)("buttonBusy",o.saving)("busyText",o.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(25,15,"Save")))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,M.L,y.Z,r.sg,r.u,h.F]})}return i})();var q=l(83410),R=l(98155);const N=["dataTable"],z=["paginator"],O=["rejectionPostModal"];function k(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.createPost())}),e._UZ(1,"i",35),e.TgZ(2,"span",21),e._uU(3),e.ALo(4,"localize"),e.qZA()()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"NewPost")," "))}function H(i,a){if(1&i&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.name," ")}}const L=function(){return["Pages.Administration.Posts.Cancel","Pages.Administration.Posts.Edit","Pages.Administration.Posts.View","Pages.Administration.Posts.Delete"]};function Q(i,a){1&i&&(e.TgZ(0,"tr")(1,"th",37),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",37),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th",37),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"th",37),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"th",38),e._uU(14),e.ALo(15,"localize"),e.qZA(),e.TgZ(16,"th",39),e.ALo(17,"permissionAny"),e._uU(18),e.ALo(19,"localize"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"Code")," "),e.xp6(3),e.hij(" ",e.lcZ(6,9,"Title")," "),e.xp6(3),e.hij(" ",e.lcZ(9,11,"Author")," "),e.xp6(3),e.hij(" ",e.lcZ(12,13,"LastActionDate")," "),e.xp6(3),e.hij(" ",e.lcZ(15,15,"Status")," "),e.xp6(2),e.Q6J("hidden",!e.lcZ(17,17,e.DdM(21,L))),e.xp6(2),e.hij(" ",e.lcZ(19,19,"Actions")," "))}function Y(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",50)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.editPost(o.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Edit")," "))}function D(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",50)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.viewPost(o.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"View")," "))}function E(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",50)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.publishPost(o))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Publish")," "))}function G(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",50)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.rejectPost(o))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Reject")," "))}function V(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",50)(1,"a",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.deletePost(o))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Delete")," "))}function $(i,a){if(1&i&&(e.TgZ(0,"ul",48),e.YNc(1,Y,4,3,"li",49),e.ALo(2,"permission"),e.YNc(3,D,4,3,"li",49),e.ALo(4,"permission"),e.YNc(5,E,4,3,"li",49),e.ALo(6,"permission"),e.YNc(7,G,4,3,"li",49),e.ALo(8,"permission"),e.YNc(9,V,4,3,"li",49),e.ALo(10,"permission"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,5,"Pages.Administration.Posts.Edit")&&(t.status==n.PostStatusEnum.Draft||t.status==n.PostStatusEnum.Submitted)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,7,"Pages.Administration.Posts.View")),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,9,"Pages.Administration.Posts.Publish")&&t.status==n.PostStatusEnum.Submitted),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,11,"Pages.Administration.Posts.Reject")&&t.status==n.PostStatusEnum.Submitted),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,13,"Pages.Administration.Posts.Delete")&&(t.status==n.PostStatusEnum.Draft||t.status==n.PostStatusEnum.Submitted))}}function K(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",37)(2,"span",40),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"div",41)(6,"span",42),e._uU(7),e.qZA()()(),e.TgZ(8,"td",37)(9,"span",40),e._uU(10),e.ALo(11,"localize"),e.qZA(),e.TgZ(12,"div",41)(13,"span",42),e._uU(14),e.qZA()()(),e.TgZ(15,"td",37)(16,"span",40),e._uU(17),e.ALo(18,"localize"),e.qZA(),e.TgZ(19,"div",41)(20,"span",42),e._uU(21),e.qZA()()(),e.TgZ(22,"td",37)(23,"span",40),e._uU(24),e.ALo(25,"localize"),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"td",38)(28,"span",40),e._uU(29),e.ALo(30,"localize"),e.qZA(),e._uU(31),e.qZA(),e.TgZ(32,"td",39),e.ALo(33,"permissionAny"),e.TgZ(34,"div",43)(35,"button",44),e._UZ(36,"i",45)(37,"span",46),e._uU(38),e.ALo(39,"localize"),e.qZA(),e.YNc(40,$,11,15,"ul",47),e.qZA()()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,15,"Code")),e.xp6(3),e.s9C("tooltip",t.code),e.xp6(1),e.hij(" ",t.code," "),e.xp6(3),e.Oqu(e.lcZ(11,17,"Title")),e.xp6(3),e.s9C("tooltip",t.title),e.xp6(1),e.hij(" ",t.title," "),e.xp6(3),e.Oqu(e.lcZ(18,19,"Author")),e.xp6(3),e.s9C("tooltip",t.author),e.xp6(1),e.hij(" ",t.author," "),e.xp6(3),e.Oqu(e.lcZ(25,21,"LastActionDate")),e.xp6(2),e.hij(" ",t.lastActionDate," "),e.xp6(3),e.Oqu(e.lcZ(30,23,"Status")),e.xp6(2),e.hij(" ",t.statusName," "),e.xp6(1),e.Q6J("hidden",!e.lcZ(33,25,e.DdM(29,L))),e.xp6(6),e.hij(" ",e.lcZ(39,27,"Actions")," ")}}function B(i,a){1&i&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const W=function(){return{"min-width":"50rem"}};let S=(()=>{class i extends m.c{constructor(t,n,o,s,c){super(t),this._postsServiceProxy=n,this._activatedRoute=o,this._router=s,this.fb=c,this.filterText="",this.PostStatusEnum=p.LYR}ngOnInit(){this.getChallangeStatuses(),this.searchForm=this.fb.group({code:[""],creationDate:[""],publishDate:[""],status:[]})}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getChallangeStatuses(){this._postsServiceProxy.getPostStatusesList().subscribe(t=>{this.statuses=t})}getPosts(t){this.primengTableHelper.shouldResetPaging(t)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._postsServiceProxy.getPosts(new p.v3C({publishDate:this.searchForm.get("publishDate").value,creationDate:this.searchForm.get("creationDate").value,status:null==this.searchForm.get("status").value?null:Number(this.searchForm.get("status").value),code:this.searchForm.get("code").value,sorting:this.primengTableHelper.getSorting(this.dataTable),maxResultCount:this.primengTableHelper.getMaxResultCount(this.paginator,t),skipCount:this.primengTableHelper.getSkipCount(this.paginator,t)})).pipe((0,Z.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(n=>{this.primengTableHelper.totalRecordsCount=n.totalCount,this.primengTableHelper.records=n.items,this.primengTableHelper.hideLoadingIndicator()}))}reset(){this.searchForm.reset(),this.getPosts()}reloadPage(){this.paginator.changePage(this.paginator.getPage())}createPost(){this._router.navigate(["/app/admin/posts/create"])}editPost(t){this._router.navigate(["/app/admin/posts/edit",t])}viewPost(t){this._router.navigate(["/app/admin/posts/view",t],{queryParams:{mode:"view"}})}deletePost(t){this.message.confirm(this.l("PostDeleteWarningMessage",t.code),this.l("AreYouSure"),n=>{if(n){let o=new p.QrA;o.id=t.id,this.spinnerService.show(),this._postsServiceProxy.delete(o).subscribe(s=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("SuccessfullyDeleted"))},()=>this.spinnerService.hide())}})}publishPost(t){this.message.confirm(this.l("PostStartWarningMessage",t.code),this.l("AreYouSure"),n=>{if(n){let o=new p.IC0;o.id=t.id,this.spinnerService.show(),this._postsServiceProxy.publish(o).subscribe(s=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("SuccessfullyPublished"))},()=>this.spinnerService.hide())}})}rejectPost(t){this.message.confirm(this.l("PostRejectWarningMessage",t.code),this.l("AreYouSure"),n=>{n&&this.rejectionPostModal.show(t.id)})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(e.zs3),e.Y36(p.KM$),e.Y36(d.gz),e.Y36(d.F0),e.Y36(r.qu))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["post-list"]],viewQuery:function(n,o){if(1&n&&(e.Gf(N,7),e.Gf(z,7),e.Gf(O,7)),2&n){let s;e.iGM(s=e.CRH())&&(o.dataTable=s.first),e.iGM(s=e.CRH())&&(o.paginator=s.first),e.iGM(s=e.CRH())&&(o.rejectionPostModal=s.first)}},features:[e.qOj],decls:53,vars:35,consts:[[3,"title","description"],["role","actions"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"form",3,"formGroup"],[1,"row","mb-5"],[1,"col-md-6"],["for","Code",1,"form-label"],["type","text","formControlName","code","placeholder","Code",1,"form-control"],["for","Status",1,"form-label"],["formControlName","status",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","creationDate",1,"form-label"],["type","date","formControlName","creationDate","placeholder","CreationDate",1,"form-control"],["for","PublishDate",1,"form-label"],["type","date","formControlName","publishDate","placeholder","PublishDate",1,"form-control"],[1,"row","justify-content-center","mt-5","mb-5"],["type","button",1,"btn","btn-success","fw-bold","col-md-2",3,"click"],["type","button",1,"btn","btn-warning","fw-bold","col-md-2",3,"click"],[1,"fa","fa-sync","btn-md-icon"],[1,"d-none","d-md-inline-block"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["rejectionPostModal",""],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus","btn-md-icon"],[3,"value"],[2,"min-width","150px"],[2,"min-width","100px"],[2,"min-width","130px",3,"hidden"],[1,"p-column-title"],[1,"w-100"],[1,"hide-overflown",3,"tooltip"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(n,o){1&n&&(e.TgZ(0,"div")(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"div",1),e.YNc(5,k,5,3,"button",2),e.ALo(6,"permission"),e.qZA()(),e.TgZ(7,"div")(8,"div",3)(9,"div",4)(10,"form",5)(11,"div")(12,"div",6)(13,"div",7)(14,"label",8),e._uU(15,"Code"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",7)(18,"label",10),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"select",11),e.YNc(21,H,2,2,"option",12),e.qZA()()(),e.TgZ(22,"div",6)(23,"div",7)(24,"label",13),e._uU(25,"Creation tDate"),e.qZA(),e._UZ(26,"input",14),e.qZA(),e.TgZ(27,"div",7)(28,"label",15),e._uU(29,"Publish Date"),e.qZA(),e._UZ(30,"input",16),e.qZA()(),e.TgZ(31,"div",17)(32,"button",18),e.NdJ("click",function(){return o.getPosts()}),e._uU(33,"Search"),e.qZA(),e.TgZ(34,"button",19),e.NdJ("click",function(){return o.reset()}),e._UZ(35,"i",20),e._uU(36," \xa0 "),e.TgZ(37,"span",21),e._uU(38),e.ALo(39,"localize"),e.qZA()()()()(),e.TgZ(40,"div",22)(41,"div",23)(42,"p-table",24,25),e.NdJ("onLazyLoad",function(c){return o.getPosts(c)}),e.YNc(44,Q,20,22,"ng-template",26),e.YNc(45,K,41,30,"ng-template",27),e.qZA(),e.YNc(46,B,3,3,"div",28),e.TgZ(47,"div",29)(48,"p-paginator",30,31),e.NdJ("onPageChange",function(c){return o.getPosts(c)}),e.ALo(50,"localize"),e.qZA()()()()()()()(),e.TgZ(51,"rejectionPostModal",32,33),e.NdJ("modalSave",function(){return o.reloadPage()}),e.qZA()),2&n&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,23,"Posts"))("description",e.lcZ(3,25,"PostsHeaderInfo")),e.xp6(4),e.Q6J("ngIf",e.lcZ(6,27,"Pages.Administration.Posts.Create")),e.xp6(2),e.Tol(o.containerClass),e.xp6(3),e.Q6J("formGroup",o.searchForm),e.xp6(11),e.Q6J("ngForOf",o.statuses),e.xp6(17),e.hij(" ",e.lcZ(39,29,"Reset")," "),e.xp6(3),e.Q6J("busyIf",o.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",o.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",o.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(34,W))("resizableColumns",o.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==o.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",o.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",o.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",o.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(50,31,"TotalRecordsCount",o.primengTableHelper.totalRecordsCount)))},dependencies:[u.sg,u.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,g.Hz,g.Mq,g.TO,T.U,C.iA,A.jx,x.D,r.sg,r.u,w.i9,b.$,j,h.F,q.a,R.G],styles:[".dropdown-excel-operations[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{display:block;text-align:left;border-radius:0;transition:none!important;background-color:#fff;color:#181c32!important;font-size:13px!important;font-weight:400!important;margin:0;margin-right:0!important}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose.p-button.p-state-hover[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-focus[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-active[_ngcontent-%COMP%]{background-color:#eee}.dropdown-excel-operations[_ngcontent-%COMP%]{a:hover {span.p-button,div.p-fileupload-buttonbar.p-widget-header.p-corner-top {background-color: #f4f5f8 !important;}} a.no-padding {padding: 0px !important;} a {.p-button-text {margin-left: 5px !important;}} .p-button-label {font-weight: inherit !important;}}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled){border:none}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):hover, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):focus, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):active{background-color:#f4f5f8!important;color:#b2b1c5;box-shadow:none!important;border:none}.dropdown-excel-operations[_ngcontent-%COMP%]{div.p-fileupload-buttonbar {&.p-widget-header.p-corner-top {border: none; background: #fff; padding-bottom: 3px !important; padding-top: 3px !important; &:hover {background-color: #f4f5f8 !important;}}} div.p-fileupload-content {display: none;} div.p-fileupload-content.p-widget-content.p-corner-bottom {display: none;} div.p-fileupload-buttonbar {border: none; padding: 0;} div.p-fileupload-buttonbar.p-widget-header.p-corner-top:hover {background-color: #f4f5f8 !important;}}.p-datatable[_ngcontent-%COMP%]   img.img-circle[_ngcontent-%COMP%]{height:24px;margin-right:5px}#ExportUsersToExcelButton[_ngcontent-%COMP%]{padding-left:12px!important}.hide-overflown[_ngcontent-%COMP%]{display:inline-block;width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}"]})}return i})();var X=l(73789);function ee(i,a){1&i&&(e.TgZ(0,"div",5)(1,"label",35),e._uU(2,"Code"),e.qZA(),e._UZ(3,"input",36),e.qZA())}function te(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"input",37),e.NdJ("change",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileSelectForPost(o))}),e.qZA()}}function oe(i,a){if(1&i&&e._UZ(0,"img",38),2&i){const t=e.oxw();e.Q6J("src",t.uploadedPostImageUrl,e.LSH)}}function ie(i,a){if(1&i&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function ne(i,a){if(1&i&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function se(i,a){if(1&i&&(e.TgZ(0,"div",40)(1,"label"),e._UZ(2,"input",41),e._uU(3),e.qZA(),e._uU(4," \xa0\xa0 "),e.qZA()),2&i){const t=a.$implicit;e.xp6(2),e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function re(i,a){if(1&i&&(e.TgZ(0,"div",42),e._UZ(1,"input",43),e._uU(2),e.qZA()),2&i){const t=a.$implicit,n=a.index;e.xp6(1),e.Q6J("formControlName",n),e.xp6(1),e.hij(" ",t.name," ")}}function ae(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(1,"Save"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.postForm.valid)}}function le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e._uU(1,"Submit The Post"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.postForm)}}let v=(()=>{class i extends m.c{get interestsControls(){return this.postForm?.get("interests")}constructor(t,n,o,s,c,P,qe){super(t),this.fb=n,this._postsService=o,this._interestsService=s,this.fileUploadService=c,this.route=P,this.router=qe,this.isCreateMode=!0,this.isViewMode=!1,this.isInappropriatePost=!1,this.postData=new p.B1p,this.PostStatusEnum=p.LYR,this.accpeptedAge=[],this.interests=[],this.files=[],this.uploadedPostImageUrl=null,this.genders=[{label:"Male",value:0},{label:"Female",value:1}];for(let f=1;f<19;f++)this.accpeptedAge.push({label:`${f} year`,value:f})}ngOnInit(){this.intializePostForm();const t=this.route.snapshot.queryParams.mode;"view"==t&&(this.isViewMode=!0),"inappropriate"==t&&(this.isInappropriatePost=!0);const o=this.route.snapshot.paramMap.get("id");this.postId=o,o?this.GetPostForEdit(o):this.bindInterests()}intializePostForm(){this.postForm=this.fb.group({name:["",r.kI.required],code:[""],description:["",r.kI.required],postImage:["",r.kI.required],minAge:["2",r.kI.required],maxAge:["15",r.kI.required],gender:[""],interests:this.fb.array([])})}bindInterests(t=[]){this._interestsService.getInterestsList("").subscribe(n=>{this.interests=n,this.updateInterestsFormArray(t)})}updateInterestsFormArray(t){const n=this.postForm.get("interests");n.clear(),this.interests.forEach(o=>{const s=t.includes(o.value.toString()),c=this.fb.control(s);this.isViewMode&&c.disable(),n.push(c)})}onFileSelectForPost(t){this.spinnerService.show();const n=t.currentTarget,o=n.files?n.files[0]:null;o&&this.fileUploadService.uploadFile(o,"posts").subscribe(s=>{this.postForm.get("postImage").setValue(s.result);const c=new FileReader;c.onload=P=>{this.uploadedPostImageUrl=P.target.result},c.readAsDataURL(o),this.spinnerService.hide()})}GetPostForEdit(t){this.isCreateMode=!1,this.spinnerService.show(),this._postsService.getForEdit(Number(t)).subscribe(n=>{this.postData=n,this.postForm.get("code").setValue(this.postData.code),this.postForm.get("code").disable(),this.postForm.get("name").setValue(this.postData.title),this.postForm.get("description").setValue(this.postData.description),this.postForm.get("minAge").setValue(this.postData.minAge),this.postForm.get("maxAge").setValue(this.postData.maxAge),this.postForm.get("gender").setValue(this.postData.gender),this.postForm.get("postImage").setValue(this.postData.img),this.isViewMode&&(this.postForm.get("name").disable(),this.postForm.get("description").disable(),this.postForm.get("minAge").disable(),this.postForm.get("maxAge").disable(),this.postForm.get("gender").disable(),this.postForm.get("postImage").disable()),this.uploadedPostImageUrl=this.postData.img;const o=this.postData.interests.map(s=>s.toString());this.bindInterests(o),this.spinnerService.hide()})}onSubmit(){this.spinnerService.show();let t=new p.mzP;t.title=this.postForm.get("name").value,t.description=this.postForm.get("description").value,t.img=this.postForm.get("postImage").value,t.maxAge=Number(this.postForm.get("maxAge").value),t.minAge=Number(this.postForm.get("minAge").value),t.gender=this.postForm.get("gender").value??null,t.interests=[];for(let n=0;n<this.interestsControls.length;n++)this.interestsControls.at(n).value&&t.interests.push(Number(this.interests.at(n).value));this.postId?(t.id=Number(this.postId),this._postsService.update(t).subscribe(n=>{this.spinnerService.hide(),this.router.navigate(["/app/admin/posts"])},n=>this.spinnerService.hide())):this._postsService.create(t).subscribe(n=>{this.spinnerService.hide(),this.router.navigate(["/app/admin/posts"])},n=>this.spinnerService.hide())}back(){this.router.navigate(this.isInappropriatePost?["/app/admin/posts"]:["/app/admin/posts/reported-list"])}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(e.zs3),e.Y36(r.qu),e.Y36(p.KM$),e.Y36(p.n31),e.Y36(X.J),e.Y36(d.gz),e.Y36(d.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-manage-post"]],features:[e.qOj],decls:50,vars:18,consts:[[1,"pt-10"],[3,"title","description"],[1,"container","mt-3",3,"formGroup"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"mb-5"],["for","Name",1,"form-label","required"],["type","text","formControlName","name","placeholder","Name",1,"form-control"],["class","mb-5",4,"ngIf"],[1,"row","mb-5"],[1,"col-md-12"],["for","Description",1,"form-label","required"],["formControlName","description","placeholder","Description","rows","8",1,"form-control"],["for","postImage",1,"form-label","required"],["type","file","class","form-control",3,"change",4,"ngIf"],["type","hidden","formControlName","postImage",1,"form-control"],["class","img-preview",3,"src",4,"ngIf"],[1,"col-md-6"],["for","minAge",1,"form-label","required"],["formControlName","minAge",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","maxAge",1,"form-label","required"],["formControlName","maxAge",1,"form-select"],[1,"mb-5","row"],[1,"row","col-md-12"],["for","gender",1,"form-label"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row","mb-4"],["for","interests",1,"form-label","required"],["formArrayName","interests",1,"row"],["class","col-md-3 mb-2",4,"ngFor","ngForOf"],[1,"row","justify-content-center","mt-5","mb-5"],["class","btn btn-info fw-bold col-md-3","type","button",3,"disabled","click",4,"ngIf"],["class","btn btn-success fw-bold col-md-3",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-warning","fw-bold","col-md-3",3,"click"],["for","Code",1,"form-label","required"],["type","text","formControlName","code","placeholder","Code",1,"form-control"],["type","file",1,"form-control",3,"change"],[1,"img-preview",3,"src"],[3,"value"],[1,"col-md-4"],["type","radio","name","gender","formControlName","gender",1,"form-check-input",3,"value"],[1,"col-md-3","mb-2"],["type","checkbox",1,"form-check-input",3,"formControlName"],["type","button",1,"btn","btn-info","fw-bold","col-md-3",3,"disabled","click"],[1,"btn","btn-success","fw-bold","col-md-3",3,"disabled","click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"sub-header",1),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"form",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),e._uU(9,"Name"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.YNc(11,ee,4,0,"div",8),e.TgZ(12,"div",9)(13,"div",10)(14,"label",11),e._uU(15,"Description"),e.qZA(),e._UZ(16,"textarea",12),e.qZA()(),e.TgZ(17,"div",5)(18,"label",13),e._uU(19,"Post Image"),e.qZA(),e._UZ(20,"br"),e.YNc(21,te,1,0,"input",14),e._UZ(22,"input",15),e.YNc(23,oe,1,1,"img",16),e.qZA(),e.TgZ(24,"div",9)(25,"div",17)(26,"label",18),e._uU(27,"Minimum Age"),e.qZA(),e.TgZ(28,"select",19),e.YNc(29,ie,2,2,"option",20),e.qZA()(),e.TgZ(30,"div",17)(31,"label",21),e._uU(32,"Maximum Age"),e.qZA(),e.TgZ(33,"select",22),e.YNc(34,ne,2,2,"option",20),e.qZA()()(),e.TgZ(35,"div",23)(36,"div",24)(37,"label",25),e._uU(38,"Gender"),e.qZA(),e.YNc(39,se,5,2,"div",26),e.qZA()(),e.TgZ(40,"div",27)(41,"label",28),e._uU(42,"Interests"),e.qZA(),e.TgZ(43,"div",29),e.YNc(44,re,3,2,"div",30),e.qZA()()()(),e.TgZ(45,"div",31),e.YNc(46,ae,2,1,"button",32),e.YNc(47,le,2,1,"button",33),e.TgZ(48,"button",34),e.NdJ("click",function(){return o.back()}),e._uU(49,"Back"),e.qZA()()()()),2&n&&(e.Tol(o.containerClass),e.xp6(1),e.Q6J("title",e.lcZ(2,14,"Posts"))("description",e.lcZ(3,16,"PostsManagementHeaderInfo")),e.xp6(3),e.Q6J("formGroup",o.postForm),e.xp6(7),e.Q6J("ngIf",!o.isCreateMode),e.xp6(10),e.Q6J("ngIf",!o.isViewMode),e.xp6(2),e.Q6J("ngIf",o.uploadedPostImageUrl),e.xp6(6),e.Q6J("ngForOf",o.accpeptedAge),e.xp6(5),e.Q6J("ngForOf",o.accpeptedAge),e.xp6(5),e.Q6J("ngForOf",o.genders),e.xp6(5),e.Q6J("ngForOf",o.interests),e.xp6(2),e.Q6J("ngIf",!o.isViewMode),e.xp6(1),e.Q6J("ngIf",!o.isViewMode))},dependencies:[u.sg,u.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r._,r.JJ,r.JL,r.sg,r.u,r.CE,b.$,h.F]})}return i})();const pe=["reportPostModal"];function ce(i,a){if(1&i&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.name," ")}}const de=function(i){return{backdrop:"static",keyboard:i}};let ue=(()=>{class i extends m.c{constructor(t,n,o){super(t),this.fb=n,this._postsServiceProxy=o,this.postCode="",this.saving=!1,this.modalSave=new e.vpe}getReportPostCauses(){this._postsServiceProxy.getReportPostCauses().subscribe(t=>{this.causes=t})}ngOnInit(){this.getReportPostCauses(),this.reportPostForm=this.fb.group({postId:new r.NI("",r.kI.required),reportId:new r.NI("",r.kI.required),reason:new r.NI("",r.kI.required),causes:new r.NI("",r.kI.required)})}close(){this.modal.hide()}show(t,n,o){this.reportPostForm.reset(),this.reportPostForm.get("postId").setValue(t),this.reportPostForm.get("reportId").setValue(n),this.postCode=o,this.modal.show()}save(){let t=new p.ZNE;t.postId=this.reportPostForm.get("postId").value,t.reportId=this.reportPostForm.get("reportId").value,t.reportDesc=this.reportPostForm.get("reason").value,t.reportPostCauseId=this.reportPostForm.get("causes").value,this._postsServiceProxy.report(t).subscribe(n=>{this.modal.hide(),this.spinnerService.hide(),this.notify.success(this.l("SuccessfullyRejected")),this.modalSave.emit(!0)},()=>this.spinnerService.hide())}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(e.zs3),e.Y36(r.qu),e.Y36(p.KM$))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["reportPostModal"]],viewQuery:function(n,o){if(1&n&&e.Gf(pe,7),2&n){let s;e.iGM(s=e.CRH())&&(o.modal=s.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:31,vars:21,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","reportPostModal","aria-hidden","true",1,"modal","fade","create-or-edit-user-modal",3,"config"],["reportPostModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"card-body"],[1,"row","mb-5"],["for","Reason",1,"form-label"],["formControlName","reason","placeholder","Report Reason","rows","3",1,"form-control"],["for","Status",1,"form-label"],["formControlName","causes",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","button",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"],[3,"value"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"h4",6)(7,"span"),e._uU(8),e.ALo(9,"localize"),e.qZA()(),e.TgZ(10,"button",7),e.NdJ("click",function(){return o.close()}),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),e._uU(15,"Reason"),e.qZA(),e._UZ(16,"textarea",12),e.qZA(),e.TgZ(17,"div",10)(18,"label",13),e._uU(19,"Cause"),e.qZA(),e.TgZ(20,"select",14),e.YNc(21,ce,2,2,"option",15),e.qZA()()()(),e.TgZ(22,"div",16)(23,"button",17),e.NdJ("click",function(){return o.close()}),e._uU(24),e.ALo(25,"localize"),e.qZA(),e.TgZ(26,"button",18),e.NdJ("click",function(){return o.save()}),e._UZ(27,"i",19),e.TgZ(28,"span"),e._uU(29),e.ALo(30,"localize"),e.qZA()()()()()()()),2&n&&(e.Q6J("config",e.VKq(19,de,!o.saving)),e.xp6(4),e.Q6J("formGroup",o.reportPostForm),e.xp6(4),e.AsE("",e.lcZ(9,13,"ReportPost")," ",o.postCode,""),e.xp6(2),e.Q6J("disabled",o.saving),e.uIk("aria-label",o.l("Close")),e.xp6(11),e.Q6J("ngForOf",o.causes),e.xp6(2),e.Q6J("disabled",o.saving),e.xp6(1),e.hij(" ",e.lcZ(25,15,"Cancel")," "),e.xp6(2),e.Q6J("disabled",!o.reportPostForm.valid)("buttonBusy",o.saving)("busyText",o.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(30,17,"Save")))},dependencies:[u.sg,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,M.L,y.Z,r.sg,r.u,h.F]})}return i})();const me=["dataTable"],ge=["paginator"],he=["reportPostModal"],F=function(){return["Pages.Administration.Posts.Report"]};function _e(i,a){1&i&&(e.TgZ(0,"tr")(1,"th",16),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",16),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th",16),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"th",17),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"th",18),e.ALo(14,"permissionAny"),e._uU(15),e.ALo(16,"localize"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"Code")," "),e.xp6(3),e.hij(" ",e.lcZ(6,8,"Title")," "),e.xp6(3),e.hij(" ",e.lcZ(9,10,"PublishedDate")," "),e.xp6(3),e.hij(" ",e.lcZ(12,12,"Reviewer")," "),e.xp6(2),e.Q6J("hidden",!e.lcZ(14,14,e.DdM(18,F))),e.xp6(2),e.hij(" ",e.lcZ(16,16,"Actions")," "))}function fe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",29)(1,"a",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.viewPost(o.postId))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"View")," "))}function be(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",29)(1,"a",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.reportPost(o))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ApproveRequest")," "))}function ve(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",29)(1,"a",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.rejectRequest(o))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"RejectRequest")," "))}function Pe(i,a){1&i&&(e.TgZ(0,"ul",27),e.YNc(1,fe,4,3,"li",28),e.ALo(2,"permission"),e.YNc(3,be,4,3,"li",28),e.ALo(4,"permission"),e.YNc(5,ve,4,3,"li",28),e.ALo(6,"permission"),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,"Pages.Administration.Posts.View")),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,5,"Pages.Administration.Posts.Report")),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,7,"Pages.Administration.Posts.Report")))}function Ze(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",16)(2,"span",19),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"div",20)(6,"span",21),e._uU(7),e.qZA()()(),e.TgZ(8,"td",16)(9,"span",19),e._uU(10),e.ALo(11,"localize"),e.qZA(),e.TgZ(12,"div",20)(13,"span",21),e._uU(14),e.qZA()()(),e.TgZ(15,"td",16)(16,"span",19),e._uU(17),e.ALo(18,"localize"),e.qZA(),e.TgZ(19,"div",20)(20,"span",21),e._uU(21),e.qZA()()(),e.TgZ(22,"td",16)(23,"span",19),e._uU(24),e.ALo(25,"localize"),e.qZA(),e.TgZ(26,"div",20)(27,"span",21),e._uU(28),e.qZA()()(),e.TgZ(29,"td",18),e.ALo(30,"permissionAny"),e.TgZ(31,"div",22)(32,"button",23),e._UZ(33,"i",24)(34,"span",25),e._uU(35),e.ALo(36,"localize"),e.qZA(),e.YNc(37,Pe,7,9,"ul",26),e.qZA()()()),2&i){const t=a.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,14,"Code")),e.xp6(3),e.s9C("tooltip",t.code),e.xp6(1),e.hij(" ",t.code," "),e.xp6(3),e.Oqu(e.lcZ(11,16,"Author")),e.xp6(3),e.s9C("tooltip",t.authorName),e.xp6(1),e.hij(" ",t.authorName," "),e.xp6(3),e.Oqu(e.lcZ(18,18,"PublishedDate")),e.xp6(3),e.s9C("tooltip",t.publishedDate),e.xp6(1),e.hij(" ",t.publishedDate," "),e.xp6(3),e.Oqu(e.lcZ(25,20,"Reviewer")),e.xp6(3),e.s9C("tooltip",t.reviewerName),e.xp6(1),e.hij(" ",t.reviewerName," "),e.xp6(1),e.Q6J("hidden",!e.lcZ(30,22,e.DdM(26,F))),e.xp6(6),e.hij(" ",e.lcZ(36,24,"Actions")," ")}}function Te(i,a){1&i&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const Ce=function(){return{"min-width":"50rem"}},Ae=[{path:"",component:S,pathMatch:"full"},{path:"list",component:S,pathMatch:"full"},{path:"reported-list",component:(()=>{class i extends m.c{constructor(t,n,o){super(t),this._postsServiceProxy=n,this._router=o}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getPosts(t){this.primengTableHelper.shouldResetPaging(t)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._postsServiceProxy.getReportedPosts(new p.HGp({sorting:this.primengTableHelper.getSorting(this.dataTable),maxResultCount:this.primengTableHelper.getMaxResultCount(this.paginator,t),skipCount:this.primengTableHelper.getSkipCount(this.paginator,t)})).pipe((0,Z.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(n=>{this.primengTableHelper.totalRecordsCount=n.totalCount,this.primengTableHelper.records=n.items,this.primengTableHelper.hideLoadingIndicator()}))}reloadPage(){this.paginator.changePage(this.paginator.getPage())}viewPost(t){this._router.navigate(["/app/admin/posts/view",t],{queryParams:{mode:"view",type:"inappropriate"}})}reportPost(t){this.message.confirm(this.l("PostReportWarningMessage",t.code),this.l("AreYouSure"),n=>{n&&this.reportPostModal.show(t.postId,t.reportId,t.code)})}rejectRequest(t){this.message.confirm(this.l("RejectRequestWarningMessage",t.code),this.l("AreYouSure"),n=>{if(n){this.spinnerService.show();let o=new p.P8i;o.postId=t.postId,o.reportId=t.reportId,this._postsServiceProxy.rejectReport(o).subscribe(s=>{this.spinnerService.hide(),this.notify.success(this.l("SuccessfullyRejected")),this.reloadPage()},()=>this.spinnerService.hide())}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(e.zs3),e.Y36(p.KM$),e.Y36(d.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-reported-posts"]],viewQuery:function(n,o){if(1&n&&(e.Gf(me,7),e.Gf(ge,7),e.Gf(he,7)),2&n){let s;e.iGM(s=e.CRH())&&(o.dataTable=s.first),e.iGM(s=e.CRH())&&(o.paginator=s.first),e.iGM(s=e.CRH())&&(o.reportPostModal=s.first)}},features:[e.qOj],decls:21,vars:27,consts:[[3,"title","description"],["role","actions"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["reportPostModal",""],[2,"min-width","150px"],[2,"min-width","100px"],[2,"min-width","130px",3,"hidden"],[1,"p-column-title"],[1,"w-100"],[1,"hide-overflown",3,"tooltip"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(n,o){1&n&&(e.TgZ(0,"div")(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e._UZ(4,"div",1),e.qZA(),e.TgZ(5,"div")(6,"div",2)(7,"div",3)(8,"div",4)(9,"div",5)(10,"p-table",6,7),e.NdJ("onLazyLoad",function(c){return o.getPosts(c)}),e.YNc(12,_e,17,19,"ng-template",8),e.YNc(13,Ze,38,27,"ng-template",9),e.qZA(),e.YNc(14,Te,3,3,"div",10),e.TgZ(15,"div",11)(16,"p-paginator",12,13),e.NdJ("onPageChange",function(c){return o.getPosts(c)}),e.ALo(18,"localize"),e.qZA()()()()()()()(),e.TgZ(19,"reportPostModal",14,15),e.NdJ("modalSave",function(){return o.reloadPage()}),e.qZA()),2&n&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,19,"ReportedPosts"))("description",e.lcZ(3,21,"ReportedPostsHeaderInfo")),e.xp6(4),e.Tol(o.containerClass),e.xp6(4),e.Q6J("busyIf",o.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",o.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",o.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(26,Ce))("resizableColumns",o.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==o.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",o.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",o.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",o.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(18,23,"TotalRecordsCount",o.primengTableHelper.totalRecordsCount)))},dependencies:[u.O5,g.Hz,g.Mq,g.TO,T.U,C.iA,A.jx,x.D,w.i9,b.$,ue,h.F,q.a,R.G],styles:[".dropdown-excel-operations[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{display:block;text-align:left;border-radius:0;transition:none!important;background-color:#fff;color:#181c32!important;font-size:13px!important;font-weight:400!important;margin:0;margin-right:0!important}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose.p-button.p-state-hover[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-focus[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-active[_ngcontent-%COMP%]{background-color:#eee}.dropdown-excel-operations[_ngcontent-%COMP%]{a:hover {span.p-button,div.p-fileupload-buttonbar.p-widget-header.p-corner-top {background-color: #f4f5f8 !important;}} a.no-padding {padding: 0px !important;} a {.p-button-text {margin-left: 5px !important;}} .p-button-label {font-weight: inherit !important;}}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled){border:none}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):hover, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):focus, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):active{background-color:#f4f5f8!important;color:#b2b1c5;box-shadow:none!important;border:none}.dropdown-excel-operations[_ngcontent-%COMP%]{div.p-fileupload-buttonbar {&.p-widget-header.p-corner-top {border: none; background: #fff; padding-bottom: 3px !important; padding-top: 3px !important; &:hover {background-color: #f4f5f8 !important;}}} div.p-fileupload-content {display: none;} div.p-fileupload-content.p-widget-content.p-corner-bottom {display: none;} div.p-fileupload-buttonbar {border: none; padding: 0;} div.p-fileupload-buttonbar.p-widget-header.p-corner-top:hover {background-color: #f4f5f8 !important;}}.p-datatable[_ngcontent-%COMP%]   img.img-circle[_ngcontent-%COMP%]{height:24px;margin-right:5px}#ExportUsersToExcelButton[_ngcontent-%COMP%]{padding-left:12px!important}.hide-overflown[_ngcontent-%COMP%]{display:inline-block;width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}"]})}return i})(),pathMatch:"full"},{path:"edit/:id",component:v,pathMatch:"full"},{path:"view/:id",component:v,pathMatch:"full"},{path:"create",component:v,pathMatch:"full"}];let xe=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(Ae),d.Bz]})}return i})();var we=l(92337),Me=l(71902);let ye=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[u.ez,we.o,Me.g,xe]})}return i})()},83410:(U,_,l)=>{l.d(_,{a:()=>m});var u=l(50387),d=l(99468);let m=(()=>{class p{constructor(e){this.permission=e.get(u.qT)}transform(e){return this.permission.isGranted(e)}static#e=this.\u0275fac=function(r){return new(r||p)(d.Y36(d.zs3,16))};static#t=this.\u0275pipe=d.Yjl({name:"permission",type:p,pure:!0})}return p})()}}]);