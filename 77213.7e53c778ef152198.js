"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[77213],{77213:(E,y,o)=>{o.r(y),o.d(y,{DynamicEntityPropertyValueModule:()=>v});var e=o(71902),g=o(92337),m=o(70916),t=o(40457),p=o(99468);const C=[{path:"",component:t.J,pathMatch:"full"}];let I=(()=>{class d{static#e=this.\u0275fac=function(f){return new(f||d)};static#t=this.\u0275mod=p.oAB({type:d});static#n=this.\u0275inj=p.cJS({imports:[m.Bz.forChild(C),m.Bz]})}return d})(),v=(()=>{class d{static#e=this.\u0275fac=function(f){return new(f||d)};static#t=this.\u0275mod=p.oAB({type:d});static#n=this.\u0275inj=p.cJS({imports:[g.o,e.g,I]})}return d})()},40457:(E,y,o)=>{o.d(y,{J:()=>c});var e=o(99468),g=o(41840),m=o(44328),t=o(49556),p=o(63686),C=o(96814),I=o(94901),v=o(68027),d=o(85219),V=o(3291),M=o(83410);function f(l,r){1&l&&(e.TgZ(0,"tr")(1,"th"),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th",7),e._uU(8),e.ALo(9,"localize"),e.qZA()()),2&l&&(e.xp6(2),e.Oqu(e.lcZ(3,3,"PropertyName")),e.xp6(3),e.Oqu(e.lcZ(6,5,"Values")),e.xp6(3),e.Oqu(e.lcZ(9,7,"Actions")))}function T(l,r){1&l&&e.GkF(0)}function D(l,r){if(1&l){const a=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(a);const _=e.oxw().$implicit,O=e.oxw(2);return e.KtG(O.deleteAllValuesOfDynamicEntityPropertyId(_))}),e._uU(1),e.ALo(2,"localize"),e.qZA()}2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Delete")," "))}function i(l,r){if(1&l&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,T,1,0,"ng-container",8),e.qZA(),e.TgZ(5,"td"),e.YNc(6,D,3,3,"button",9),e.ALo(7,"permission"),e.qZA()()),2&l){const a=r.$implicit;e.xp6(2),e.hij(" ",a.data.propertyName," "),e.xp6(2),e.Q6J("ngComponentOutlet",a.definition.component)("ngComponentOutletInjector",a.injector),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,4,"Pages.Administration.DynamicEntityPropertyValue.Delete"))}}function h(l,r){1&l&&(e.TgZ(0,"div",11),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}function s(l,r){if(1&l&&(e.TgZ(0,"div",1)(1,"p-table",2,3),e.YNc(3,f,10,9,"ng-template",4),e.YNc(4,i,8,6,"ng-template",5),e.qZA(),e.YNc(5,h,3,3,"div",6),e.qZA()),2&l){const a=e.oxw();e.Q6J("busyIf",a.primengTableHelper.isLoading),e.xp6(1),e.Q6J("value",a.items)("paginator",!1),e.xp6(4),e.Q6J("ngIf",0==a.items.length)}}class n{constructor(r,a){this.data=r,this.definition=a}}let c=(()=>{class l extends g.c{constructor(a,u,_){super(a),this._injector=a,this._dynamicEntityPropertyValueService=u,this._inputTypeConfigurationService=_,this.onSaveDone=new e.vpe,this.initialized=!1}ngOnInit(){this.initialize()}initialize(){this.initialized=!1,this._dynamicEntityPropertyValueService.getAllDynamicEntityPropertyValues(this.entityFullName,this.entityId).subscribe(a=>{a.items&&(this.items=a.items.map(u=>{let _=this._inputTypeConfigurationService.getByInputType(u.inputType),O=new n(u,_),x=e.zs3.create({providers:[{provide:t.cT,useValue:u.selectedValues},{provide:t.TH,useValue:u.allValuesInputTypeHas},{provide:t.Ql,useValue:A=>{O.componentInstance=A}}],parent:this._injector});return O.injector=x,O})),this.initialized=!0,this.hideMainSpinner()},a=>{this.hideMainSpinner()})}deleteAllValuesOfDynamicEntityPropertyId(a){this.message.confirm(this.l("DeleteDynamicEntityPropertyValueMessage",a.data.propertyName),this.l("AreYouSure"),u=>{u&&this._dynamicEntityPropertyValueService.cleanValues(new m.RM({dynamicEntityPropertyId:a.data.dynamicEntityPropertyId,entityId:this.entityId})).subscribe(()=>{abp.notify.success(this.l("SuccessfullyDeleted")),this.initialize()})})}saveAll(){if(!this.items||0===this.items.length)return;let a=[];for(let u=0;u<this.items.length;u++){const _=this.items[u];a.push(new m.COX({dynamicEntityPropertyId:_.data.dynamicEntityPropertyId,entityId:this.entityId,values:_.componentInstance.getSelectedValues()}))}this._dynamicEntityPropertyValueService.insertOrUpdateAllValues(new m.O3u({items:a})).subscribe(()=>{abp.notify.success(this.l("SavedSuccessfully")),this.initialize(),this.hideMainSpinner(),this.onSaveDone&&this.onSaveDone.emit()},u=>{this.hideMainSpinner()})}static#e=this.\u0275fac=function(u){return new(u||l)(e.Y36(e.zs3),e.Y36(m.mQH),e.Y36(p.R))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["dynamic-entity-property-value-manager"]],inputs:{entityFullName:"entityFullName",entityId:"entityId"},outputs:{onSaveDone:"onSaveDone"},features:[e.qOj],decls:1,vars:1,consts:[["class","col primeng-datatable-container",3,"busyIf",4,"ngIf"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","paginator"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[2,"width","100px"],[4,"ngComponentOutlet","ngComponentOutletInjector"],["class","btn btn-danger bt-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","bt-sm",3,"click"],[1,"primeng-no-data"]],template:function(u,_){1&u&&e.YNc(0,s,6,4,"div",0),2&u&&e.Q6J("ngIf",_.initialized)},dependencies:[C.$G,C.O5,I.U,v.iA,d.jx,V.F,M.a],encapsulation:2})}return l})()},49556:(E,y,o)=>{o.d(y,{Ql:()=>t,TH:()=>m,cT:()=>g});var e=o(99468);const g=new e.OlP("selectedValues"),m=new e.OlP("allValues"),t=new e.OlP("componentInstance")},63686:(E,y,o)=>{o.d(y,{R:()=>D});var e=o(41840),g=o(49556);class m extends e.c{constructor(h){super(h),this.selectedValues=h.get(g.cT),this.allValues=h.get(g.TH),h.get(g.Ql)(this)}}var t=o(99468),p=o(56223);let C=(()=>{class i extends m{constructor(s){super(s)}getSelectedValues(){return this.selectedValue?[this.selectedValue]:[]}ngOnInit(){this.selectedValue=this.selectedValues[0]}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.zs3))};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-single-line-string-input-type"]],features:[t.qOj],decls:1,vars:1,consts:[["type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(n,c){1&n&&(t.TgZ(0,"input",0),t.NdJ("ngModelChange",function(r){return c.selectedValue=r}),t.qZA()),2&n&&t.Q6J("ngModel",c.selectedValue)},dependencies:[p.Fj,p.JJ,p.On]})}return i})(),I=(()=>{class i extends m{constructor(s){super(s)}ngOnInit(){this.checked=this.selectedValues&&this.selectedValues[0]&&"true"===this.selectedValues[0]}getSelectedValues(){return[this.checked.toString()]}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.zs3))};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-checkbox-input-type"]],features:[t.qOj],decls:4,vars:1,consts:[[1,"checkbox-inline"],[1,"checkbox","checkbox-solid"],["type","checkbox","value","true",3,"ngModel","ngModelChange"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0)(1,"label",1)(2,"input",2),t.NdJ("ngModelChange",function(r){return c.checked=r}),t.qZA(),t._UZ(3,"span"),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngModel",c.checked))},dependencies:[p.Wl,p.JJ,p.On]})}return i})();var v=o(96814);function d(i,h){if(1&i&&(t.TgZ(0,"option",3),t._uU(1),t.qZA()),2&i){const s=h.$implicit;t.Q6J("value",s),t.xp6(1),t.Oqu(s)}}let V=(()=>{class i extends m{constructor(s){super(s)}ngOnInit(){this.selectedValue=this.selectedValues[0]}getSelectedValues(){return this.selectedValue?[this.selectedValue]:[]}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.zs3))};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-combobox-input-type"]],features:[t.qOj],decls:3,vars:2,consts:[[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,c){1&n&&(t.TgZ(0,"select",0),t.NdJ("ngModelChange",function(r){return c.selectedValue=r}),t._UZ(1,"option",1),t.YNc(2,d,2,2,"option",2),t.qZA()),2&n&&(t.Q6J("ngModel",c.selectedValue),t.xp6(2),t.Q6J("ngForOf",c.allValues))},dependencies:[v.sg,p.YN,p.Kr,p.EJ,p.JJ,p.On]})}return i})();var M=o(77327);let f=(()=>{class i extends m{constructor(s){super(s)}ngOnInit(){this.filteredValues=this.allValues}getSelectedValues(){return this.selectedValues?this.selectedValues:[]}filter(s){this.filteredValues=this.allValues.filter(n=>n.toLowerCase().includes(s.query.toLowerCase()))}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.zs3))};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-multiple-select-input-type"]],features:[t.qOj],decls:1,vars:4,consts:[["inputStyleClass","form-control","styleClass","width-percent-100",3,"ngModel","suggestions","minLength","multiple","ngModelChange","completeMethod"]],template:function(n,c){1&n&&(t.TgZ(0,"p-autoComplete",0),t.NdJ("ngModelChange",function(r){return c.selectedValues=r})("completeMethod",function(r){return c.filter(r)}),t.qZA()),2&n&&t.Q6J("ngModel",c.selectedValues)("suggestions",c.filteredValues)("minLength",1)("multiple",!0)},dependencies:[p.JJ,p.On,M.Qc],encapsulation:2})}return i})();class T{constructor(h,s,n){this.name=h,this.component=s,this.hasValues=n}}let D=(()=>{class i{constructor(){this.initialize()}getByName(s){let n=this.InputTypeConfigurationDefinitions.filter(c=>c.name===s);return n&&1===n.length?n[0]:null}getByInputType(s){return this.getByName(s.name)}initialize(){let s=new T("SINGLE_LINE_STRING",C,!1),n=new T("CHECKBOX",I,!1),c=new T("COMBOBOX",V,!0),l=new T("MULTISELECTCOMBOBOX",f,!0);this.InputTypeConfigurationDefinitions=[],this.InputTypeConfigurationDefinitions.push(s),this.InputTypeConfigurationDefinitions.push(n),this.InputTypeConfigurationDefinitions.push(c),this.InputTypeConfigurationDefinitions.push(l)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);