"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[2313],{2313:(v,u,o)=>{o.r(u),o.d(u,{DynamicEntityPropertiesModule:()=>f});var t=o(71902),d=o(92337),h=o(70916),l=o(26039),p=o(99468);const y=[{path:"",component:l.E,pathMatch:"full"}];let g=(()=>{class c{static#t=this.\u0275fac=function(_){return new(_||c)};static#e=this.\u0275mod=p.oAB({type:c});static#i=this.\u0275inj=p.cJS({imports:[h.Bz.forChild(y),h.Bz]})}return c})(),f=(()=>{class c{static#t=this.\u0275fac=function(_){return new(_||c)};static#e=this.\u0275mod=p.oAB({type:c});static#i=this.\u0275inj=p.cJS({imports:[d.o,t.g,g]})}return c})()},26039:(v,u,o)=>{o.d(u,{E:()=>F});var t=o(99468),d=o(41840),h=o(70916),l=o(44328),p=o(96814),y=o(94901),g=o(68027),f=o(85219),c=o(24142),P=o(9315),m=o(56223),_=o(45513),b=o(3291);const M=["createModal"];function E(n,s){if(1&n&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.propertyName," ")}}function C(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",6)(2,"h4",7)(3,"span"),t._uU(4),t.ALo(5,"localize"),t.qZA()(),t.TgZ(6,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.close())}),t.qZA()(),t.TgZ(7,"div",9)(8,"div",10)(9,"div",11)(10,"label",12),t._uU(11),t.ALo(12,"localize"),t.qZA(),t.TgZ(13,"select",13),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw(2);return t.KtG(r.dynamicEntityProperty.dynamicPropertyId=i)}),t.TgZ(14,"option",14),t._uU(15),t.ALo(16,"localize"),t.qZA(),t.YNc(17,E,2,2,"option",15),t.qZA()()()(),t.TgZ(18,"div",16)(19,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.close())}),t._uU(20),t.ALo(21,"localize"),t.qZA(),t.TgZ(22,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.save())}),t._UZ(23,"i",19),t.TgZ(24,"span"),t._uU(25),t.ALo(26,"localize"),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,13,"AddNewDynamicEntityProperty")),t.xp6(2),t.Q6J("disabled",e.saving),t.uIk("aria-label",e.l("Close")),t.xp6(5),t.Oqu(t.lcZ(12,15,"Parameter")),t.xp6(2),t.Q6J("ngModel",e.dynamicEntityProperty.dynamicPropertyId),t.xp6(2),t.Oqu(t.lcZ(16,17,"SelectADynamicProperty")),t.xp6(2),t.Q6J("ngForOf",e.allDynamicProperties),t.xp6(2),t.Q6J("disabled",e.saving),t.xp6(1),t.hij(" ",t.lcZ(21,19,"Cancel")," "),t.xp6(2),t.Q6J("disabled",!e.dynamicEntityProperty.entityFullName||!e.dynamicEntityProperty.dynamicPropertyId)("buttonBusy",e.saving)("busyText",e.l("SavingWithThreeDot")),t.xp6(3),t.Oqu(t.lcZ(26,21,"Save"))}}function Z(n,s){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,C,27,23,"div",5),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.initialized)}}const D=function(n){return{backdrop:"static",keyboard:n}};let T=(()=>{class n extends d.c{constructor(e,a,i,r){super(e),this._dynamicEntityPropertyService=a,this._dynamicPropertyService=i,this._dynamicEntityParameterDefinitionService=r,this.modalSave=new t.vpe,this.dynamicEntityProperty=new l.RcM,this.initialized=!1,this.saving=!1}show(e){this.entityFullName=e,this.initialize(),this.dynamicEntityProperty=new l.RcM,this.dynamicEntityProperty.entityFullName=this.entityFullName,this.modal.show()}save(){this.saving=!0,this.showMainSpinner(),this.dynamicEntityProperty.tenantId=abp.session.tenantId,this._dynamicEntityPropertyService.add(this.dynamicEntityProperty).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.hideMainSpinner(),this.modalSave.emit(null),this.modal.hide(),this.saving=!1},e=>{this.hideMainSpinner(),this.saving=!1})}close(){this.modal.hide()}initialize(){this.initialized=!1;let e=this._dynamicEntityPropertyService.getAllPropertiesOfAnEntity(this.entityFullName),a=this._dynamicPropertyService.getAll();this.showMainSpinner(),(0,P.D)([a,e]).subscribe(([i,r])=>{this.allDynamicProperties=i.items.filter(function(Q){return-1===r.items.map(U=>U.dynamicPropertyId).indexOf(Q.id)}),this.hideMainSpinner(),this.initialized=!0},i=>{this.hideMainSpinner()})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(t.zs3),t.Y36(l.kvd),t.Y36(l.ddT),t.Y36(l._5w))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["create-dynamic-entity-property-modal"]],viewQuery:function(a,i){if(1&a&&t.Gf(M,5),2&a){let r;t.iGM(r=t.CRH())&&(i.modal=r.first)}},outputs:{modalSave:"modalSave"},features:[t.qOj],decls:3,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config"],["createModal","bs-modal"],["class","modal-dialog modal-lg",4,"ngIf"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5","col-12"],[1,"mb-5"],["for","Name",1,"form-label","required"],["required","",1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","button",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"],[3,"value"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0,1),t.YNc(2,Z,3,1,"div",2),t.qZA()),2&a&&(t.Q6J("config",t.VKq(2,D,!i.saving)),t.xp6(2),t.Q6J("ngIf",i.initialized))},dependencies:[p.sg,p.O5,m.YN,m.Kr,m.EJ,m.JJ,m.Q7,m.On,_.L,c.Z,b.F],encapsulation:2})}return n})();var A=o(83410);const x=["createDynamicEntityPropertyModal"],N=["createModal"];function S(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addNewDynamicEntityProperty())}),t._UZ(1,"i",23),t._uU(2),t.ALo(3,"localize"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"AddNewDynamicEntityProperty")," "))}function z(n,s){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.ALo(3,"localize"),t.qZA(),t._UZ(4,"th",24),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"DynamicProperty")))}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.deleteDynamicEntityProperty(i.id))}),t._uU(1),t.ALo(2,"localize"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Delete")," "))}function w(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,J,3,3,"button",25),t.ALo(5,"permission"),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.hij(" ",e.dynamicPropertyName," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,2,"Pages.Administration.DynamicEntityProperties.Delete"))}}function L(n,s){1&n&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NoData")," "))}const I=function(){return{backdrop:"static"}},O=function(){return{"min-width":"100%"}};let F=(()=>{class n extends d.c{constructor(e,a,i){super(e),this._activatedRoute=a,this._dynamicEntityPropertyService=i,this.onPropertyChange=new t.vpe}show(e){this.entityFullName=e,this.getDynamicEntityProperties(),this.modal.show()}handlePropertyChanges(){this.onPropertyChange.emit(null),this.getDynamicEntityProperties()}getDynamicEntityProperties(){this.showMainSpinner(),this._dynamicEntityPropertyService.getAllPropertiesOfAnEntity(this.entityFullName).subscribe(e=>{this.primengTableHelper.totalRecordsCount=e.items.length,this.primengTableHelper.records=e.items,this.primengTableHelper.hideLoadingIndicator(),this.hideMainSpinner()},e=>{this.hideMainSpinner()})}addNewDynamicEntityProperty(){this.createDynamicEntityPropertyModal.show(this.entityFullName)}deleteDynamicEntityProperty(e){this.message.confirm(this.l("DeleteDynamicPropertyMessage"),this.l("AreYouSure"),a=>{a&&this._dynamicEntityPropertyService.delete(e).subscribe(()=>{abp.notify.success(this.l("SuccessfullyDeleted")),this.handlePropertyChanges()})})}close(){this.modal.hide()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(t.zs3),t.Y36(h.gz),t.Y36(l.kvd))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["manage-dynamic-entity-property-modal"]],viewQuery:function(a,i){if(1&a&&(t.Gf(x,5),t.Gf(N,5)),2&a){let r;t.iGM(r=t.CRH())&&(i.createDynamicEntityPropertyModal=r.first),t.iGM(r=t.CRH())&&(i.modal=r.first)}},outputs:{onPropertyChange:"onPropertyChange"},features:[t.qOj],decls:28,vars:20,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config"],["createModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-12",2,"height","40px"],["class","btn btn-primary float-end",3,"click",4,"ngIf"],[1,"clear-fix"],[1,"d-flex","w-100"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"click"],[3,"modalSave"],["createDynamicEntityPropertyModal",""],[1,"btn","btn-primary","float-end",3,"click"],[1,"fa","fa-plus"],[2,"width","100px"],["class","btn btn-danger bt-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","bt-sm",3,"click"],[1,"primeng-no-data"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5)(6,"span"),t._uU(7),t.ALo(8,"localize"),t.qZA()(),t.TgZ(9,"button",6),t.NdJ("click",function(){return i.close()}),t.qZA()(),t.TgZ(10,"div",7)(11,"div",8),t.YNc(12,S,4,3,"button",9),t.ALo(13,"permission"),t.qZA(),t._UZ(14,"div",10),t.TgZ(15,"div",11)(16,"div",12)(17,"p-table",13,14),t.NdJ("onLazyLoad",function(){return i.getDynamicEntityProperties()}),t.YNc(19,z,5,3,"ng-template",15),t.YNc(20,w,6,4,"ng-template",16),t.qZA(),t.YNc(21,L,3,3,"div",17),t.qZA()()(),t.TgZ(22,"div",18)(23,"button",19),t.NdJ("click",function(){return i.close()}),t._uU(24),t.ALo(25,"localize"),t.qZA()()()()(),t.TgZ(26,"create-dynamic-entity-property-modal",20,21),t.NdJ("modalSave",function(){return i.handlePropertyChanges()}),t.qZA()),2&a&&(t.Q6J("config",t.DdM(18,I)),t.xp6(7),t.Oqu(t.lcZ(8,12,"AddNewDynamicEntityProperty")),t.xp6(2),t.uIk("aria-label",i.l("Close")),t.xp6(3),t.Q6J("ngIf",t.lcZ(13,14,"Pages.Administration.DynamicEntityProperties.Create")),t.xp6(4),t.Q6J("busyIf",i.primengTableHelper.isLoading),t.xp6(1),t.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),t.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",t.DdM(19,O)),t.xp6(4),t.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),t.xp6(3),t.hij(" ",t.lcZ(25,16,"Close")," "))},dependencies:[p.O5,y.U,g.iA,f.jx,c.Z,T,b.F,A.a],encapsulation:2})}return n})()},83410:(v,u,o)=>{o.d(u,{a:()=>h});var t=o(50387),d=o(99468);let h=(()=>{class l{constructor(y){this.permission=y.get(t.qT)}transform(y){return this.permission.isGranted(y)}static#t=this.\u0275fac=function(g){return new(g||l)(d.Y36(d.zs3,16))};static#e=this.\u0275pipe=d.Yjl({name:"permission",type:l,pure:!0})}return l})()}}]);