"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[12235],{12235:(z,w,c)=>{c.r(w),c.d(w,{ChallangesModule:()=>bt});var m=c(96814),g=c(70916),l=c(56223),p=c(44328),v=c(41840),b=c(15047),e=c(99468),R=c(69862);let D=(()=>{class n{constructor(t){this.http=t,this.uploadUrl=`${b.g.remoteServiceBaseUrl}/api/services/app/Challanges/UploadFile`}uploadFile(t){const o=new FormData;return o.append("file",t,t.name),this.http.post(this.uploadUrl,o)}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(R.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q=c(58399),S=c(612),I=c(53279),O=c(81243),h=c(68027),A=c(85219),y=c(64716),_=c(72500),M=c(94901),P=c(51712),Q=c(2268),H=c(6593),Y=c(45513),j=c(24142),Z=c(3291);const E=["participantAnswersModal"];function G(n,s){if(1&n&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function V(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1," Rank is required. "),e.qZA())}function B(n,s){if(1&n&&(e.TgZ(0,"div",12)(1,"label",28),e._uU(2,"Winner Rank"),e.qZA(),e._UZ(3,"input",29),e.YNc(4,V,2,0,"div",30),e.qZA()),2&n){const t=e.oxw();let o;e.xp6(4),e.Q6J("ngIf",null==(o=t.participantAnswersForm.get("rank"))||null==o.errors?null:o.errors.required)}}function $(n,s){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.ekj("selected",t.selected),e.xp6(1),e.hij(" ",t.answer," ")}}function W(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,$,2,3,"li",32),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.options)}}function K(n,s){if(1&n&&(e.TgZ(0,"li",34),e._UZ(1,"img",35)(2,"br"),e.qZA()),2&n){const t=s.$implicit;e.ekj("selected",t.selected),e.xp6(1),e.Q6J("src",t.answer,e.LSH)}}function X(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"ul"),e.YNc(2,K,3,3,"li",33),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.options)}}function ee(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"iframe",36),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("src",o.sanitizeUrl(t.freeAnswer),e.uOi)}}function te(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"img",36),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.freeAnswer,e.LSH)}}function ne(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"textarea",37),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.freeAnswer=i)}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngModel",t.freeAnswer)}}function ie(n,s){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2),e.qZA(),e.YNc(3,W,3,1,"ng-container",30),e.YNc(4,X,3,1,"ng-container",30),e.YNc(5,ee,2,1,"ng-container",30),e.YNc(6,te,2,1,"ng-container",30),e.YNc(7,ne,2,1,"ng-container",30),e.qZA()),2&n){const t=s.$implicit,o=s.index,i=e.oxw(2);e.xp6(2),e.AsE("Question ",o+1,": ",t.questionText,""),e.xp6(1),e.Q6J("ngIf",t.questionType==i.questionTypeEnum.MCQText),e.xp6(1),e.Q6J("ngIf",t.questionType==i.questionTypeEnum.MCQPhotos),e.xp6(1),e.Q6J("ngIf",t.questionType==i.questionTypeEnum.UploadVideo),e.xp6(1),e.Q6J("ngIf",t.questionType==i.questionTypeEnum.UploadImage),e.xp6(1),e.Q6J("ngIf",t.questionType==i.questionTypeEnum.FreeText)}}function oe(n,s){if(1&n&&(e.TgZ(0,"div",11),e.YNc(1,ie,8,7,"div",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.submission.questions)}}const ae=function(n){return{backdrop:"static",keyboard:n}};let le=(()=>{class n extends v.c{constructor(t,o,i,a){super(t),this.fb=o,this.challangeService=i,this.sanitizer=a,this.saving=!1,this.questionTypeEnum=p.QoG,this.modalSave=new e.vpe,this.submissionStatuses=[{label:"Won",value:C.Won},{label:"Lost",value:C.Lost}]}ngOnInit(){this.participantAnswersForm=this.fb.group({submissionStatus:new l.NI("",l.kI.required),name:new l.NI("",l.kI.required),age:new l.NI("",l.kI.required),submissionId:new l.NI("",l.kI.required)})}close(){this.modal.hide()}show(t,o,i,a,r,d){this.challangeService.getParticipateAnswers(t).subscribe(f=>{this.submission=f,this.participantAnswersForm.get("submissionId").setValue(t),this.participantAnswersForm.get("name").setValue(i),this.participantAnswersForm.get("age").setValue(o),this.participantAnswersForm.get("submissionStatus").setValue(r),r==C.Won&&this.participantAnswersForm.addControl("rank",new l.NI(a,l.kI.required)),this.participantAnswersForm.get("name").disable(),this.participantAnswersForm.get("age").disable(),d==p.xEq.Announced&&(this.participantAnswersForm.get("submissionStatus").disable(),this.participantAnswersForm.get("rank")&&this.participantAnswersForm.get("rank").disable(),this.isChallangeAnnounced=!0),this.modal.show()})}onStatusChanged(t){Number(t.target.value)==C.Won?this.participantAnswersForm.addControl("rank",new l.NI(1,l.kI.required)):this.participantAnswersForm.removeControl("rank")}save(){let t=new p.$KR;t.submissionId=this.participantAnswersForm.get("submissionId").value,this.participantAnswersForm.get("submissionStatus").value==C.Won?(t.isWinner=!0,t.rank=this.participantAnswersForm.get("rank").value):t.isWinner=!1,this.challangeService.setChallangeSubmissionResult(t).subscribe(o=>{this.modalSave.emit(null),this.modal.hide()})}sanitizeUrl(t){const o=this.sanitizer.bypassSecurityTrustResourceUrl(t);return alert(o),o}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(l.qu),e.Y36(p.uIk),e.Y36(H.H7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-participant-answers"]],viewQuery:function(o,i){if(1&o&&e.Gf(E,7),2&o){let a;e.iGM(a=e.CRH())&&(i.modal=a.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:42,vars:22,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","participantAnswersModal","aria-hidden","true",1,"modal","fade","create-or-edit-user-modal",3,"config"],["participantAnswersModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"row","mb-5"],[1,"col-md-6"],["for","Name",1,"form-label"],["type","text","formControlName","name","placeholder","Name",1,"form-control"],["for","Age",1,"form-label"],["type","text","formControlName","age","placeholder","Age",1,"form-control"],["for","MinAge",1,"form-label","required"],["formControlName","submissionStatus",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6",4,"ngIf"],["class","row mb-5",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","button",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"],[3,"value"],["for","Rank",1,"form-label","required"],["type","number","formControlName","rank","placeholder","Rank",1,"form-control"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"selected",4,"ngFor","ngForOf"],["style","padding: 10px;border:1px solid #eee",3,"selected",4,"ngFor","ngForOf"],[2,"padding","10px","border","1px solid #eee"],["width","150",3,"src"],["width","420","height","315",3,"src"],["rows","5",1,"form-control",3,"ngModel","ngModelChange"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"h4",6)(7,"span"),e._uU(8),e.ALo(9,"localize"),e.qZA()(),e.TgZ(10,"button",7),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"label",13),e._uU(17,"Name"),e.qZA(),e._UZ(18,"input",14),e.qZA(),e.TgZ(19,"div",12)(20,"label",15),e._uU(21,"Age"),e.qZA(),e._UZ(22,"input",16),e.qZA()(),e.TgZ(23,"div",11)(24,"div",12)(25,"label",17),e._uU(26,"Submission Status"),e.qZA(),e.TgZ(27,"select",18),e.NdJ("change",function(r){return i.onStatusChanged(r)}),e.TgZ(28,"option",19),e._uU(29,"Select"),e.qZA(),e.YNc(30,G,2,2,"option",20),e.qZA()(),e.YNc(31,B,5,1,"div",21),e.qZA(),e.YNc(32,oe,2,1,"div",22),e.qZA()()(),e.TgZ(33,"div",23)(34,"button",24),e.NdJ("click",function(){return i.close()}),e._uU(35),e.ALo(36,"localize"),e.qZA(),e.TgZ(37,"button",25),e.NdJ("click",function(){return i.save()}),e._UZ(38,"i",26),e.TgZ(39,"span"),e._uU(40),e.ALo(41,"localize"),e.qZA()()()()()()()),2&o&&(e.Q6J("config",e.VKq(20,ae,!i.saving)),e.xp6(4),e.Q6J("formGroup",i.participantAnswersForm),e.xp6(4),e.Oqu(e.lcZ(9,14,"ParticipantAnswers")),e.xp6(2),e.Q6J("disabled",i.saving),e.uIk("aria-label",i.l("Close")),e.xp6(20),e.Q6J("ngForOf",i.submissionStatuses),e.xp6(1),e.Q6J("ngIf",i.participantAnswersForm.get("rank")),e.xp6(1),e.Q6J("ngIf",i.submission),e.xp6(2),e.Q6J("disabled",i.saving),e.xp6(1),e.hij(" ",e.lcZ(36,16,"Cancel")," "),e.xp6(2),e.Q6J("disabled",!i.participantAnswersForm.valid||i.isChallangeAnnounced)("buttonBusy",i.saving)("busyText",i.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(41,18,"Save")))},dependencies:[m.sg,m.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.On,Y.L,j.Z,l.sg,l.u,Z.F],styles:[".selected[_ngcontent-%COMP%]{background-color:#aceca1;font-weight:700}"]})}return n})();var C=function(n){return n[n.Won=4]="Won",n[n.Lost=5]="Lost",n}(C||{}),U=c(83410);const se=["dataTable"],re=["paginator"],ce=["participantAnswersModal"];function pe(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",24),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"th",25),e._uU(5),e.ALo(6,"localize"),e.qZA(),e.TgZ(7,"th",26),e._uU(8),e.ALo(9,"localize"),e.qZA(),e.TgZ(10,"th",26),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"th",27),e._uU(14),e.ALo(15,"localize"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,5,"Participant Name")," "),e.xp6(3),e.hij(" ",e.lcZ(6,7,"Age")," "),e.xp6(3),e.hij(" ",e.lcZ(9,9,"Status")," "),e.xp6(3),e.hij(" ",e.lcZ(12,11,"Submission Date")," "),e.xp6(3),e.hij(" ",e.lcZ(15,13,"Actions")," "))}function de(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",39)(1,"a",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.viewAnswers(i))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ViewAnswers")," "))}function ue(n,s){1&n&&(e.TgZ(0,"ul",37),e.YNc(1,de,4,3,"li",38),e.ALo(2,"permission"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"Pages.Administration.Challanges.View")))}function ge(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td",28)(2,"span",29),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"div",30)(6,"span",31),e._uU(7),e.qZA()()(),e.TgZ(8,"td",25)(9,"span",29),e._uU(10),e.ALo(11,"localize"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",26)(14,"span",29),e._uU(15),e.ALo(16,"localize"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"td",26)(19,"span",29),e._uU(20),e.ALo(21,"localize"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"td",27)(24,"div",32)(25,"button",33),e._UZ(26,"i",34)(27,"span",35),e._uU(28),e.ALo(29,"localize"),e.qZA(),e.YNc(30,ue,3,3,"ul",36),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,10,"Name")),e.xp6(3),e.s9C("tooltip",t.code),e.xp6(1),e.hij(" ",t.participantName," "),e.xp6(3),e.Oqu(e.lcZ(11,12,"Age")),e.xp6(2),e.hij(" ",t.age," "),e.xp6(3),e.Oqu(e.lcZ(16,14,"Status")),e.xp6(2),e.hij(" ",t.participantStatusName," "),e.xp6(3),e.Oqu(e.lcZ(21,16,"Submission Date")),e.xp6(2),e.hij(" ",t.submissionDate," "),e.xp6(6),e.hij(" ",e.lcZ(29,18,"Actions")," ")}}function me(n,s){1&n&&(e.TgZ(0,"div",41),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const he=function(){return{"min-width":"50rem"}};let _e=(()=>{class n extends v.c{constructor(t,o,i){super(t),this._challangesServiceProxy=o,this.fb=i}ngOnInit(){this.searchForm=this.fb.group({name:[""]})}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getParticipants(t){this.primengTableHelper.shouldResetPaging(t)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._challangesServiceProxy.getChallangeParticipants(new p.uYe({challangeId:this.challangeId,name:this.searchForm.get("name").value,sorting:this.primengTableHelper.getSorting(this.dataTable),maxResultCount:this.primengTableHelper.getMaxResultCount(this.paginator,t),skipCount:this.primengTableHelper.getSkipCount(this.paginator,t)})).pipe((0,y.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(o=>{this.primengTableHelper.totalRecordsCount=o.totalCount,this.primengTableHelper.records=o.items,this.primengTableHelper.hideLoadingIndicator()}))}reset(){this.searchForm.reset(),this.getParticipants()}reloadPage(){this.paginator.changePage(this.paginator.getPage())}viewAnswers(t){this.participantAnswersModal.show(t.submissionId,t.age,t.participantName,t.rank,t.participantStatusId,this.challangeStatus)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(p.uIk),e.Y36(l.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-participants"]],viewQuery:function(o,i){if(1&o&&(e.Gf(se,7),e.Gf(re,7),e.Gf(ce,7)),2&o){let a;e.iGM(a=e.CRH())&&(i.dataTable=a.first),e.iGM(a=e.CRH())&&(i.paginator=a.first),e.iGM(a=e.CRH())&&(i.participantAnswersModal=a.first)}},inputs:{challangeId:"challangeId",challangeStatus:"challangeStatus"},features:[e.qOj],decls:32,vars:23,consts:[[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"form",3,"formGroup"],[1,"row","mb-5"],[1,"col-md-12"],["for","Title",1,"form-label"],["type","text","formControlName","name","placeholder","Participant Name",1,"form-control"],[1,"row","justify-content-center","mt-5","mb-5"],["type","button",1,"btn","btn-success","fw-bold","col-md-2",3,"click"],["type","button",1,"btn","btn-warning","fw-bold","col-md-2",3,"click"],[1,"fa","fa-sync","btn-md-icon"],[1,"d-none","d-md-inline-block"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["participantAnswersModal",""],["pSortableColumn","title",2,"min-width","200px"],[2,"min-width","50px"],[2,"min-width","150px"],[2,"min-width","130px"],[2,"min-width","200px"],[1,"p-column-title"],[1,"w-100"],[1,"hide-overflown",3,"tooltip"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(o,i){1&o&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"form",2)(4,"div")(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8,"Name"),e.qZA(),e._UZ(9,"input",6),e.qZA()(),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return i.getParticipants()}),e._uU(12,"Search"),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return i.reset()}),e._UZ(14,"i",10),e._uU(15," \xa0 "),e.TgZ(16,"span",11),e._uU(17),e.ALo(18,"localize"),e.qZA()()()()(),e.TgZ(19,"div",12)(20,"div",13)(21,"p-table",14,15),e.NdJ("onLazyLoad",function(r){return i.getParticipants(r)}),e.YNc(23,pe,16,15,"ng-template",16),e.YNc(24,ge,31,20,"ng-template",17),e.qZA(),e.YNc(25,me,3,3,"div",18),e.TgZ(26,"div",19)(27,"p-paginator",20,21),e.NdJ("onPageChange",function(r){return i.getParticipants(r)}),e.ALo(29,"localize"),e.qZA()()()()()()(),e.TgZ(30,"app-participant-answers",22,23),e.NdJ("modalSave",function(){return i.getParticipants()}),e.qZA()),2&o&&(e.Q6J("@routerTransition",void 0),e.xp6(3),e.Q6J("formGroup",i.searchForm),e.xp6(14),e.hij(" ",e.lcZ(18,17,"Reset")," "),e.xp6(3),e.Q6J("busyIf",i.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(22,he))("resizableColumns",i.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",i.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",i.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",i.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(29,19,"TotalRecordsCount",i.primengTableHelper.totalRecordsCount)))},dependencies:[m.O5,l._Y,l.Fj,l.JJ,l.JL,_.Hz,_.Mq,_.TO,M.U,h.iA,A.jx,h.lQ,P.D,l.sg,l.u,Q.i9,le,Z.F,U.a]})}return n})();function fe(n,s){1&n&&(e.TgZ(0,"div",5)(1,"label",43),e._uU(2,"Code"),e.qZA(),e._UZ(3,"input",44),e.qZA())}function be(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"input",45),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileSelectForChallange(i))}),e.qZA()}}function Ce(n,s){if(1&n&&e._UZ(0,"img",46),2&n){const t=e.oxw();e.Q6J("src",t.uploadedChallangeImageUrl,e.LSH)}}function Te(n,s){if(1&n&&(e.TgZ(0,"option",47),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function ve(n,s){if(1&n&&(e.TgZ(0,"option",47),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function we(n,s){if(1&n&&(e.TgZ(0,"div",48)(1,"label"),e._UZ(2,"input",49),e._uU(3),e.qZA(),e._uU(4," \xa0\xa0 "),e.qZA()),2&n){const t=s.$implicit;e.xp6(2),e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ae(n,s){if(1&n&&(e.TgZ(0,"div",50),e._UZ(1,"input",51),e._uU(2),e.qZA()),2&n){const t=s.$implicit,o=s.index;e.xp6(1),e.Q6J("formControlName",o),e.xp6(1),e.hij(" ",t.name," ")}}function Ze(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",52)(1,"label")(2,"input",53),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onChallengeTypeChange())}),e.qZA(),e._uU(3),e.qZA(),e._uU(4," \xa0\xa0 "),e.qZA()}if(2&n){const t=s.$implicit;e.xp6(2),e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function xe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addQuestion())}),e._uU(1,"Add Question +"),e.qZA()}}function qe(n,s){1&n&&e._UZ(0,"input",69)}function ye(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"input",70),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw().index,r=e.oxw().$implicit,d=e.oxw(2);return e.KtG(d.onFileSelect(i,a,r))}),e.qZA()}}function Me(n,s){if(1&n&&e._UZ(0,"img",46),2&n){const t=e.oxw().index,o=e.oxw(3);e.Q6J("src",o.uploadedAnswerImageUrls[t],e.LSH)}}function Pe(n,s){if(1&n&&(e.TgZ(0,"div")(1,"div",66)(2,"label",34),e._uU(3),e.qZA(),e.YNc(4,qe,1,0,"input",67),e.YNc(5,ye,1,0,"input",68),e.YNc(6,Me,1,1,"img",17),e.qZA()()),2&n){const t=s.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.hij("Answer ",t+1,""),e.xp6(1),e.Q6J("ngIf",1===o.challangeType),e.xp6(1),e.Q6J("ngIf",2===o.challangeType&&!o.isViewMode),e.xp6(1),e.Q6J("ngIf",o.uploadedAnswerImageUrls[t])}}function Qe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.addAnswer(i))}),e._uU(1," Add Answers "),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",!t.get("questionTitle").valid||!t.get("questionTime").valid)}}function Ue(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.saveQuestion(i))}),e._uU(1," Save Question "),e.qZA()}if(2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("disabled",!o.isQuestionAnswersValid(t)||!t.get("questionTitle").valid||!t.get("questionTime").valid)}}function Fe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",60)(2,"div",9)(3,"div",10)(4,"label",34),e._uU(5,"Question Title"),e.qZA(),e._UZ(6,"input",61),e.qZA(),e.TgZ(7,"div",10)(8,"label",34),e._uU(9,"Question Time (in seconds)"),e.qZA(),e._UZ(10,"input",62),e.qZA()(),e.TgZ(11,"div",63),e.YNc(12,Pe,7,5,"div",58),e.qZA(),e.TgZ(13,"div",64),e.YNc(14,Qe,2,1,"button",41),e.YNc(15,Ue,2,1,"button",41),e.TgZ(16,"button",65),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.CancelQuestion())}),e._uU(17," Cancel "),e.qZA()()()()}if(2&n){const t=s.$implicit,o=s.index,i=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",o),e.xp6(11),e.Q6J("ngForOf",t.get("answers").controls),e.xp6(2),e.Q6J("ngIf",i.showAddAnswersButton),e.xp6(1),e.Q6J("ngIf",i.showSaveQuestionButton&&!i.isViewMode)}}function Se(n,s){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55),e.YNc(2,xe,2,0,"button",56),e.qZA(),e.TgZ(3,"div",57),e.YNc(4,Fe,18,4,"div",58),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.showAddQuestionButton&&!t.isViewMode),e.xp6(2),e.Q6J("ngForOf",t.questionForms.controls)}}function Ie(n,s){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Question Index"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Question Title"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Actions"),e.qZA()())}function Ne(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().rowIndex,a=e.oxw(2);return e.KtG(a.editQuestion(i))}),e._uU(1,"Edit"),e.qZA()}}function ke(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().rowIndex,a=e.oxw(2);return e.KtG(a.deleteQuestion(i))}),e._uU(1,"Delete"),e.qZA()}}function Je(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",81),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().rowIndex,a=e.oxw(2);return e.KtG(a.editQuestion(i))}),e._uU(1,"View"),e.qZA()}}function Le(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,Ne,2,0,"button",76),e.YNc(7,ke,2,0,"button",77),e.YNc(8,Je,2,0,"button",78),e.qZA()()),2&n){const t=s.$implicit,o=s.rowIndex,i=e.oxw(2);e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Q6J("ngIf",!i.isViewMode),e.xp6(1),e.Q6J("ngIf",!i.isViewMode),e.xp6(1),e.Q6J("ngIf",i.isViewMode)}}function ze(n,s){if(1&n&&(e.TgZ(0,"div",72)(1,"div",73)(2,"p-table",47),e.YNc(3,Ie,7,0,"ng-template",74),e.YNc(4,Le,9,5,"ng-template",75),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("value",t.challangeQuestions)}}function Re(n,s){if(1&n&&(e.TgZ(0,"tab",82),e._UZ(1,"app-participants",83),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("challangeId",t.challangeId)("challangeStatus",t.challangeData.status)}}function De(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e._uU(1,"Save"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.IsFormValidForSave())}}function Oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSubmit())}),e._uU(1,"Submit The Challange"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.ISFormValidForSubmit())}}let F=(()=>{class n extends v.c{constructor(t,o,i,a,r,d,f,x){super(t),this.fb=o,this.challangesService=i,this._interestsService=a,this.fileUploadService=r,this.dateTimeService=d,this.route=f,this.router=x,this.isCreateMode=!0,this.isViewMode=!1,this.challangeData=new p.sai,this.sampleDateRange=[this.dateTimeService.getStartOfDay(),this.dateTimeService.getEndOfDayPlusDays(7)],this.questionRank=0,this.challangeQuestions=[],this.isQuestionExisted=!1,this.editedQuestionIndex=null,this.answersPerQuestion=4,this.ChallangeTypeEnum=u,this.ChallangeStatusEnum=p.xEq,this.accpeptedAge=[],this.interests=[],this.showAddQuestionButton=!1,this.showAddAnswersButton=!0,this.showSaveQuestionButton=!1,this.showQuestionManagePanel=!1,this.files=[],this.uploadedAnswerImageUrls=[],this.uploadedChallangeImageUrl=null,this.challengeTypes=[{label:"MCQ Text",value:u.MCQ_TEXT},{label:"MCQ Photos",value:u.MCQ_Photo},{label:"Photo Upload",value:u.UploadPhoto},{label:"Video Upload",value:u.UploadVideo},{label:"Free Text",value:u.FreeText}],this.genders=[{label:"Male",value:0},{label:"Female",value:1}];for(let T=1;T<19;T++)this.accpeptedAge.push({label:`${T} year`,value:T})}ngOnInit(){this.intializeChallnageForm(),"view"==this.route.snapshot.queryParams.mode&&(this.isViewMode=!0);const o=this.route.snapshot.paramMap.get("id");this.challangeId=o,o?this.GetChallangeForEdit(o):this.bindInterests()}intializeChallnageForm(){this.challengeForm=this.fb.group({name:["",l.kI.required],code:[""],description:["",l.kI.required],challangeImage:["",l.kI.required],howToWin:["",l.kI.required],minAge:["2",l.kI.required],maxAge:["15",l.kI.required],challengeType:["",l.kI.required],gender:[""],interests:this.fb.array([]),questions:this.fb.array([])})}GetChallangeForEdit(t){this.isCreateMode=!1,this.spinnerService.show(),this.challangesService.getForEdit(Number(t)).subscribe(o=>{this.showAddQuestionButton=!0,this.showQuestionManagePanel=!0,this.challangeData=o,this.challangeType=this.challangeData.challangeType,this.challengeForm.get("code").setValue(this.challangeData.code),this.challengeForm.get("code").disable(),this.challengeForm.get("name").setValue(this.challangeData.title),this.challengeForm.get("howToWin").setValue(this.challangeData.howToWin),this.challengeForm.get("description").setValue(this.challangeData.description),this.challengeForm.get("minAge").setValue(this.challangeData.minAge),this.challengeForm.get("maxAge").setValue(this.challangeData.maxAge),this.challengeForm.get("gender").setValue(this.challangeData.gender),this.challengeForm.get("challengeType").setValue(this.challangeData.challangeType),this.challengeForm.get("challangeImage").setValue(this.challangeData.img),this.isViewMode&&(this.challengeForm.get("name").disable(),this.challengeForm.get("howToWin").disable(),this.challengeForm.get("description").disable(),this.challengeForm.get("minAge").disable(),this.challengeForm.get("maxAge").disable(),this.challengeForm.get("gender").disable(),this.challengeForm.get("challengeType").disable(),this.challengeForm.get("challangeImage").disable(),this.challengeForm.get("challangeImage").disable()),this.sampleDateRange=[],this.sampleDateRange=[this.challangeData.startTime,this.challangeData.endTime],this.uploadedChallangeImageUrl=`${b.g.remoteServiceBaseUrl}/challanges/${this.challangeData.img}`;const i=this.challangeData.interests.map(a=>a.toString());this.BindChallangeQuestions(this.challangeData),this.bindInterests(i),this.spinnerService.hide()})}BindChallangeQuestions(t){t.questions.length>0&&t.questions.forEach(o=>{let i={title:o.questionText,time:o.timeInSeconds,answers:[],questionType:this.convertChallengeTypeToQuestionType(t.challangeType),rank:t.questions.indexOf(o)};i.questionType==u.MCQ_TEXT&&(i.answers=o.options.map(a=>a.optionText)),i.questionType==u.MCQ_Photo&&(i.answers=o.options.map(a=>a.optionImage)),this.challangeQuestions.push(i)})}convertChallengeTypeToQuestionType(t){switch(t){case p.QoG.MCQText:return u.MCQ_TEXT;case p.QoG.MCQPhotos:return u.MCQ_Photo;case p.QoG.UploadImage:return u.UploadPhoto;case p.QoG.UploadVideo:return u.UploadVideo;case p.QoG.FreeText:return u.FreeText;default:throw new Error("Invalid ChallengeTypeDTO value")}}onFileSelectForChallange(t){this.spinnerService.show();const o=t.currentTarget,i=o.files?o.files[0]:null;i&&this.fileUploadService.uploadFile(i).subscribe(a=>{this.challengeForm.get("challangeImage").setValue(a.result);const r=new FileReader;r.onload=d=>{this.uploadedChallangeImageUrl=d.target.result},r.readAsDataURL(i),this.spinnerService.hide()})}bindInterests(t=[]){this._interestsService.getInterestsList("").subscribe(o=>{this.interests=o,this.updateInterestsFormArray(t)})}updateInterestsFormArray(t){const o=this.challengeForm.get("interests");o.clear(),this.interests.forEach(i=>{const a=t.includes(i.value.toString()),r=this.fb.control(a);this.isViewMode&&r.disable(),o.push(r)})}get interestsControls(){return this.challengeForm?.get("interests")}get questionForms(){return this.challengeForm?.get("questions")}editQuestion(t){this.spinnerService.show(),this.CancelQuestion(),this.spinnerService.hide(),this.editedQuestionIndex=t;let o=this.challangeQuestions[t],i=this.fb.group({questionTitle:[o.title,l.kI.required],questionTime:[o.time,l.kI.required],answers:this.fb.array([])});const a=i.get("answers");if(o.questionType==u.MCQ_TEXT)for(let r=0;r<o.answers.length;r++)a.push(this.fb.group({text:[o.answers[r],l.kI.required]}));if(o.questionType==u.MCQ_Photo)for(let r=0;r<o.answers.length;r++)a.push(this.fb.group({fileName:[o.answers[r],l.kI.required]})),this.uploadedAnswerImageUrls.push(`${b.g.remoteServiceBaseUrl}/challanges/${o.answers[r]}`);this.isViewMode&&(i.get("questionTitle").disable(),i.get("questionTime").disable(),a.controls.forEach(r=>r.disable())),this.questionForms.push(i),this.showAddQuestionButton=!1,this.showAddAnswersButton=!1,this.showSaveQuestionButton=!0,this.isQuestionExisted=!0}addQuestion(){const t=this.fb.group({questionTitle:["",l.kI.required],questionTime:["",l.kI.required],answers:this.fb.array([])});this.questionForms.push(t),this.showAddQuestionButton=!1;const o=Number(this.challengeForm.get("challengeType").value);o!==u.MCQ_TEXT&&o!==u.MCQ_Photo&&(this.showSaveQuestionButton=!0,this.showAddAnswersButton=!1)}onFileSelect(t,o,i){this.spinnerService.show();let a=i.get("answers");const r=t.currentTarget,d=r.files?r.files[0]:null;d&&this.fileUploadService.uploadFile(d).subscribe(f=>{a.at(o).get("fileName").setValue(f.result);const x=new FileReader;x.onload=T=>{this.uploadedAnswerImageUrls[o]=T.target.result},x.readAsDataURL(d),this.spinnerService.hide()})}addAnswer(t){const o=t.get("answers"),i=Number(this.challengeForm.get("challengeType").value);if(i===u.MCQ_TEXT)for(let a=0;a<4;a++)o.push(this.fb.group({text:["",l.kI.required]}));else if(i===u.MCQ_Photo)for(let a=0;a<4;a++)o.push(this.fb.group({file:[null,l.kI.required],fileName:[""]}));this.showAddAnswersButton=!1,this.showSaveQuestionButton=!0}saveQuestion(t){this.showAddQuestionButton=!0,this.showAddAnswersButton=!0,this.showSaveQuestionButton=!1;let o=[];const i=t.get("answers"),a=Number(this.challengeForm.value.challengeType);if(a===u.MCQ_TEXT)for(let r=0;r<i.length;r++){const d=i.at(r).value;d.text&&o.push(d.text)}if(a===u.MCQ_Photo)for(let r=0;r<i.length;r++){const d=i.at(r).value;d.fileName&&o.push(d.fileName)}if(this.resetQuestionControls(),this.isQuestionExisted)this.challangeQuestions[this.editedQuestionIndex].title=t.get("questionTitle").value,this.challangeQuestions[this.editedQuestionIndex].time=t.get("questionTime").value,this.challangeQuestions[this.editedQuestionIndex].answers=o;else{this.questionRank++;let r={rank:this.questionRank,title:t.get("questionTitle").value,time:t.get("questionTime").value,answers:o,questionType:a};this.challangeQuestions.push(r)}this.uploadedAnswerImageUrls=[]}CancelQuestion(){this.showAddQuestionButton=!0,this.showAddAnswersButton=!0,this.showSaveQuestionButton=!1,this.isQuestionExisted=!1,this.resetQuestionControls()}onChallengeTypeChange(){this.showQuestionManagePanel=!0,this.showAddQuestionButton=!0,this.challangeType=this.challengeForm.get("challengeType").value,this.resetQuestionControls(),this.challangeQuestions=[]}resetQuestionControls(){for(;0!==this.questionForms.length;)this.questionForms.removeAt(0);this.uploadedAnswerImageUrls=[]}isQuestionAnswersValid(t){if(t){const o=t.get("answers");return o&&o.valid}}deleteQuestion(t){t>=0&&t<this.challangeQuestions.length&&this.challangeQuestions.splice(t,1),this.resetQuestionControls()}onSubmit(){this.spinnerService.show();const t=Number(this.challengeForm.value.challengeType);let o=new p.j6;o.title=this.challengeForm.get("name").value,o.description=this.challengeForm.get("description").value,o.howToWin=this.challengeForm.get("howToWin").value,o.img=this.challengeForm.get("challangeImage").value,o.maxAge=Number(this.challengeForm.get("maxAge").value),o.minAge=Number(this.challengeForm.get("minAge").value),o.challangeType=this.challengeForm.get("challengeType").valid?this.challengeForm.get("challengeType").value:u.MCQ_TEXT,o.startTime=this.sampleDateRange[0],o.endTime=this.sampleDateRange[1],o.gender=this.challengeForm.get("gender").value??null,o.interests=[],o.questions=[];for(let i=0;i<this.interestsControls.length;i++)this.interestsControls.at(i).value&&o.interests.push(Number(this.interests.at(i).value));for(let i=0;i<this.challangeQuestions.length;i++){let a=new p.L9r;a.questionText=this.challangeQuestions[i].title,a.timeInSeconds=this.challangeQuestions[i].time,a.options=[];const r=this.challangeQuestions[i].answers;for(let d=0;d<r.length;d++){let f=new p.KVo;t==this.ChallangeTypeEnum.MCQ_Photo&&(f.optionImage=r[d]),t==this.ChallangeTypeEnum.MCQ_TEXT&&(f.optionText=r[d]),a.options.push(f)}o.questions.push(a)}this.challangeId?(o.id=Number(this.challangeId),this.challangesService.update(o).subscribe(i=>{this.spinnerService.hide(),this.router.navigate(["/app/admin/challanges"])},i=>this.spinnerService.hide())):this.challangesService.create(o).subscribe(i=>{this.spinnerService.hide(),this.router.navigate(["/app/admin/challanges"])},i=>this.spinnerService.hide())}hasSelectedCheckbox(){return this.interestsControls.controls.some(o=>o.value)}IsFormValidForSave(){return this.challengeForm.get("name").valid&&this.challengeForm.get("description").valid&&this.challengeForm.get("howToWin").valid&&this.challengeForm.get("challangeImage").valid&&this.challengeForm.get("maxAge").valid&&this.challengeForm.get("minAge").valid&&this.hasSelectedCheckbox()}ISFormValidForSubmit(){return this.IsFormValidForSave()&&this.challangeQuestions.length>0}back(){this.router.navigate(["/app/admin/challanges"])}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(l.qu),e.Y36(p.uIk),e.Y36(p.n31),e.Y36(D),e.Y36(q.C),e.Y36(g.gz),e.Y36(g.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-manage-chalange"]],features:[e.qOj],decls:67,vars:17,consts:[[1,"pt-10"],[1,"container","mt-3",3,"formGroup"],["heading","Basic Info"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"mb-5"],["for","Name",1,"form-label","required"],["type","text","formControlName","name","placeholder","Name",1,"form-control"],["class","mb-5",4,"ngIf"],[1,"row","mb-5"],[1,"col-md-6"],["for","Description",1,"form-label","required"],["formControlName","description","placeholder","Description","rows","3",1,"form-control"],["for","HowToWin",1,"form-label","required"],["formControlName","howToWin","placeholder","HowToWin","rows","3",1,"form-control"],["type","file","class","form-control",3,"change",4,"ngIf"],["type","hidden","formControlName","challangeImage",1,"form-control"],["class","img-preview",3,"src",4,"ngIf"],["for","MinAge",1,"form-label","required"],["formControlName","minAge",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","MaxAge",1,"form-label","required"],["formControlName","maxAge",1,"form-select"],[1,"mb-5","row"],["for","SampleDateRangePicker",1,"col-md-12","form-label","required"],["name","SampleDateRangePicker","type","text","id","SampleDateRangePicker","bsDaterangepicker","","dateRangePickerLuxonModifier","",1,"form-control",3,"date","dateChange"],[1,"row","col-md-6"],["for","gender",1,"form-label"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row","mb-4"],["for","interests",1,"form-label","required"],["formArrayName","interests",1,"row"],["class","col-md-3 mb-2",4,"ngFor","ngForOf"],["heading","Questions"],["for","Title",1,"form-label","required"],["class","col-md-2 mb-4",4,"ngFor","ngForOf"],["class","card-body","style","border: 1px solid #eee;border-radius: 8px;",4,"ngIf"],["class","row align-items-center",4,"ngIf"],["heading","Participants",4,"ngIf"],[1,"row","justify-content-center","mt-5","mb-5"],["class","btn btn-info fw-bold col-md-3","type","button",3,"disabled","click",4,"ngIf"],["class","btn btn-success fw-bold col-md-3",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-warning","fw-bold","col-md-3",3,"click"],["for","Code",1,"form-label","required"],["type","text","formControlName","code","placeholder","Code",1,"form-control"],["type","file",1,"form-control",3,"change"],[1,"img-preview",3,"src"],[3,"value"],[1,"col-md-4"],["type","radio","name","gender","formControlName","gender",1,"form-check-input",3,"value"],[1,"col-md-3","mb-2"],["type","checkbox",1,"form-check-input",3,"formControlName"],[1,"col-md-2","mb-4"],["type","radio","name","challengeType","formControlName","challengeType",1,"form-check-input",3,"value","change"],[1,"card-body",2,"border","1px solid #eee","border-radius","8px"],[1,"row","mb-5","justify-content-center"],["class","btn btn-success fw-bold col-md-4",3,"click",4,"ngIf"],["formArrayName","questions",1,"mb-5"],[4,"ngFor","ngForOf"],[1,"btn","btn-success","fw-bold","col-md-4",3,"click"],[3,"formGroupName"],["type","text","formControlName","questionTitle",1,"form-control"],["type","number","formControlName","questionTime","min","0",1,"form-control"],["formArrayName","answers"],[1,"row","mt-5","justify-content-center"],[1,"btn","btn-warning","fw-bold","col-md-3",3,"click"],[1,"mb-2",3,"formGroupName"],["type","text","formControlName","text","class","form-control",4,"ngIf"],["type","file","formControlName","file","class","form-control",3,"change",4,"ngIf"],["type","text","formControlName","text",1,"form-control"],["type","file","formControlName","file",1,"form-control",3,"change"],[1,"btn","btn-success","fw-bold","col-md-3",3,"disabled","click"],[1,"row","align-items-center"],[1,"primeng-datatable-container"],["pTemplate","header"],["pTemplate","body"],["class","btn btn-info","type","button",3,"click",4,"ngIf"],["class","btn btn-danger","type","button",3,"click",4,"ngIf"],["class","btn btn-warning","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["heading","Participants"],[3,"challangeId","challangeStatus"],["type","button",1,"btn","btn-info","fw-bold","col-md-3",3,"disabled","click"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"form",1)(2,"tabset")(3,"tab",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8,"Name"),e.qZA(),e._UZ(9,"input",7),e.qZA(),e.YNc(10,fe,4,0,"div",8),e.TgZ(11,"div",9)(12,"div",10)(13,"label",11),e._uU(14,"Description"),e.qZA(),e._UZ(15,"textarea",12),e.qZA(),e.TgZ(16,"div",10)(17,"label",13),e._uU(18,"How To Win"),e.qZA(),e._UZ(19,"textarea",14),e.qZA()(),e.TgZ(20,"div",5)(21,"label",13),e._uU(22,"Challange Image"),e.qZA(),e._UZ(23,"br"),e.YNc(24,be,1,0,"input",15),e._UZ(25,"input",16),e.YNc(26,Ce,1,1,"img",17),e.qZA(),e.TgZ(27,"div",9)(28,"div",10)(29,"label",18),e._uU(30,"Minimum Age"),e.qZA(),e.TgZ(31,"select",19),e.YNc(32,Te,2,2,"option",20),e.qZA()(),e.TgZ(33,"div",10)(34,"label",21),e._uU(35,"Maximum Age"),e.qZA(),e.TgZ(36,"select",22),e.YNc(37,ve,2,2,"option",20),e.qZA()()(),e.TgZ(38,"div",23)(39,"div",10)(40,"label",24),e._uU(41,"Challange Dates"),e.qZA(),e.TgZ(42,"input",25),e.NdJ("dateChange",function(r){return i.sampleDateRange=r}),e.qZA()(),e.TgZ(43,"div",26)(44,"label",27),e._uU(45,"Gender"),e.qZA(),e.YNc(46,we,5,2,"div",28),e.qZA()(),e.TgZ(47,"div",29)(48,"label",30),e._uU(49,"Interests"),e.qZA(),e.TgZ(50,"div",31),e.YNc(51,Ae,3,2,"div",32),e.qZA()()()()(),e.TgZ(52,"tab",33)(53,"div",3)(54,"div",4)(55,"div",9)(56,"label",34),e._uU(57,"Challange Type"),e.qZA(),e.YNc(58,Ze,5,2,"div",35),e.qZA(),e.YNc(59,Se,5,2,"div",36),e.YNc(60,ze,5,1,"div",37),e.qZA()()(),e.YNc(61,Re,2,2,"tab",38),e.qZA(),e.TgZ(62,"div",39),e.YNc(63,De,2,1,"button",40),e.YNc(64,Oe,2,1,"button",41),e.TgZ(65,"button",42),e.NdJ("click",function(){return i.back()}),e._uU(66,"Back"),e.qZA()()()()),2&o&&(e.Tol(i.containerClass),e.xp6(1),e.Q6J("formGroup",i.challengeForm),e.xp6(9),e.Q6J("ngIf",!i.isCreateMode),e.xp6(14),e.Q6J("ngIf",!i.isViewMode),e.xp6(2),e.Q6J("ngIf",i.uploadedChallangeImageUrl),e.xp6(6),e.Q6J("ngForOf",i.accpeptedAge),e.xp6(5),e.Q6J("ngForOf",i.accpeptedAge),e.xp6(5),e.Q6J("date",i.sampleDateRange),e.xp6(4),e.Q6J("ngForOf",i.genders),e.xp6(5),e.Q6J("ngForOf",i.interests),e.xp6(7),e.Q6J("ngForOf",i.challengeTypes),e.xp6(1),e.Q6J("ngIf",i.showQuestionManagePanel),e.xp6(1),e.Q6J("ngIf",i.challangeQuestions.length>0),e.xp6(1),e.Q6J("ngIf",i.challangeId&&(i.challangeData.status==i.ChallangeStatusEnum.Closed||i.challangeData.status==i.ChallangeStatusEnum.Announced)),e.xp6(2),e.Q6J("ngIf",!i.isViewMode),e.xp6(1),e.Q6J("ngIf",!i.isViewMode))},dependencies:[m.sg,m.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.Wl,l.EJ,l._,l.JJ,l.JL,l.qQ,S.wW,S.AH,I.FR,I.TB,O.t,h.iA,A.jx,l.sg,l.u,l.x0,l.CE,_e],styles:[".img-preview[_ngcontent-%COMP%]{max-width:100px;max-height:100px}"]})}return n})();var u=function(n){return n[n.MCQ_TEXT=1]="MCQ_TEXT",n[n.MCQ_Photo=2]="MCQ_Photo",n[n.UploadPhoto=3]="UploadPhoto",n[n.UploadVideo=4]="UploadVideo",n[n.FreeText=5]="FreeText",n}(u||{}),N=c(68989),k=c(98155);const He=["dataTable"],Ye=["paginator"];function je(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.createChallange())}),e._UZ(1,"i",33),e.TgZ(2,"span",21),e._uU(3),e.ALo(4,"localize"),e.qZA()()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"NewChallange")," "))}function Ee(n,s){if(1&n&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij("",t.name," ")}}const J=function(){return["Pages.Administration.Challanges.Cancel","Pages.Administration.Challanges.Edit","Pages.Administration.Challanges.View","Pages.Administration.Challanges.Delete"]};function Ge(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",35),e._uU(2),e.ALo(3,"localize"),e._UZ(4,"p-sortIcon",36),e.qZA(),e.TgZ(5,"th",37),e._uU(6),e.ALo(7,"localize"),e.qZA(),e.TgZ(8,"th",38),e._uU(9),e.ALo(10,"localize"),e._UZ(11,"p-sortIcon",39),e.qZA(),e.TgZ(12,"th",40),e._uU(13),e.ALo(14,"localize"),e._UZ(15,"p-sortIcon",41),e.qZA(),e.TgZ(16,"th",37),e._uU(17),e.ALo(18,"localize"),e.qZA(),e.TgZ(19,"th",42),e.ALo(20,"permissionAny"),e._uU(21),e.ALo(22,"localize"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"Title")," "),e.xp6(4),e.hij(" ",e.lcZ(7,9,"Code")," "),e.xp6(3),e.hij(" ",e.lcZ(10,11,"StartDate")," "),e.xp6(4),e.hij(" ",e.lcZ(14,13,"EndDate")," "),e.xp6(4),e.hij(" ",e.lcZ(18,15,"Status")," "),e.xp6(2),e.Q6J("hidden",!e.lcZ(20,17,e.DdM(21,J))),e.xp6(2),e.hij(" ",e.lcZ(22,19,"Actions")," "))}function Ve(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.editChallange(i.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Edit")," "))}function Be(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.viewChallange(i.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"View")," "))}function $e(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.startChallange(i))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Start")," "))}function We(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.cancelChallange(i))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Cancel")," "))}function Ke(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.closeChallange(i))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Close")," "))}function Xe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.announceChallange(i))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Announce")," "))}function et(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",53)(1,"a",54),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.deleteChallange(i))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Delete")," "))}function tt(n,s){if(1&n&&(e.TgZ(0,"ul",51),e.YNc(1,Ve,4,3,"li",52),e.ALo(2,"permission"),e.YNc(3,Be,4,3,"li",52),e.ALo(4,"permission"),e.YNc(5,$e,4,3,"li",52),e.ALo(6,"permission"),e.YNc(7,We,4,3,"li",52),e.ALo(8,"permission"),e.YNc(9,Ke,4,3,"li",52),e.ALo(10,"permission"),e.YNc(11,Xe,4,3,"li",52),e.ALo(12,"permission"),e.YNc(13,et,4,3,"li",52),e.ALo(14,"permission"),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,7,"Pages.Administration.Challanges.Edit")&&(t.status==o.ChallangeStatusEnum.Draft||t.status==o.ChallangeStatusEnum.Submitted)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,9,"Pages.Administration.Challanges.View")),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,11,"Pages.Administration.Challanges.Start")&&t.status==o.ChallangeStatusEnum.Submitted),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,13,"Pages.Administration.Challanges.Cancel")&&t.status==o.ChallangeStatusEnum.Started),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,15,"Pages.Administration.Challanges.Close")&&t.status==o.ChallangeStatusEnum.Started),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,17,"Pages.Administration.Challanges.Announce")&&t.status==o.ChallangeStatusEnum.Closed),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,19,"Pages.Administration.Challanges.Delete")&&(t.status==o.ChallangeStatusEnum.Draft||t.status==o.ChallangeStatusEnum.Submitted))}}function nt(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td",37)(2,"span",43),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"div",44)(6,"span",45),e._uU(7),e.qZA()()(),e.TgZ(8,"td",37)(9,"span",43),e._uU(10),e.ALo(11,"localize"),e.qZA(),e.TgZ(12,"div",44)(13,"span",45),e._uU(14),e.qZA()()(),e.TgZ(15,"td",37)(16,"span",43),e._uU(17),e.ALo(18,"localize"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"td",37)(21,"span",43),e._uU(22),e.ALo(23,"localize"),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"td",37)(26,"span",43),e._uU(27),e.ALo(28,"localize"),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"td",42),e.ALo(31,"permissionAny"),e.TgZ(32,"div",46)(33,"button",47),e._UZ(34,"i",48)(35,"span",49),e._uU(36),e.ALo(37,"localize"),e.qZA(),e.YNc(38,tt,15,21,"ul",50),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,14,"Title")),e.xp6(3),e.s9C("tooltip",t.title),e.xp6(1),e.hij(" ",t.title," "),e.xp6(3),e.Oqu(e.lcZ(11,16,"Code")),e.xp6(3),e.s9C("tooltip",t.code),e.xp6(1),e.hij(" ",t.code," "),e.xp6(3),e.Oqu(e.lcZ(18,18,"StartDate")),e.xp6(2),e.hij(" ",t.startDate," "),e.xp6(3),e.Oqu(e.lcZ(23,20,"EndDate")),e.xp6(2),e.hij(" ",t.endDate," "),e.xp6(3),e.Oqu(e.lcZ(28,22,"Status")),e.xp6(2),e.hij(" ",t.statusName," "),e.xp6(1),e.Q6J("hidden",!e.lcZ(31,24,e.DdM(28,J))),e.xp6(6),e.hij(" ",e.lcZ(37,26,"Actions")," ")}}function it(n,s){1&n&&(e.TgZ(0,"div",55),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const ot=function(){return{"min-width":"50rem"}},lt=["dataTable"],st=["paginator"],L=function(){return["Pages.Administration.Challanges.Cancel","Pages.Administration.Challanges.Edit","Pages.Administration.Challanges.View","Pages.Administration.Challanges.Delete"]};function rt(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",28),e._uU(2),e.ALo(3,"localize"),e._UZ(4,"p-sortIcon",29),e.qZA(),e.TgZ(5,"th",30),e._uU(6),e.ALo(7,"localize"),e.qZA(),e.TgZ(8,"th",31),e._uU(9),e.ALo(10,"localize"),e._UZ(11,"p-sortIcon",32),e.qZA(),e.TgZ(12,"th",33),e._uU(13),e.ALo(14,"localize"),e._UZ(15,"p-sortIcon",34),e.qZA(),e.TgZ(16,"th",30),e._uU(17),e.ALo(18,"localize"),e.qZA(),e.TgZ(19,"th",35),e.ALo(20,"permissionAny"),e._uU(21),e.ALo(22,"localize"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"Title")," "),e.xp6(4),e.hij(" ",e.lcZ(7,9,"Code")," "),e.xp6(3),e.hij(" ",e.lcZ(10,11,"StartDate")," "),e.xp6(4),e.hij(" ",e.lcZ(14,13,"EndDate")," "),e.xp6(4),e.hij(" ",e.lcZ(18,15,"Status")," "),e.xp6(2),e.Q6J("hidden",!e.lcZ(20,17,e.DdM(21,L))),e.xp6(2),e.hij(" ",e.lcZ(22,19,"Actions")," "))}function ct(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",46)(1,"a",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.viewChallange(i.id))}),e._uU(2),e.ALo(3,"localize"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"View")," "))}function pt(n,s){1&n&&(e.TgZ(0,"ul",44),e.YNc(1,ct,4,3,"li",45),e.ALo(2,"permission"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"Pages.Administration.Challanges.View")))}function dt(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td",30)(2,"span",36),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"div",37)(6,"span",38),e._uU(7),e.qZA()()(),e.TgZ(8,"td",30)(9,"span",36),e._uU(10),e.ALo(11,"localize"),e.qZA(),e.TgZ(12,"div",37)(13,"span",38),e._uU(14),e.qZA()()(),e.TgZ(15,"td",30)(16,"span",36),e._uU(17),e.ALo(18,"localize"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"td",30)(21,"span",36),e._uU(22),e.ALo(23,"localize"),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"td",30)(26,"span",36),e._uU(27),e.ALo(28,"localize"),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"td",35),e.ALo(31,"permissionAny"),e.TgZ(32,"div",39)(33,"button",40),e._UZ(34,"i",41)(35,"span",42),e._uU(36),e.ALo(37,"localize"),e.qZA(),e.YNc(38,pt,3,3,"ul",43),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(3),e.Oqu(e.lcZ(4,14,"Title")),e.xp6(3),e.s9C("tooltip",t.title),e.xp6(1),e.hij(" ",t.title," "),e.xp6(3),e.Oqu(e.lcZ(11,16,"Code")),e.xp6(3),e.s9C("tooltip",t.code),e.xp6(1),e.hij(" ",t.code," "),e.xp6(3),e.Oqu(e.lcZ(18,18,"StartDate")),e.xp6(2),e.hij(" ",t.startDate," "),e.xp6(3),e.Oqu(e.lcZ(23,20,"EndDate")),e.xp6(2),e.hij(" ",t.endDate," "),e.xp6(3),e.Oqu(e.lcZ(28,22,"Status")),e.xp6(2),e.hij(" ",t.statusName," "),e.xp6(1),e.Q6J("hidden",!e.lcZ(31,24,e.DdM(28,L))),e.xp6(6),e.hij(" ",e.lcZ(37,26,"Actions")," ")}}function ut(n,s){1&n&&(e.TgZ(0,"div",48),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const gt=function(){return{"min-width":"50rem"}},mt=[{path:"",component:(()=>{class n extends v.c{constructor(t,o,i,a,r,d){super(t),this._challangesServiceProxy=o,this._activatedRoute=i,this._router=a,this._dateTimeService=r,this.fb=d,this.filterText="",this.ChallangeStatusEnum=p.xEq}ngOnInit(){this.getChallangeStatuses(),this.searchForm=this.fb.group({title:[""],startDate:[""],endDate:[""],status:[]})}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getChallangeStatuses(){this._challangesServiceProxy.getChallangeStatusesList().subscribe(t=>{this.statuses=t})}getChallanges(t){this.primengTableHelper.shouldResetPaging(t)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._challangesServiceProxy.getChallanges(new p.QLe({endDate:this.searchForm.get("endDate").value,startDate:this.searchForm.get("startDate").value,status:null==this.searchForm.get("status").value?null:Number(this.searchForm.get("status").value),title:this.searchForm.get("title").value,sorting:this.primengTableHelper.getSorting(this.dataTable),maxResultCount:this.primengTableHelper.getMaxResultCount(this.paginator,t),skipCount:this.primengTableHelper.getSkipCount(this.paginator,t)})).pipe((0,y.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(o=>{this.primengTableHelper.totalRecordsCount=o.totalCount,this.primengTableHelper.records=o.items,this.primengTableHelper.hideLoadingIndicator()}))}reset(){this.searchForm.reset(),this.getChallanges()}reloadPage(){this.paginator.changePage(this.paginator.getPage())}createChallange(){this._router.navigate(["/app/admin/challanges/create"])}editChallange(t){this._router.navigate(["/app/admin/challanges/edit",t])}viewChallange(t){this._router.navigate(["/app/admin/challanges/view",t],{queryParams:{mode:"view"}})}deleteChallange(t){this.message.confirm(this.l("ChallangeDeleteWarningMessage",t.code),this.l("AreYouSure"),o=>{if(o){let i=new p.AGp;i.id=t.id,this.spinnerService.show(),this._challangesServiceProxy.delete(i).subscribe(a=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("SuccessfullyDeleted"))},()=>this.spinnerService.hide())}})}startChallange(t){this.message.confirm(this.l("ChallangeStartWarningMessage",t.code),this.l("AreYouSure"),o=>{if(o){let i=new p.FUO;i.id=t.id,this.spinnerService.show(),this._challangesServiceProxy.startChallange(i).subscribe(a=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("SuccessfullyStarted"))},()=>this.spinnerService.hide())}})}cancelChallange(t){this.message.confirm(this.l("ChallangeCancelWarningMessage",t.code),this.l("AreYouSure"),o=>{if(o){let i=new p.faR;i.id=t.id,this.spinnerService.show(),this._challangesServiceProxy.cancelChallange(i).subscribe(a=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("SuccessfullyCancelled"))},()=>this.spinnerService.hide())}})}announceChallange(t){this.message.confirm(this.l("ChallangeAnnounceWarningMessage",t.code),this.l("AreYouSure"),o=>{if(o){let i=new p.zQw;i.id=t.id,this.spinnerService.show(),this._challangesServiceProxy.announceChallange(i).subscribe(a=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("SuccessfullyAnnounced"))},()=>this.spinnerService.hide())}})}closeChallange(t){this.message.confirm(this.l("ChallangeCloseWarningMessage",t.code),this.l("AreYouSure"),o=>{if(o){let i=new p.yCd;i.id=t.id,this.spinnerService.show(),this._challangesServiceProxy.closeChallange(i).subscribe(a=>{this.spinnerService.hide(),this.reloadPage(),this.notify.success(this.l("Successfullyclosed"))},()=>this.spinnerService.hide())}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(p.uIk),e.Y36(g.gz),e.Y36(g.F0),e.Y36(q.C),e.Y36(l.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(o,i){if(1&o&&(e.Gf(He,7),e.Gf(Ye,7)),2&o){let a;e.iGM(a=e.CRH())&&(i.dataTable=a.first),e.iGM(a=e.CRH())&&(i.paginator=a.first)}},features:[e.qOj],decls:51,vars:35,consts:[[3,"title","description"],["role","actions"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"form",3,"formGroup"],[1,"row","mb-5"],[1,"col-md-6"],["for","Title",1,"form-label"],["type","text","formControlName","title","placeholder","Title",1,"form-control"],["for","Status",1,"form-label"],["formControlName","status",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","StartDate",1,"form-label"],["type","date","formControlName","startDate","placeholder","StartDate",1,"form-control"],["for","EndDate",1,"form-label"],["type","date","formControlName","endDate","placeholder","EndDate",1,"form-control"],[1,"row","justify-content-center","mt-5","mb-5"],["type","button",1,"btn","btn-success","fw-bold","col-md-2",3,"click"],["type","button",1,"btn","btn-warning","fw-bold","col-md-2",3,"click"],[1,"fa","fa-sync","btn-md-icon"],[1,"d-none","d-md-inline-block"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus","btn-md-icon"],[3,"value"],["pSortableColumn","title",2,"min-width","150px"],["field","title"],[2,"min-width","150px"],["pSortableColumn","startTime",2,"min-width","150px"],["field","startTime"],["pSortableColumn","endTime",2,"min-width","150px"],["field","endTime"],[2,"min-width","130px",3,"hidden"],[1,"p-column-title"],[1,"w-100"],[1,"hide-overflown",3,"tooltip"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(o,i){1&o&&(e.TgZ(0,"div")(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"div",1),e.YNc(5,je,5,3,"button",2),e.ALo(6,"permission"),e.qZA()(),e.TgZ(7,"div")(8,"div",3)(9,"div",4)(10,"form",5)(11,"div")(12,"div",6)(13,"div",7)(14,"label",8),e._uU(15,"Title"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",7)(18,"label",10),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"select",11),e.YNc(21,Ee,2,2,"option",12),e.qZA()()(),e.TgZ(22,"div",6)(23,"div",7)(24,"label",13),e._uU(25,"Star tDate"),e.qZA(),e._UZ(26,"input",14),e.qZA(),e.TgZ(27,"div",7)(28,"label",15),e._uU(29,"End Date"),e.qZA(),e._UZ(30,"input",16),e.qZA()(),e.TgZ(31,"div",17)(32,"button",18),e.NdJ("click",function(){return i.getChallanges()}),e._uU(33,"Search"),e.qZA(),e.TgZ(34,"button",19),e.NdJ("click",function(){return i.reset()}),e._UZ(35,"i",20),e._uU(36," \xa0 "),e.TgZ(37,"span",21),e._uU(38),e.ALo(39,"localize"),e.qZA()()()()(),e.TgZ(40,"div",22)(41,"div",23)(42,"p-table",24,25),e.NdJ("onLazyLoad",function(r){return i.getChallanges(r)}),e.YNc(44,Ge,23,22,"ng-template",26),e.YNc(45,nt,39,29,"ng-template",27),e.qZA(),e.YNc(46,it,3,3,"div",28),e.TgZ(47,"div",29)(48,"p-paginator",30,31),e.NdJ("onPageChange",function(r){return i.getChallanges(r)}),e.ALo(50,"localize"),e.qZA()()()()()()()()),2&o&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,23,"Challanges"))("description",e.lcZ(3,25,"ChallangesHeaderInfo")),e.xp6(4),e.Q6J("ngIf",e.lcZ(6,27,"Pages.Administration.Challanges.Create")),e.xp6(2),e.Tol(i.containerClass),e.xp6(3),e.Q6J("formGroup",i.searchForm),e.xp6(11),e.Q6J("ngForOf",i.statuses),e.xp6(17),e.hij(" ",e.lcZ(39,29,"Reset")," "),e.xp6(3),e.Q6J("busyIf",i.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(34,ot))("resizableColumns",i.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",i.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",i.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",i.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(50,31,"TotalRecordsCount",i.primengTableHelper.totalRecordsCount)))},dependencies:[m.sg,m.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,_.Hz,_.Mq,_.TO,M.U,h.iA,A.jx,h.lQ,h.fz,P.D,l.sg,l.u,Q.i9,N.$,Z.F,U.a,k.G],styles:[".dropdown-excel-operations[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{display:block;text-align:left;border-radius:0;transition:none!important;background-color:#fff;color:#181c32!important;font-size:13px!important;font-weight:400!important;margin:0;margin-right:0!important}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose.p-button.p-state-hover[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-focus[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-active[_ngcontent-%COMP%]{background-color:#eee}.dropdown-excel-operations[_ngcontent-%COMP%]{a:hover {span.p-button,div.p-fileupload-buttonbar.p-widget-header.p-corner-top {background-color: #f4f5f8 !important;}} a.no-padding {padding: 0px !important;} a {.p-button-text {margin-left: 5px !important;}} .p-button-label {font-weight: inherit !important;}}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled){border:none}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):hover, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):focus, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):active{background-color:#f4f5f8!important;color:#b2b1c5;box-shadow:none!important;border:none}.dropdown-excel-operations[_ngcontent-%COMP%]{div.p-fileupload-buttonbar {&.p-widget-header.p-corner-top {border: none; background: #fff; padding-bottom: 3px !important; padding-top: 3px !important; &:hover {background-color: #f4f5f8 !important;}}} div.p-fileupload-content {display: none;} div.p-fileupload-content.p-widget-content.p-corner-bottom {display: none;} div.p-fileupload-buttonbar {border: none; padding: 0;} div.p-fileupload-buttonbar.p-widget-header.p-corner-top:hover {background-color: #f4f5f8 !important;}}.p-datatable[_ngcontent-%COMP%]   img.img-circle[_ngcontent-%COMP%]{height:24px;margin-right:5px}#ExportUsersToExcelButton[_ngcontent-%COMP%]{padding-left:12px!important}.hide-overflown[_ngcontent-%COMP%]{display:inline-block;width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}"]})}return n})(),pathMatch:"full"},{path:"review",component:(()=>{class n extends v.c{constructor(t,o,i,a,r,d){super(t),this._challangesServiceProxy=o,this._activatedRoute=i,this._router=a,this._dateTimeService=r,this.fb=d,this.filterText="",this.ChallangeStatusEnum=p.xEq}ngOnInit(){this.searchForm=this.fb.group({title:[""],startDate:[""],endDate:[""]})}ngAfterViewInit(){this.primengTableHelper.adjustScroll(this.dataTable)}getChallanges(t){this.primengTableHelper.shouldResetPaging(t)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._challangesServiceProxy.getChallangesForReview(new p.RYE({endDate:this.searchForm.get("endDate").value,startDate:this.searchForm.get("startDate").value,title:this.searchForm.get("title").value,sorting:this.primengTableHelper.getSorting(this.dataTable),maxResultCount:this.primengTableHelper.getMaxResultCount(this.paginator,t),skipCount:this.primengTableHelper.getSkipCount(this.paginator,t)})).pipe((0,y.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(o=>{this.primengTableHelper.totalRecordsCount=o.totalCount,this.primengTableHelper.records=o.items,this.primengTableHelper.hideLoadingIndicator()}))}reset(){this.searchForm.reset(),this.getChallanges()}reloadPage(){this.paginator.changePage(this.paginator.getPage())}viewChallange(t){this._router.navigate(["/app/admin/challanges/view",t],{queryParams:{mode:"view"}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.zs3),e.Y36(p.uIk),e.Y36(g.gz),e.Y36(g.F0),e.Y36(q.C),e.Y36(l.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-review"]],viewQuery:function(o,i){if(1&o&&(e.Gf(lt,7),e.Gf(st,7)),2&o){let a;e.iGM(a=e.CRH())&&(i.dataTable=a.first),e.iGM(a=e.CRH())&&(i.paginator=a.first)}},features:[e.qOj],decls:43,vars:31,consts:[[3,"title","description"],[1,"card","card-custom","gutter-b"],[1,"card-body"],[1,"form",3,"formGroup"],[1,"row","mb-5"],[1,"col-md-12"],["for","Title",1,"form-label"],["type","text","formControlName","title","placeholder","Title",1,"form-control"],[1,"col-md-6"],["for","StartDate",1,"form-label"],["type","date","formControlName","startDate","placeholder","StartDate",1,"form-control"],["for","EndDate",1,"form-label"],["type","date","formControlName","endDate","placeholder","EndDate",1,"form-control"],[1,"row","justify-content-center","mt-5","mb-5"],["type","button",1,"btn","btn-success","fw-bold","col-md-2",3,"click"],["type","button",1,"btn","btn-warning","fw-bold","col-md-2",3,"click"],[1,"fa","fa-sync","btn-md-icon"],[1,"d-none","d-md-inline-block"],[1,"row","align-items-center"],[1,"primeng-datatable-container",3,"busyIf"],["sortMode","multiple","ScrollWidth","100%","scrollDirection","horizontal",3,"value","rows","paginator","lazy","scrollable","tableStyle","resizableColumns","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],["pSortableColumn","title",2,"min-width","150px"],["field","title"],[2,"min-width","150px"],["pSortableColumn","startTime",2,"min-width","150px"],["field","startTime"],["pSortableColumn","endTime",2,"min-width","150px"],["field","endTime"],[2,"min-width","130px",3,"hidden"],[1,"p-column-title"],[1,"w-100"],[1,"hide-overflown",3,"tooltip"],["dropdown","","placement","bottom left","container","body",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"primeng-no-data"]],template:function(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"div")(5,"div",1)(6,"div",2)(7,"form",3)(8,"div")(9,"div",4)(10,"div",5)(11,"label",6),e._uU(12,"Title"),e.qZA(),e._UZ(13,"input",7),e.qZA()(),e.TgZ(14,"div",4)(15,"div",8)(16,"label",9),e._uU(17,"Star tDate"),e.qZA(),e._UZ(18,"input",10),e.qZA(),e.TgZ(19,"div",8)(20,"label",11),e._uU(21,"End Date"),e.qZA(),e._UZ(22,"input",12),e.qZA()(),e.TgZ(23,"div",13)(24,"button",14),e.NdJ("click",function(){return i.getChallanges()}),e._uU(25,"Search"),e.qZA(),e.TgZ(26,"button",15),e.NdJ("click",function(){return i.reset()}),e._UZ(27,"i",16),e._uU(28," \xa0 "),e.TgZ(29,"span",17),e._uU(30),e.ALo(31,"localize"),e.qZA()()()()(),e.TgZ(32,"div",18)(33,"div",19)(34,"p-table",20,21),e.NdJ("onLazyLoad",function(r){return i.getChallanges(r)}),e.YNc(36,rt,23,22,"ng-template",22),e.YNc(37,dt,39,29,"ng-template",23),e.qZA(),e.YNc(38,ut,3,3,"div",24),e.TgZ(39,"div",25)(40,"p-paginator",26,27),e.NdJ("onPageChange",function(r){return i.getChallanges(r)}),e.ALo(42,"localize"),e.qZA()()()()()()()()),2&o&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,21,"Review Closed Challanges"))("description",e.lcZ(3,23,"ChallangesHeaderInfo")),e.xp6(3),e.Tol(i.containerClass),e.xp6(3),e.Q6J("formGroup",i.searchForm),e.xp6(23),e.hij(" ",e.lcZ(31,25,"Reset")," "),e.xp6(3),e.Q6J("busyIf",i.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("scrollable",!0)("tableStyle",e.DdM(30,gt))("resizableColumns",i.primengTableHelper.resizableColumns),e.xp6(4),e.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",i.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",i.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",i.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(42,27,"TotalRecordsCount",i.primengTableHelper.totalRecordsCount)))},dependencies:[m.O5,l._Y,l.Fj,l.JJ,l.JL,_.Hz,_.Mq,_.TO,M.U,h.iA,A.jx,h.lQ,h.fz,P.D,l.sg,l.u,Q.i9,N.$,Z.F,U.a,k.G],styles:[".dropdown-excel-operations[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{display:block;text-align:left;border-radius:0;transition:none!important;background-color:#fff;color:#181c32!important;font-size:13px!important;font-weight:400!important;margin:0;margin-right:0!important}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose.p-button.p-state-hover[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-focus[_ngcontent-%COMP%], .p-fileupload-choose.p-button.p-state-active[_ngcontent-%COMP%]{background-color:#eee}.dropdown-excel-operations[_ngcontent-%COMP%]{a:hover {span.p-button,div.p-fileupload-buttonbar.p-widget-header.p-corner-top {background-color: #f4f5f8 !important;}} a.no-padding {padding: 0px !important;} a {.p-button-text {margin-left: 5px !important;}} .p-button-label {font-weight: inherit !important;}}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled){border:none}.dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):hover, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):focus, .dropdown-excel-operations[_ngcontent-%COMP%]   .p-fileupload-choose[_ngcontent-%COMP%]:not(.p-state-disabled):active{background-color:#f4f5f8!important;color:#b2b1c5;box-shadow:none!important;border:none}.dropdown-excel-operations[_ngcontent-%COMP%]{div.p-fileupload-buttonbar {&.p-widget-header.p-corner-top {border: none; background: #fff; padding-bottom: 3px !important; padding-top: 3px !important; &:hover {background-color: #f4f5f8 !important;}}} div.p-fileupload-content {display: none;} div.p-fileupload-content.p-widget-content.p-corner-bottom {display: none;} div.p-fileupload-buttonbar {border: none; padding: 0;} div.p-fileupload-buttonbar.p-widget-header.p-corner-top:hover {background-color: #f4f5f8 !important;}}.p-datatable[_ngcontent-%COMP%]   img.img-circle[_ngcontent-%COMP%]{height:24px;margin-right:5px}#ExportUsersToExcelButton[_ngcontent-%COMP%]{padding-left:12px!important}.hide-overflown[_ngcontent-%COMP%]{display:inline-block;width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}"]})}return n})(),pathMatch:"full"},{path:"edit/:id",component:F,pathMatch:"full"},{path:"view/:id",component:F,pathMatch:"full"},{path:"create",component:F,pathMatch:"full"}];let ht=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(mt),g.Bz]})}return n})();var _t=c(92337),ft=c(71902);let bt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[m.ez,_t.o,ft.g,ht]})}return n})()},83410:(z,w,c)=>{c.d(w,{a:()=>l});var m=c(50387),g=c(99468);let l=(()=>{class p{constructor(b){this.permission=b.get(m.qT)}transform(b){return this.permission.isGranted(b)}static#e=this.\u0275fac=function(e){return new(e||p)(g.Y36(g.zs3,16))};static#t=this.\u0275pipe=g.Yjl({name:"permission",type:p,pure:!0})}return p})()}}]);