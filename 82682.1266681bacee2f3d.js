"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[82682],{82682:(T,c,n)=>{n.r(c),n.d(c,{SessionLockScreenModule:()=>x});var d=n(92337),u=n(91860),p=n(70916),f=n(41840),g=n(47530),m=n(15047),e=n(99468),h=n(44328),v=n(13368),S=n(20005),b=n(96814),r=n(56223),Z=n(42152),M=n(3291);function y(t,I){if(1&t&&e._UZ(0,"img",25),2&t){const s=e.oxw();e.Q6J("src",s.userInfo.profilePicture,e.LSH)}}function C(t,I){if(1&t&&e._UZ(0,"validation-messages",26),2&t){e.oxw();const s=e.MAs(25);e.Q6J("formCtrl",s)}}const A=[{path:"",component:(()=>{class t extends f.c{constructor(s,o,i,a){super(s),this._profileService=o,this.loginService=i,this._recaptchaWrapperService=a,this.submitting=!1,this.getLastUserInfo()}ngAfterViewInit(){this._recaptchaWrapperService.setCaptchaVisibilityOnLogin()}getLastUserInfo(){let s=abp.utils.getCookieValue("userInfo");s||(location.href="");let o=JSON.parse(s);o||(location.href=""),this.loginService.authenticateModel.userNameOrEmailAddress=o.userName,this.userInfo={userName:o.userName,tenant:o.tenant,profilePicture:""},this._profileService.getProfilePictureByUserName(o.userName).subscribe(i=>{this.userInfo.profilePicture=i.profilePicture?"data:image/jpeg;base64,"+i.profilePicture:m.g.appBaseUrl+"/assets/common/images/default-profile-picture.png"},()=>{this.userInfo.profilePicture=m.g.appBaseUrl+"/assets/common/images/default-profile-picture.png"})}login(){let s=o=>{this.showMainSpinner(),this.submitting=!0,this.loginService.authenticate(()=>{this.submitting=!1,this.hideMainSpinner()},null,o)};this._recaptchaWrapperService.useCaptchaOnLogin()?this._recaptchaWrapperService.getService().execute("login").subscribe(o=>s(o)):s(null)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(e.zs3),e.Y36(h.qAB),e.Y36(v.r),e.Y36(S.o))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-session-lock-screen"]],features:[e.qOj],decls:38,vars:20,consts:[[1,"card","card-bordered","gutter-b","card-stretch"],[1,"card-body","text-center","pt-4"],["role","alert",1,"alert","bg-light-primary"],[1,"alert-text",2,"font-weight","bold"],[1,"fa","fa-lock","float-end","mt-1","me-5"],[1,"mt-7","pb-2"],[1,"symbol","symbol-circle","symbol-lg-75"],["class","symbol-label","alt","profileimage",3,"src",4,"ngIf"],[1,"my-2"],["href","#",1,"text-dark","fw-bold","text-hover-primary","fs-h4"],[1,"text-dark","fw-normal","fs-h4"],[1,"text-dark","fw-bold"],["method","post","novalidate","",1,"form","mt-4",3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-5"],["type","hidden","name","usernameOrEmailAddress"],["type","password","autocomplete","new-password","name","password","required","","maxlength","32",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","ngModelChange"],["passwordInput","ngModel"],[3,"formCtrl",4,"ngIf"],[1,"mt-9","mb-6"],[1,"col-5","mt-2","float-start"],[1,"form-check","form-check-custom","form-check-solid","py-1"],["type","checkbox","name","rememberMe","value","true",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","submit",1,"btn","btn-primary","fw-bolder","fs-h6","col-5","float-end",3,"disabled"],["alt","profileimage",1,"symbol-label",3,"src"],[3,"formCtrl"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"localize"),e._UZ(6,"i",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e.YNc(9,y,1,1,"img",7),e.qZA()(),e.TgZ(10,"div",8)(11,"a",9),e._uU(12),e.qZA()(),e.TgZ(13,"div",8)(14,"span",10),e._uU(15," Tenant: "),e.TgZ(16,"span",11),e._uU(17),e.qZA()()(),e.TgZ(18,"form",12,13),e.NdJ("ngSubmit",function(){return i.login()}),e.TgZ(20,"div",8)(21,"div",14),e._UZ(22,"input",15),e.qZA(),e.TgZ(23,"div",14)(24,"input",16,17),e.NdJ("ngModelChange",function(l){return i.loginService.authenticateModel.password=l}),e.ALo(26,"localize"),e.qZA(),e.YNc(27,C,1,1,"validation-messages",18),e.qZA()(),e.TgZ(28,"div",19)(29,"div",20)(30,"label",21)(31,"input",22),e.NdJ("ngModelChange",function(l){return i.loginService.rememberMe=l}),e.qZA(),e.TgZ(32,"span",23),e._uU(33),e.ALo(34,"localize"),e.qZA()()(),e.TgZ(35,"button",24),e._uU(36),e.ALo(37,"localize"),e.qZA()()()()()),2&o){const a=e.MAs(19),l=e.MAs(25);e.Q6J("@routerTransition",void 0),e.xp6(4),e.hij(" ",e.lcZ(5,12,"YourSessionIsLocked")," "),e.xp6(5),e.Q6J("ngIf",i.userInfo&&i.userInfo.profilePicture),e.xp6(3),e.Oqu(i.userInfo.userName),e.xp6(5),e.Oqu(i.userInfo.tenant),e.xp6(7),e.MGl("placeholder","",e.lcZ(26,14,"Password"),"*"),e.Q6J("ngModel",i.loginService.authenticateModel.password),e.xp6(3),e.Q6J("ngIf",!l.touched),e.xp6(4),e.Q6J("ngModel",i.loginService.rememberMe),e.xp6(2),e.hij(" ",e.lcZ(34,16,"RememberMe")," "),e.xp6(2),e.Q6J("disabled",!a.form.valid),e.xp6(1),e.hij(" ",e.lcZ(37,18,"LogIn")," ")}},dependencies:[b.O5,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.Q7,r.nD,r.On,r.F,Z.s,M.F],styles:["app-session-lock-screen[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}"],data:{animation:[(0,g.RP)()]}})}return t})()}];let L=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(A),p.Bz]})}return t})(),x=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[d.o,u.y,L]})}return t})()}}]);