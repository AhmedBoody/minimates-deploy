"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[18069],{18069:(lt,b,s)=>{s.r(b),s.d(b,{WebhookSubscriptionDetailModule:()=>st});var g=s(71902),m=s(92337),h=s(68565),c=s(70916),f=s(41840),p=s(44328),v=s(47530),d=s(68989),t=s(99468),_=s(96814),Z=s(12051),u=s(72500),A=s(94901),T=s(68027),x=s(85219),S=s(51712),k=s(85082),w=s(88922),C=s(3291),W=s(83410);const M=["createOrEditWebhookSubscriptionModal"],D=["paginator"],q=["detailModal"];function y(e,a){1&e&&(t.TgZ(0,"span",31),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active")," "))}function L(e,a){1&e&&(t.TgZ(0,"span",32),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Disabled")," "))}function I(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"li",40)(1,"a",41),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(3),l=t.MAs(34);return t.KtG(l.show(i.subscription.id))}),t._uU(2),t.ALo(3,"localize"),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"EditWebhookSubscription")," "))}function O(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Disable")))}function P(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Enable")))}function J(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"li",40)(1,"a",41),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(3);return t.KtG(i.toggleActivity())}),t.YNc(2,O,3,3,"span",42),t.YNc(3,P,3,3,"span",42),t.qZA()()}if(2&e){const o=t.oxw(3);t.xp6(2),t.Q6J("ngIf",o.subscription.isActive),t.xp6(1),t.Q6J("ngIf",!o.subscription.isActive)}}function U(e,a){if(1&e&&(t.TgZ(0,"ul",38),t.YNc(1,I,4,3,"li",39),t.ALo(2,"permission"),t.YNc(3,J,4,2,"li",39),t.ALo(4,"permission"),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,"Pages.Administration.WebhookSubscription.Edit")&&o.subscription),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,"Pages.Administration.WebhookSubscription.ChangeActivity"))}}function N(e,a){1&e&&(t.TgZ(0,"div",33)(1,"button",34),t._UZ(2,"i",35)(3,"span",36),t.qZA(),t.YNc(4,U,5,6,"ul",37),t.qZA())}function z(e,a){if(1&e&&(t.TgZ(0,"div",50),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o," ")}}function H(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,z,2,1,"div",49),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.subscription.webhooks)}}function Y(e,a){if(1&e&&(t.TgZ(0,"div",50),t._uU(1),t.qZA()),2&e){const o=a.$implicit,n=t.oxw(3);t.xp6(1),t.AsE(' "',o,'" : "',n.subscription.headers[o],'" ')}}function Q(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Y,2,2,"div",49),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.objectKeys(o.subscription.headers))}}function j(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.viewSecret())}),t._uU(1),t.ALo(2,"localize"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ViewWebhookSecret")," "))}function R(e,a){if(1&e&&(t.TgZ(0,"div",13)(1,"div",43)(2,"label",44),t._uU(3),t.ALo(4,"localize"),t.qZA(),t.TgZ(5,"div",45),t._uU(6),t.qZA()(),t.TgZ(7,"div",43)(8,"label",44),t._uU(9),t.ALo(10,"localize"),t.qZA(),t.TgZ(11,"div",45),t.YNc(12,H,2,1,"div",42),t.qZA()(),t.TgZ(13,"div",43)(14,"label",44),t._uU(15),t.ALo(16,"localize"),t.qZA(),t.TgZ(17,"div",45),t.YNc(18,Q,2,1,"div",42),t.qZA()(),t.TgZ(19,"div",46)(20,"label",44),t._uU(21),t.ALo(22,"localize"),t.qZA(),t.TgZ(23,"div",47)(24,"span"),t._uU(25),t.qZA(),t.YNc(26,j,3,3,"button",48),t.qZA()()()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"WebhookEndpoint")),t.xp6(3),t.hij(" ",o.subscription.webhookUri," "),t.xp6(3),t.Oqu(t.lcZ(10,13,"WebhookEvents")),t.xp6(3),t.Q6J("ngIf",o.subscription.webhooks),t.xp6(3),t.Oqu(t.lcZ(16,15,"AdditionalWebhookHeaders")),t.xp6(3),t.Q6J("ngIf",o.subscription.headers),t.xp6(3),t.Oqu(t.lcZ(22,17,"WebhookSecret")),t.xp6(3),t.ekj("blur",o.isSecretBlurActive),t.xp6(1),t.Oqu(o.subscription.secret),t.xp6(1),t.Q6J("ngIf",o.isSecretBlurActive)}}function E(e,a){1&e&&(t.TgZ(0,"tr")(1,"th",52),t._uU(2),t.ALo(3,"localize"),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"localize"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"localize"),t.qZA(),t.TgZ(10,"th",53),t._uU(11),t.ALo(12,"localize"),t.qZA(),t.TgZ(13,"th",54),t._uU(14),t.ALo(15,"localize"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"localize"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"localize"),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"Actions")),t.xp6(3),t.Oqu(t.lcZ(6,9,"WebhookEvent")),t.xp6(3),t.Oqu(t.lcZ(9,11,"WebhookEventId")),t.xp6(3),t.Oqu(t.lcZ(12,13,"CreationTime")),t.xp6(3),t.Oqu(t.lcZ(15,15,"HttpStatusCode")),t.xp6(3),t.Oqu(t.lcZ(18,17,"Response")),t.xp6(3),t.Oqu(t.lcZ(21,19,"Data")))}function F(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"li",40)(1,"a",41),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(3).$implicit,l=t.oxw();return t.KtG(l.resend(i.id))}),t._uU(2),t.ALo(3,"localize"),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Resend")," "))}function B(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"li",40)(1,"a",41),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(3).$implicit,l=t.oxw();return t.KtG(l.goToWebhookDetail(i.webhookEventId))}),t._uU(2),t.ALo(3,"localize"),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"ViewWebhookEvent")," "))}function G(e,a){1&e&&(t.TgZ(0,"ul",60),t.YNc(1,F,4,3,"li",39),t.ALo(2,"permission"),t.YNc(3,B,4,3,"li",39),t.ALo(4,"permission"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,"Pages.Administration.Webhook.ResendWebhook")),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,"Pages.Administration.WebhookSubscription.ChangeActivity")))}function $(e,a){1&e&&(t.TgZ(0,"div",57)(1,"button",58),t._UZ(2,"i",35)(3,"span",36),t.qZA(),t.YNc(4,G,5,6,"ul",59),t.qZA())}function K(e,a){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.response," ")}}function V(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"span")(1,"button",61),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.showDetailModal(i.response))}),t._uU(2),t.ALo(3,"localize"),t.qZA()()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"ShowResponse")," "))}function X(e,a){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.data," ")}}function tt(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"span")(1,"div",62),t._uU(2),t.qZA(),t.TgZ(3,"button",61),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.showDetailModal(i.data))}),t._uU(4),t.ALo(5,"localize"),t.qZA()()}if(2&e){const o=t.oxw().$implicit;t.xp6(2),t.Oqu(o.data),t.xp6(2),t.hij(" ",t.lcZ(5,2,"ShowData")," ")}}function et(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t.YNc(2,$,5,0,"div",55),t.ALo(3,"permission"),t.ALo(4,"permission"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"luxonFormat"),t.qZA(),t.TgZ(12,"td",56),t._uU(13),t.qZA(),t.TgZ(14,"td"),t.YNc(15,K,2,1,"span",42),t.YNc(16,V,4,3,"span",42),t.qZA(),t.TgZ(17,"td"),t.YNc(18,X,2,1,"span",42),t.YNc(19,tt,6,4,"span",42),t.qZA()()),2&e){const o=a.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.subscription&&t.lcZ(3,9,"Pages.Administration.WebhookSubscription.Edit")||t.lcZ(4,11,"Pages.Administration.WebhookSubscription.ChangeActivity")),t.xp6(4),t.hij(" ",o.webhookName," "),t.xp6(2),t.hij(" ",o.webhookEventId," "),t.xp6(2),t.hij(" ",t.xi3(11,13,o.creationTime,"yyyy-LL-dd HH:mm:ss")," "),t.xp6(3),t.hij(" ",o.responseStatusCode," "),t.xp6(2),t.Q6J("ngIf",(null==o||null==o.response?null:o.response.length)<=n.listMaxDataLength),t.xp6(1),t.Q6J("ngIf",(null==o||null==o.response?null:o.response.length)>n.listMaxDataLength),t.xp6(2),t.Q6J("ngIf",o.data.length<=n.listMaxDataLength),t.xp6(1),t.Q6J("ngIf",o.data.length>n.listMaxDataLength)}}function ot(e,a){1&e&&(t.TgZ(0,"div",63),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NoData")," "))}const it=function(){return{"min-width":"50rem"}},nt=[{path:"",component:(()=>{class e extends f.c{constructor(o,n,i,l,r){super(o),this._webhookSubscriptionService=n,this._webhookSendAttemptService=i,this._router=l,this._activatedRoute=r,this.subscriptionId="",this.loading=!0,this.isSecretBlurActive=!0,this.objectKeys=Object.keys,this.listMaxDataLength=100,this.detailModalText="",this.breadcrumbs=[new d.g(this.l("WebhookSubscriptions"),"/app/admin/webhook-subscriptions"),new d.g(this.l("WebhookSubscriptionDetail"))]}ngOnInit(){this.subscriptionId=this._activatedRoute.snapshot.queryParams.id,this.getDetail()}getSendAttempts(o){this.primengTableHelper.shouldResetPaging(o)&&(this.paginator.changePage(0),this.primengTableHelper.records&&this.primengTableHelper.records.length>0)||(this.primengTableHelper.showLoadingIndicator(),this._webhookSendAttemptService.getAllSendAttempts(this.subscriptionId,this.primengTableHelper.getMaxResultCount(this.paginator,o),this.primengTableHelper.getSkipCount(this.paginator,o)).subscribe(n=>{this.primengTableHelper.totalRecordsCount=n.totalCount,this.primengTableHelper.records=n.items,this.primengTableHelper.hideLoadingIndicator()}))}editSubscription(){this.createOrEditWebhookSubscriptionModal.show()}getDetail(){this._webhookSubscriptionService.getSubscription(this.subscriptionId).subscribe(o=>{this.subscription=o,this.loading=!1})}toggleActivity(){let o=this.l(this.subscription.isActive?"DeactivateSubscriptionWarningMessage":"ActivateSubscriptionWarningMessage");this.message.confirm(o,this.l("AreYouSure"),n=>{if(n){let i=new p.pWf;i.subscriptionId=this.subscription.id,i.isActive=!this.subscription.isActive,this._webhookSubscriptionService.activateWebhookSubscription(i).subscribe(()=>{this.subscription.isActive=!this.subscription.isActive})}})}viewSecret(){this.isSecretBlurActive=!1}goToWebhookDetail(o){this._router.navigate(["app/admin/webhook-event-detail"],{queryParams:{id:o}})}resend(o){this.message.confirm(this.l("WebhookEventWillBeSendWithSameParameters"),this.l("AreYouSure"),n=>{n&&(this.showMainSpinner(),this._webhookSendAttemptService.resend(o).subscribe(()=>{abp.notify.success(this.l("WebhookSendAttemptInQueue")),this.hideMainSpinner()},i=>{this.hideMainSpinner()}))})}showDetailModal(o){this.detailModalText=o,this.detailModal.show()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(t.zs3),t.Y36(p.NpR),t.Y36(p.JYj),t.Y36(c.F0),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&(t.Gf(M,7),t.Gf(D,7),t.Gf(q,7)),2&n){let l;t.iGM(l=t.CRH())&&(i.createOrEditWebhookSubscriptionModal=l.first),t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.detailModal=l.first)}},features:[t.qOj],decls:41,vars:35,consts:[[3,"title","breadcrumbs"],["role","actions"],["class","badge badge-success me-2",4,"ngIf"],["class","badge badge-dark me-2",4,"ngIf"],["class","btn-group","dropdown","","placement","bottom right",4,"ngIf"],[1,"card","card-custom","gutter-b"],["class","card-body",4,"ngIf"],[1,"card-header","align-items-center","border-0","mt-4"],[1,"card-title","align-items-start","flex-column"],[1,"fw-bolder","text-dark"],[1,"card-toolbar"],[1,"btn","btn-outline-brand","btn-sm","btn-icon","btn-icon-md",3,"click"],[1,"flaticon2-refresh"],[1,"card-body"],[1,"row","align-items-center"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["createOrEditWebhookSubscriptionModal",""],["bsModal","","id","detailModal","tabindex","-1","role","dialog","aria-labelledby","detailModal","aria-hidden","true",1,"modal","fade"],["detailModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"badge","badge-success","me-2"],[1,"badge","badge-dark","me-2"],["dropdown","","placement","bottom right",1,"btn-group"],["id","dropdownButton01","type","button","dropdownToggle","","aria-controls","dropdownMenu01",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu01","class","dropdown-menu dropdown-menu-right","role","menu","aria-labelledby","dropdownButton01",4,"dropdownMenu"],["id","dropdownMenu01","role","menu","aria-labelledby","dropdownButton01",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[4,"ngIf"],[1,"mb-5","row"],[1,"col-2","col-form-label"],[1,"col-10","text-break","mt-2"],[1,"row","mb-0"],[1,"col-10","position-relative","mt-2"],["class","btn btn-sm btn-dark btn-elevate btn-elevate-air secret-view-btn",3,"click",4,"ngIf"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"btn","btn-sm","btn-dark","btn-elevate","btn-elevate-air","secret-view-btn",3,"click"],[2,"width","100px"],[2,"width","180px"],[2,"width","130px"],["class","btn-group","dropdown","","placement","bottom left",4,"ngIf"],[2,"text-align","center"],["dropdown","","placement","bottom left",1,"btn-group"],["id","dropdownButton02","type","button","dropdownToggle","","aria-controls","dropdownMenu02",1,"btn","btn-primary","btn-sm","dropdown-toggle"],["id","dropdownMenu02","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton02",4,"dropdownMenu"],["id","dropdownMenu02","role","menu","aria-labelledby","dropdownButton02",1,"dropdown-menu"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"d-none"],[1,"primeng-no-data"]],template:function(n,i){1&n&&(t.TgZ(0,"div")(1,"sub-header",0),t.ALo(2,"localize"),t.TgZ(3,"div",1),t.YNc(4,y,3,3,"span",2),t.YNc(5,L,3,3,"span",3),t.YNc(6,N,5,0,"div",4),t.ALo(7,"permission"),t.ALo(8,"permission"),t.qZA()(),t.TgZ(9,"div")(10,"div",5),t.YNc(11,R,27,19,"div",6),t.qZA(),t.TgZ(12,"div",5)(13,"div",7)(14,"h3",8)(15,"span",9),t._uU(16),t.ALo(17,"localize"),t.qZA()(),t.TgZ(18,"div",10)(19,"button",11),t.NdJ("click",function(){return i.getSendAttempts()}),t._UZ(20,"i",12),t.qZA()()(),t.TgZ(21,"div",13)(22,"div",14)(23,"div",15)(24,"p-table",16,17),t.NdJ("onLazyLoad",function(r){return i.getSendAttempts(r)}),t.YNc(26,E,22,21,"ng-template",18),t.YNc(27,et,20,16,"ng-template",19),t.qZA(),t.YNc(28,ot,3,3,"div",20),t.TgZ(29,"div",21)(30,"p-paginator",22,23),t.NdJ("onPageChange",function(r){return i.getSendAttempts(r)}),t.ALo(32,"localize"),t.qZA()()()()()(),t.TgZ(33,"create-or-edit-webhook-subscription",24,25),t.NdJ("modalSave",function(){return i.getDetail()}),t.qZA(),t.TgZ(35,"div",26,27)(37,"div",28)(38,"div",29)(39,"div",30),t._uU(40),t.qZA()()()()()()),2&n&&(t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("title",t.lcZ(2,23,"WebhookSubscriptions"))("breadcrumbs",i.breadcrumbs),t.xp6(3),t.Q6J("ngIf",i.subscription&&i.subscription.isActive),t.xp6(1),t.Q6J("ngIf",i.subscription&&!i.subscription.isActive),t.xp6(1),t.Q6J("ngIf",i.subscription&&t.lcZ(7,25,"Pages.Administration.WebhookSubscription.Edit")||t.lcZ(8,27,"Pages.Administration.WebhookSubscription.ChangeActivity")),t.xp6(3),t.Tol(i.containerClass),t.xp6(2),t.Q6J("ngIf",i.subscription),t.xp6(5),t.Oqu(t.lcZ(17,29,"WebhookSendAttempts")),t.xp6(7),t.Q6J("busyIf",i.primengTableHelper.isLoading),t.xp6(1),t.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),t.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",t.DdM(34,it)),t.xp6(4),t.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),t.xp6(2),t.Q6J("rows",i.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",i.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",i.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",t.xi3(32,31,"TotalRecordsCount",i.primengTableHelper.totalRecordsCount)),t.xp6(10),t.hij(" ",i.detailModalText," "))},dependencies:[_.sg,_.O5,Z.oB,u.Hz,u.Mq,u.TO,A.U,T.iA,x.jx,S.D,d.$,k.s,w.n,C.F,W.a],styles:[".blur[_ngcontent-%COMP%]{filter:blur(10px)}.secret-view-btn[_ngcontent-%COMP%]{position:absolute;top:0;left:20px;cursor:pointer}#portlet-detail[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px}.primeng-datatable-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .primeng-datatable-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}#detailModal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[(0,v.MH)()]}})}return e})(),pathMatch:"full"}];let at=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(nt),c.Bz]})}return e})(),st=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[m.o,g.g,at,h.WebhookSubscriptionModule]})}return e})()}}]);