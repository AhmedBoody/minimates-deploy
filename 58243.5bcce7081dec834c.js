"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[58243],{58243:(Y,p,a)=>{a.r(p),a.d(p,{WebhookEventDetailModule:()=>H});var h=a(71902),u=a(92337),s=a(70916),b=a(41840),g=a(47530),t=a(99468),m=a(44328),v=a(96814),_=a(12051),r=a(72500),Z=a(94901),x=a(68027),f=a(85219),T=a(68989),A=a(85082),k=a(88922),w=a(3291),M=a(83410);const E=["detailModal"];function C(o,d){if(1&o&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.webhookEvent.data," ")}}function D(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"p")(2,"span",30),t._uU(3),t.qZA(),t.TgZ(4,"span",31),t._uU(5),t.qZA()(),t.TgZ(6,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showMoreData())}),t._uU(7),t.ALo(8,"localize"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij("",e.webhookEvent.data.slice(0,e.maxDataLength),". . ."),t.xp6(2),t.hij(" ",e.webhookEvent.data," "),t.xp6(2),t.hij(" ",t.lcZ(8,3,"ShowData")," ")}}function y(o,d){if(1&o&&(t.TgZ(0,"div",9)(1,"div",24)(2,"label",25),t._uU(3),t.ALo(4,"localize"),t.qZA(),t.TgZ(5,"div",26),t._uU(6),t.qZA()(),t.TgZ(7,"div",24)(8,"label",25),t._uU(9),t.ALo(10,"localize"),t.qZA(),t.TgZ(11,"div",26),t._uU(12),t.ALo(13,"luxonFormat"),t.qZA()(),t.TgZ(14,"div",27)(15,"label",25),t._uU(16),t.ALo(17,"localize"),t.qZA(),t.YNc(18,C,2,1,"div",28),t.YNc(19,D,9,5,"div",28),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,7,"WebhookEvent")),t.xp6(3),t.hij(" ",e.webhookEvent.webhookName," "),t.xp6(3),t.Oqu(t.lcZ(10,9,"CreationTime")),t.xp6(3),t.hij(" ",t.xi3(13,11,e.webhookEvent.creationTime,"F")," "),t.xp6(4),t.Oqu(t.lcZ(17,14,"Data")),t.xp6(2),t.Q6J("ngIf",e.webhookEvent.data.length<=e.maxDataLength),t.xp6(1),t.Q6J("ngIf",e.webhookEvent.data.length>e.maxDataLength)}}function S(o,d){1&o&&(t.TgZ(0,"tr")(1,"th",33),t._uU(2),t.ALo(3,"localize"),t.qZA(),t.TgZ(4,"th",34),t._uU(5),t.ALo(6,"localize"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"localize"),t.qZA(),t.TgZ(10,"th",35),t._uU(11),t.ALo(12,"localize"),t.qZA(),t.TgZ(13,"th",36),t._uU(14),t.ALo(15,"localize"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"localize"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"Actions")),t.xp6(3),t.Oqu(t.lcZ(6,8,"WebhookSubscriptionId")),t.xp6(3),t.Oqu(t.lcZ(9,10,"WebhookEndpoint")),t.xp6(3),t.Oqu(t.lcZ(12,12,"CreationTime")),t.xp6(3),t.Oqu(t.lcZ(15,14,"HttpStatusCode")),t.xp6(3),t.Oqu(t.lcZ(18,16,"Response")))}function L(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"li",45)(1,"a",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.resend(i.id))}),t._uU(2),t.ALo(3,"localize"),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Resend")," "))}function W(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ul",43),t.YNc(1,L,4,3,"li",44),t.ALo(2,"permission"),t.TgZ(3,"li",45)(4,"a",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.goToWebhookSubscriptionDetail(i.webhookSubscriptionId))}),t._uU(5),t.ALo(6,"localize"),t.qZA()()()}2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,"Pages.Administration.Webhook.ResendWebhook")),t.xp6(4),t.hij(" ",t.lcZ(6,4,"GoToSubscription")," "))}function U(o,d){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.response," ")}}function q(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"span")(1,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.showDetailModal(i.response))}),t._uU(2),t.ALo(3,"localize"),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"ShowResponse")," "))}function z(o,d){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"div",37)(3,"button",38),t._UZ(4,"i",39)(5,"span",40),t.qZA(),t.YNc(6,W,7,6,"ul",41),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"luxonFormat"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.YNc(17,U,2,1,"span",42),t.YNc(18,q,4,3,"span",42),t.qZA()()),2&o){const e=d.$implicit,n=t.oxw();t.xp6(8),t.hij(" ",e.webhookSubscriptionId," "),t.xp6(2),t.hij(" ",e.webhookUri," "),t.xp6(2),t.hij(" ",t.xi3(13,6,e.creationTime,"yyyy-LL-dd HH:mm:ss")," "),t.xp6(3),t.hij(" ",e.responseStatusCode," "),t.xp6(2),t.Q6J("ngIf",(null==e||null==e.response?null:e.response.length)<=n.listMaxResponseLength),t.xp6(1),t.Q6J("ngIf",(null==e||null==e.response?null:e.response.length)>n.listMaxResponseLength)}}function I(o,d){1&o&&(t.TgZ(0,"div",48),t._uU(1),t.ALo(2,"localize"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NoData")," "))}const O=function(){return{"min-width":"50rem"}},j=[{path:"",component:(()=>{class o extends b.c{constructor(e,n,i,l,c){super(e),this._webhookEventService=n,this._webhookSendAttemptService=i,this._router=l,this._activatedRoute=c,this.loading=!0,this.maxDataLength=300,this.listMaxResponseLength=100,this.detailModalText=""}ngOnInit(){this.webhookEventId=this._activatedRoute.snapshot.queryParams.id,this.getDetail()}getSendAttempts(e){this.primengTableHelper.showLoadingIndicator(),this._webhookSendAttemptService.getAllSendAttemptsOfWebhookEvent(this.webhookEventId).subscribe(n=>{this.primengTableHelper.totalRecordsCount=n.items.length,this.primengTableHelper.records=n.items,this.primengTableHelper.hideLoadingIndicator()})}getDetail(){this._webhookEventService.get(this.webhookEventId).subscribe(e=>{this.webhookEvent=e,this.loading=!1})}goToWebhookSubscriptionDetail(e){this._router.navigate(["app/admin/webhook-subscriptions-detail"],{queryParams:{id:e}})}resend(e){this.message.confirm(this.l("WebhookEventWillBeSendWithSameParameters"),this.l("AreYouSure"),n=>{n&&(this.showMainSpinner(),this._webhookSendAttemptService.resend(e).subscribe(()=>{abp.notify.success(this.l("WebhookSendAttemptInQueue")),this.hideMainSpinner()},()=>{this.hideMainSpinner()}))})}showDetailModal(e){this.detailModalText=e,this.detailModal.show()}showMoreData(){document.getElementById("dataDots").classList.add("d-none"),document.getElementById("dataShowMoreBtn").classList.add("d-none"),document.getElementById("dataMore").classList.remove("d-none")}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.zs3),t.Y36(m.mVG),t.Y36(m.JYj),t.Y36(s.F0),t.Y36(s.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(n,i){if(1&n&&t.Gf(E,7),2&n){let l;t.iGM(l=t.CRH())&&(i.detailModal=l.first)}},features:[t.qOj],decls:31,vars:19,consts:[[3,"title"],[1,"card","card-custom","gutter-b"],["class","card-body",4,"ngIf"],[1,"card-header","align-items-center","border-0","mt-4"],[1,"card-title","align-items-start","flex-column"],[1,"fw-bolder","text-dark"],[1,"card-toolbar"],[1,"btn","btn-outline-brand","btn-sm","btn-icon","btn-icon-md",3,"click"],[1,"flaticon2-refresh"],[1,"card-body"],[1,"row","align-items-center"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[3,"modalSave"],["createOrEditWebhookSubscriptionModal",""],["bsModal","","id","detailModal","tabindex","-1","role","dialog","aria-labelledby","detailModal","aria-hidden","true",1,"modal","fade"],["detailModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"mb-5","row"],[1,"col-2","col-form-label"],[1,"col-10"],[1,"row","mb-2"],["class","col-10 text-break",4,"ngIf"],[1,"col-10","text-break"],["id","dataDots"],["id","dataMore",1,"d-none"],["id","dataShowMoreBtn",1,"btn","btn-outline-primary","btn-sm",3,"click"],[2,"width","100px"],[2,"width","320px"],[2,"width","180px"],[2,"width","130px"],["dropdown","","placement","bottom left",1,"btn-group"],["id","dropdownButton","type","button","dropdownToggle","","aria-controls","dropdownMenu",1,"btn","btn-primary","btn-sm","dropdown-toggle"],[1,"fa","fa-cog"],[1,"caret"],["id","dropdownMenu","class","dropdown-menu","role","menu","aria-labelledby","dropdownButton",4,"dropdownMenu"],[4,"ngIf"],["id","dropdownMenu","role","menu","aria-labelledby","dropdownButton",1,"dropdown-menu"],["role","menuitem",4,"ngIf"],["role","menuitem"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"primeng-no-data"]],template:function(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"sub-header",0),t.ALo(2,"localize"),t.TgZ(3,"div")(4,"div",1),t.YNc(5,y,20,16,"div",2),t.qZA(),t.TgZ(6,"div",1)(7,"div",3)(8,"h3",4)(9,"span",5),t._uU(10),t.ALo(11,"localize"),t.qZA()(),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return i.getSendAttempts()}),t._UZ(14,"i",8),t.qZA()()(),t.TgZ(15,"div",9)(16,"div",10)(17,"div",11)(18,"p-table",12,13),t.NdJ("onLazyLoad",function(c){return i.getSendAttempts(c)}),t.YNc(20,S,19,18,"ng-template",14),t.YNc(21,z,19,9,"ng-template",15),t.qZA(),t.YNc(22,I,3,3,"div",16),t.qZA()()()(),t.TgZ(23,"create-or-edit-webhook-subscription",17,18),t.NdJ("modalSave",function(){return i.getDetail()}),t.qZA(),t.TgZ(25,"div",19,20)(27,"div",21)(28,"div",22)(29,"div",23),t._uU(30),t.qZA()()()()()()),2&n&&(t.Q6J("@routerTransition",void 0),t.xp6(1),t.Q6J("title",t.lcZ(2,14,"WebhookEventDetail")),t.xp6(2),t.Tol(i.containerClass),t.xp6(2),t.Q6J("ngIf",i.webhookEvent),t.xp6(5),t.Oqu(t.lcZ(11,16,"WebhookSendAttempts")),t.xp6(7),t.Q6J("busyIf",i.primengTableHelper.isLoading),t.xp6(1),t.s9C("rows",i.primengTableHelper.defaultRecordsCountPerPage),t.Q6J("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",t.DdM(18,O)),t.xp6(4),t.Q6J("ngIf",0==i.primengTableHelper.totalRecordsCount),t.xp6(8),t.hij(" ",i.detailModalText," "))},dependencies:[v.O5,_.oB,r.Hz,r.Mq,r.TO,Z.U,x.iA,f.jx,T.$,A.s,k.n,w.F,M.a],styles:["#portlet-detail[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:8px}.primeng-datatable-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .primeng-datatable-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}#detailModal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[(0,g.MH)()]}})}return o})(),pathMatch:"full"}];let J=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[s.Bz.forChild(j),s.Bz]})}return o})();var N=a(68565);let H=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[u.o,h.g,J,N.WebhookSubscriptionModule]})}return o})()}}]);