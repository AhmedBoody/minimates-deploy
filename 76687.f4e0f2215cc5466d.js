"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[76687],{76687:(ae,b,i)=>{i.r(b),i.d(b,{LanguageTextsModule:()=>te});var v=i(71902),_=i(92337),u=i(70916),C=i(47530),f=i(41840),L=i(74550),M=i(66232),x=i(64716),e=i(99468),d=i(44328),c=i(96814),s=i(56223),N=i(32925),A=i(94901),m=i(68027),y=i(85219),J=i(51712),z=i(68989),p=i(78853),S=i(45513),F=i(24142),Z=i(3291);const U=["modal"],H=function(n){return{edited:n}};function V(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e.TgZ(2,"div",7)(3,"h4",8)(4,"span"),e._uU(5),e.ALo(6,"localize"),e.qZA()(),e.TgZ(7,"button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e.qZA()(),e.TgZ(8,"div",10)(9,"div",11)(10,"label",12),e._uU(11),e.ALo(12,"localize"),e.qZA(),e.TgZ(13,"div")(14,"strong"),e._uU(15),e.qZA()()(),e.TgZ(16,"div",13)(17,"label",14),e._UZ(18,"i"),e._uU(19),e.qZA(),e._UZ(20,"textarea",15),e.qZA(),e.TgZ(21,"div",13)(22,"label",16),e._UZ(23,"i"),e._uU(24),e.qZA(),e.TgZ(25,"textarea",17,18),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.model.value=o)}),e.qZA()()(),e.TgZ(27,"div",19)(28,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(29),e.ALo(30,"localize"),e.qZA(),e.TgZ(31,"button",21),e._UZ(32,"i",22),e.TgZ(33,"span"),e._uU(34),e.ALo(35,"localize"),e.qZA()()()()}if(2&n){const t=e.MAs(1),a=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,22,"EditText")),e.xp6(2),e.Q6J("disabled",a.saving),e.uIk("aria-label",a.l("Close")),e.xp6(4),e.Oqu(e.lcZ(12,24,"Key")),e.xp6(4),e.Oqu(a.model.key),e.xp6(3),e.Gre("d-inline-block ",a.baseLanguage.icon,""),e.xp6(1),e.hij(" ",a.baseLanguage.displayName," "),e.xp6(1),e.Q6J("ngModel",a.baseText),e.xp6(3),e.Gre("d-inline-block ",a.targetLanguage.icon,""),e.xp6(1),e.hij(" ",a.targetLanguage.displayName," "),e.xp6(1),e.Q6J("ngClass",e.VKq(30,H,a.model.value))("ngModel",a.model.value),e.xp6(3),e.Q6J("disabled",a.saving),e.xp6(1),e.hij(" ",e.lcZ(30,26,"Cancel")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid)("buttonBusy",a.saving)("busyText",a.l("SavingWithThreeDot")),e.xp6(3),e.Oqu(e.lcZ(35,28,"Save"))}}const q=function(n){return{backdrop:"static",keyboard:n}};let Q=(()=>{class n extends f.c{constructor(t,a){super(t),this._languageService=a,this.modalSave=new e.vpe,this.model=new d.L3G,this.active=!1,this.saving=!1}show(t,a,o,l,r,T){this.model.sourceName=o,this.model.key=l,this.model.languageName=a,this.model.value=T,this.baseText=r,this.baseLanguage=(0,p.Z)(abp.localization.languages,h=>h.name===t),this.targetLanguage=(0,p.Z)(abp.localization.languages,h=>h.name===a),this.active=!0,this.modal.show()}onShown(){document.getElementById("TargetLanguageDisplayName").focus()}save(){this.saving=!0,this._languageService.updateLanguageText(this.model).pipe((0,x.x)(()=>this.saving=!1)).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.close(),this.modalSave.emit(null)})}close(){this.active=!1,this.modal.hide()}findLanguage(t){return(0,p.Z)(abp.localization.languages,a=>a.name===t)}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3),e.Y36(d.afF))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["editTextModal"]],viewQuery:function(a,o){if(1&a&&e.Gf(U,7),2&a){let l;e.iGM(l=e.CRH())&&(o.modal=l.first)}},outputs:{modalSave:"modalSave"},features:[e.qOj],decls:5,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createOrEditModal","aria-hidden","true",1,"modal","fade",3,"config","onShown"],["modal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["novalidate","",3,"ngSubmit",4,"ngIf"],["novalidate","",3,"ngSubmit"],["editForm","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5"],[1,"form-label"],[1,"mb-5","form-md-line-input","form-md-floating-label","no-hint"],["for","BaseLanguageDisplayName",1,"form-label"],["id","BaseLanguageDisplayName","readonly","","rows","4","name","baseText",1,"form-control","edited",3,"ngModel"],["for","TargetLanguageDisplayName",1,"form-label"],["id","TargetLanguageDisplayName","rows","4","name","value",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["targetValueInput",""],[1,"modal-footer"],["type","button",1,"btn","btn-light-primary","fw-bold",3,"disabled","click"],["type","submit",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText"],[1,"fa","fa-save"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0,1),e.NdJ("onShown",function(){return o.onShown()}),e.TgZ(2,"div",2)(3,"div",3),e.YNc(4,V,36,32,"form",4),e.qZA()()()),2&a&&(e.Q6J("config",e.VKq(2,q,!o.saving)),e.xp6(4),e.Q6J("ngIf",o.active))},dependencies:[c.mk,c.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,S.L,F.Z,Z.F],encapsulation:2})}return n})();const R=["targetLanguageNameCombobox"],G=["baseLanguageNameCombobox"],O=["sourceNameCombobox"],j=["targetValueFilterCombobox"],P=["textsTable"],w=["editTextModal"],E=["dataTable"],I=["paginator"];function Y(n,g){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=g.$implicit;e.Q6J("value",t.name),e.uIk("data-icon",t.icon),e.xp6(1),e.hij(" ",t.displayName," ")}}function B(n,g){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=g.$implicit;e.Q6J("value",t.name),e.uIk("data-icon",t.icon),e.xp6(1),e.hij(" ",t.displayName," ")}}function k(n,g){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=g.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function K(n,g){1&n&&(e.TgZ(0,"tr")(1,"th",41),e._uU(2),e.ALo(3,"localize"),e._UZ(4,"p-sortIcon",42),e.qZA(),e.TgZ(5,"th",43),e._uU(6),e.ALo(7,"localize"),e._UZ(8,"p-sortIcon",44),e.qZA(),e.TgZ(9,"th",45),e._uU(10),e.ALo(11,"localize"),e._UZ(12,"p-sortIcon",46),e.qZA(),e.TgZ(13,"th",47),e._uU(14),e.ALo(15,"localize"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"Key")," "),e.xp6(4),e.hij(" ",e.lcZ(7,6,"BaseValue")," "),e.xp6(4),e.hij(" ",e.lcZ(11,8,"TargetValue")," "),e.xp6(4),e.Oqu(e.lcZ(15,10,"Edit")))}function D(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span",48),e._uU(3),e.ALo(4,"localize"),e.qZA(),e.TgZ(5,"span",49),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span",48),e._uU(9),e.ALo(10,"localize"),e.qZA(),e.TgZ(11,"span",49),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"span",48),e._uU(15),e.ALo(16,"localize"),e.qZA(),e.TgZ(17,"span",49),e._uU(18),e.qZA()(),e.TgZ(19,"td")(20,"button",50),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(),T=e.MAs(68);return e.KtG(T.show(r.baseLanguageName,r.targetLanguageName,r.sourceName,l.key,l.baseValue,l.targetValue))}),e.ALo(21,"localize"),e._UZ(22,"i",51),e.qZA()()()}if(2&n){const t=g.$implicit,a=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,11,"Key")),e.xp6(2),e.s9C("title",t.key),e.xp6(1),e.Oqu(a.truncateString(t.key)),e.xp6(3),e.Oqu(e.lcZ(10,13,"BaseValue")),e.xp6(2),e.s9C("title",t.baseValue),e.xp6(1),e.hij(" ",a.truncateString(t.baseValue)," "),e.xp6(3),e.Oqu(e.lcZ(16,15,"TargetValue")),e.xp6(2),e.s9C("title",t.targetValue),e.xp6(1),e.hij(" ",a.truncateString(t.targetValue)," "),e.xp6(2),e.s9C("title",e.lcZ(21,17,"Edit")),e.xp6(2),e.uIk("aria-label",a.l("Edit"))}}function $(n,g){1&n&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NoData")," "))}const W=function(){return{"min-width":"50rem"}},X=[{path:"",component:(()=>{class n extends f.c{constructor(t,a,o,l){super(t),this._languageService=a,this._router=o,this._activatedRoute=l,this.sourceNames=[],this.languages=[]}ngOnInit(){this.sourceNames=(0,L.Z)((0,M.Z)(abp.localization.sources,t=>"MultiTenantLocalizationSource"===t.type),t=>t.name),this.languages=abp.localization.languages,this.init()}getLanguageTexts(t){!this.paginator||!this.dataTable||!this.sourceName||(this.primengTableHelper.showLoadingIndicator(),this._languageService.getLanguageTexts(this.primengTableHelper.getMaxResultCount(this.paginator,t),this.primengTableHelper.getSkipCount(this.paginator,t),this.primengTableHelper.getSorting(this.dataTable),this.sourceName,this.baseLanguageName,this.targetLanguageName,this.targetValueFilter,this.filterText).pipe((0,x.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(a=>{this.primengTableHelper.totalRecordsCount=a.totalCount,this.primengTableHelper.records=a.items,this.primengTableHelper.hideLoadingIndicator()}))}init(){this._activatedRoute.params.subscribe(t=>{this.baseLanguageName=t.baseLanguageName||abp.localization.currentLanguage.name,this.targetLanguageName=t.name,this.sourceName=t.sourceName||"Minimates",this.targetValueFilter=t.targetValueFilter||"ALL",this.filterText=t.filterText||"",this.reloadPage()})}reloadPage(){this.paginator.changePage(this.paginator.getPage())}applyFilters(t){this._router.navigate(["app/admin/languages",this.targetLanguageName,"texts",{sourceName:this.sourceName,baseLanguageName:this.baseLanguageName,targetValueFilter:this.targetValueFilter,filterText:this.filterText}]),this.paginator.changePage(0)}truncateString(t){return abp.utils.truncateStringWithPostfix(t,32,"...")}refreshTextValueFromModal(){for(let t=0;t<this.primengTableHelper.records.length;t++)if(this.primengTableHelper.records[t].key===this.editTextModal.model.key)return void(this.primengTableHelper.records[t].targetValue=this.editTextModal.model.value)}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3),e.Y36(d.afF),e.Y36(u.F0),e.Y36(u.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(a,o){if(1&a&&(e.Gf(R,7),e.Gf(G,7),e.Gf(O,7),e.Gf(j,7),e.Gf(P,7),e.Gf(w,7),e.Gf(E,7),e.Gf(I,7)),2&a){let l;e.iGM(l=e.CRH())&&(o.targetLanguageNameCombobox=l.first),e.iGM(l=e.CRH())&&(o.baseLanguageNameCombobox=l.first),e.iGM(l=e.CRH())&&(o.sourceNameCombobox=l.first),e.iGM(l=e.CRH())&&(o.targetValueFilterCombobox=l.first),e.iGM(l=e.CRH())&&(o.textsTable=l.first),e.iGM(l=e.CRH())&&(o.editTextModal=l.first),e.iGM(l=e.CRH())&&(o.dataTable=l.first),e.iGM(l=e.CRH())&&(o.paginator=l.first)}},features:[e.qOj],decls:69,vars:57,consts:[[3,"title","description"],[1,"card","card-custom","gutter-b"],[1,"card-body"],["autocomplete","new-password","id","TextsFilterForm",1,"form"],[1,"row","align-items-center","m--margin-bottom-10"],[1,"col-sm-6","col-md-3"],[1,"mb-5"],["for","TextBaseLanguageSelectionCombobox",1,"form-label"],["name","baseLanguageName",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["baseLanguageNameCombobox",""],[3,"value",4,"ngFor","ngForOf"],["for","TextTargetLanguageSelectionCombobox",1,"form-label"],["name","targetLanguageName",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["targetLanguageNameCombobox",""],["for","TextSourceSelectionCombobox",1,"form-label"],["name","sourceName",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["sourceNameCombobox",""],["for","TargetValueFilterSelectionCombobox",1,"form-label"],["name","targetValueFilter",1,"form-control","bs-select",3,"ngModel","ngModelChange"],["targetValueFilterCombobox",""],["value","ALL"],["value","EMPTY"],[1,"row","align-items-center","mb-4"],[1,"col-sm-12"],[1,"input-group"],["name","filterText","autoFocus","","type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"la","la-refresh"],[1,"row","align-items-center"],[1,"col","primeng-datatable-container",3,"busyIf"],["sortMode","multiple",3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[3,"modalSave"],["editTextModal",""],[3,"value"],["pSortableColumn","key"],["field","key"],["pSortableColumn","baseValue"],["field","baseValue"],["pSortableColumn","targetValue"],["field","targetValue"],[2,"width","100px"],[1,"p-column-title"],[3,"title"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"title","click"],[1,"la","la-edit"],[1,"primeng-no-data"]],template:function(a,o){1&a&&(e.TgZ(0,"div"),e._UZ(1,"sub-header",0),e.ALo(2,"localize"),e.ALo(3,"localize"),e.TgZ(4,"div")(5,"div",1)(6,"div",2)(7,"form",3)(8,"div")(9,"div",4)(10,"div",5)(11,"div",6)(12,"label",7),e._uU(13),e.ALo(14,"localize"),e.qZA(),e.TgZ(15,"select",8,9),e.NdJ("ngModelChange",function(r){return o.baseLanguageName=r}),e.YNc(17,Y,2,3,"option",10),e.qZA()()(),e.TgZ(18,"div",5)(19,"div",6)(20,"label",11),e._uU(21),e.ALo(22,"localize"),e.qZA(),e.TgZ(23,"select",12,13),e.NdJ("ngModelChange",function(r){return o.targetLanguageName=r}),e.YNc(25,B,2,3,"option",10),e.qZA()()(),e.TgZ(26,"div",5)(27,"div",6)(28,"label",14),e._uU(29),e.ALo(30,"localize"),e.qZA(),e.TgZ(31,"select",15,16),e.NdJ("ngModelChange",function(r){return o.sourceName=r}),e.YNc(33,k,2,2,"option",10),e.qZA()()(),e.TgZ(34,"div",5)(35,"div",6)(36,"label",17),e._uU(37),e.ALo(38,"localize"),e.qZA(),e.TgZ(39,"select",18,19),e.NdJ("ngModelChange",function(r){return o.targetValueFilter=r}),e.TgZ(41,"option",20),e._uU(42),e.ALo(43,"localize"),e.qZA(),e.TgZ(44,"option",21),e._uU(45),e.ALo(46,"localize"),e.qZA()()()()(),e.TgZ(47,"div",22)(48,"div",23)(49,"div",24)(50,"input",25),e.NdJ("ngModelChange",function(r){return o.filterText=r}),e.ALo(51,"localize"),e.qZA(),e.TgZ(52,"button",26),e.NdJ("click",function(r){return o.applyFilters(r)}),e._UZ(53,"i",27),e._uU(54),e.ALo(55,"localize"),e.qZA()()()()()(),e.TgZ(56,"div",28)(57,"div",29)(58,"p-table",30,31),e.NdJ("onLazyLoad",function(r){return o.getLanguageTexts(r)}),e.YNc(60,K,16,12,"ng-template",32),e.YNc(61,D,23,19,"ng-template",33),e.qZA(),e.YNc(62,$,3,3,"div",34),e.TgZ(63,"div",35)(64,"p-paginator",36,37),e.NdJ("onPageChange",function(r){return o.getLanguageTexts(r)}),e.ALo(66,"localize"),e.qZA()()()()()()(),e.TgZ(67,"editTextModal",38,39),e.NdJ("modalSave",function(){return o.refreshTextValueFromModal()}),e.qZA()()),2&a&&(e.Q6J("@routerTransition",void 0),e.xp6(1),e.Q6J("title",e.lcZ(2,33,"LanguageTexts"))("description",e.lcZ(3,35,"LanguageTextsHeaderInfo")),e.xp6(3),e.Tol(o.containerClass),e.xp6(9),e.hij(" ",e.lcZ(14,37,"BaseLanguage")," "),e.xp6(2),e.Q6J("ngModel",o.baseLanguageName),e.xp6(2),e.Q6J("ngForOf",o.languages),e.xp6(4),e.hij(" ",e.lcZ(22,39,"TargetLanguage")," "),e.xp6(2),e.Q6J("ngModel",o.targetLanguageName),e.xp6(2),e.Q6J("ngForOf",o.languages),e.xp6(4),e.hij(" ",e.lcZ(30,41,"Source")," "),e.xp6(2),e.Q6J("ngModel",o.sourceName),e.xp6(2),e.Q6J("ngForOf",o.sourceNames),e.xp6(4),e.hij(" ",e.lcZ(38,43,"TargetValue")," "),e.xp6(2),e.Q6J("ngModel",o.targetValueFilter),e.xp6(3),e.Oqu(e.lcZ(43,45,"All")),e.xp6(3),e.Oqu(e.lcZ(46,47,"EmptyOnes")),e.xp6(5),e.s9C("placeholder",e.lcZ(51,49,"SearchWithThreeDot")),e.Q6J("ngModel",o.filterText),e.xp6(4),e.hij(" ",e.lcZ(55,51,"Refresh")," "),e.xp6(3),e.Q6J("busyIf",o.primengTableHelper.isLoading),e.xp6(1),e.s9C("rows",o.primengTableHelper.defaultRecordsCountPerPage),e.Q6J("value",o.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",e.DdM(56,W)),e.xp6(4),e.Q6J("ngIf",0==o.primengTableHelper.totalRecordsCount),e.xp6(2),e.Q6J("rows",o.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",o.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",o.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.xi3(66,53,"TotalRecordsCount",o.primengTableHelper.totalRecordsCount)))},dependencies:[c.sg,c.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.On,s.F,N.h,A.U,m.iA,y.jx,m.lQ,m.fz,J.D,z.$,Q,Z.F],data:{animation:[(0,C.MH)()]}})}return n})(),pathMatch:"full"}];let ee=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#a=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(X),u.Bz]})}return n})(),te=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#a=this.\u0275inj=e.cJS({imports:[_.o,v.g,ee]})}return n})()}}]);